{
  "version": 3,
  "sources": ["../client/index.js", "../src/locations/casino.js", "../client/utils.js", "../client/ui/button.js", "../client/cars.js", "../client/phone.js", "../client/clan.js", "../client/pvp.js", "../client/dungeon-solo.js", "../client/group-fight.js", "../client/ui/container.js", "../client/pets.js", "../client/tattoo.js", "../client/ui/logs.js", "../client/ui/popover.js", "../client/ui/index.js", "../client/dopings.js", "../client/alley.js", "../client/moscowpoly.js", "../client/timers.js", "../client/zodiac.js"],
  "sourcesContent": ["/* global $ AngryAjax fightForward */\n\nimport {\n  chaoticFightMode,\n  getAlleyCooldown,\n  patrolMode,\n  trackRatMode,\n  workMode,\n} from \"./alley.js\";\n\nimport {\n  dungeonSpeedUp,\n  handleUI,\n  kubovichSpeedUp,\n  neftLeninSpeedUp,\n  redrawMain,\n  renderCandyCountdown,\n  renderNavbar,\n  renderPanel,\n} from \"./ui/index.js\";\n\nimport { carBringupMode } from \"./cars.js\";\nimport { moscowpolySpeedUp } from \"./moscowpoly.js\";\nimport { drawTimers } from \"./timers.js\";\nimport { zodiacMode } from \"./zodiac.js\";\n\nexport const player = window.player;\nexport const showAlert = window.showAlert;\nconst BASE_URL = new URL(window.location.href).origin + \"\";\n\nconst goTo = async (url) => {\n  window.AngryAjax.goToUrl(url);\n};\n\nexport const HEADERS = {\n  accept: \"*/*\",\n  \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n  \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n  \"sec-fetch-dest\": \"empty\",\n  \"sec-fetch-mode\": \"cors\",\n  \"sec-fetch-site\": \"same-origin\",\n  \"x-requested-with\": \"XMLHttpRequest\",\n};\n\nexport async function buyCasinoTokens() {\n  const res = await fetch(new URL(window.location.href).origin + \"/casino/\", {\n    headers: HEADERS,\n    referrer: new URL(window.location.href).origin + \"/casino/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=ore&count=20\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  const { success } = await res.json();\n\n  return { success };\n}\n\nexport async function waitForCooldown(callback) {\n  const cooldownSeconds = await getAlleyCooldown();\n  if (cooldownSeconds) {\n    showAlert(\n      `${callback.name}`,\n      `\uD83D\uDEA7 Cooldown in effect. Retrying in ${cooldownSeconds} seconds.`\n    );\n    setTimeout(callback, (cooldownSeconds + 5) * 1000);\n    return true;\n  }\n  return false;\n}\n\nexport async function undressItem(itemId = \"196690061\") {\n  await fetch(\n    `${new URL(window.location.href).origin}/player/json/withdraw/${itemId}/`,\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"if-modified-since\": new Date().toUTCString(),\n        \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\":\n          player.nickname === \"barifan\" ? '\"macOS\"' : '\"Linux\"',\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/player/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: null,\n      method: \"GET\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n}\n\nexport async function autoPilot() {\n  // 979786 - bronepozed\n  // 1052323 - electro-volga\n  // 1086202 - electro-volga (\u0414\u0430\u043D\u044F)\n  await carBringupMode(\"1052323\"); // electro-volga\n  await workMode();\n  await patrolMode();\n  await trackRatMode();\n  // await checkBronikPieces();\n  await zodiacMode();\n}\n\nexport async function smurfInit() {\n  // await joinProt();\n  // await joinSiri();\n  // await signUpForSiri();\n  // await chaoticFightMode();\n  // await workMode(1);\n  // await patrolMode(10);\n  // await trackRatMode(20);\n  // await handleSmurfFight();\n  // await placeHuntOrder();\n\n  // await takeDailyDose(false);\n  // await chaoticFightMode();\n  // await joinChaoticFight();\n\n  $(document).ajaxStop(function () {\n    if (location.pathname === \"/quest/\") {\n      goNextLevel();\n    }\n  });\n}\n\nexport async function init() {\n  await renderPanel();\n  await renderNavbar();\n  await redrawMain();\n  await drawTimers();\n  renderCandyCountdown();\n  moscowpolySpeedUp();\n  kubovichSpeedUp();\n  neftLeninSpeedUp();\n  dungeonSpeedUp();\n  handleUI();\n\n  console.log(\"\u2139\uFE0F Enhanced client-side functionality.\");\n\n  if (window.SMURF_MODE) {\n    console.log(\"SMURF MODE\");\n    await smurfInit();\n  }\n\n  // event listener, on every page load update UI\n  $(document).ajaxStop(handleUI);\n}\n\nexport * from \"./alley.js\";\nexport * from \"./cars.js\";\nexport * from \"./dopings.js\";\nexport * from \"./group-fight.js\";\nexport { sendMessage } from \"./phone.js\";\nexport { handlePvpFight } from \"./pvp.js\";\nexport * from \"./ui/index.js\";\nexport * from \"./utils.js\";\nexport { zodiacMode } from \"./zodiac.js\";\nexport { drawTimers };\n// $(document).one(\"ajaxStop\", init);\n", "async function slotRoll(count) {\n  const fishkiCount = +document.querySelectorAll(\"#fishki-balance-num\")[0]\n    .innerText;\n\n  if (fishkiCount < 50) {\n    console.log(`[${new Date().toLocaleDateString()}]\\nNot enough fishki...`);\n    return;\n  }\n  const res = await fetch(\n    new URL(window.location.href).origin + \"/casino/slots/\",\n    {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"Accept-Encoding\": \"gzip, deflate, br, zstd\",\n        \"Accept-Language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"Content-Type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        Cookie:\n          \"PHPSESSID=tdqson49qtuann5lh9dlje4r30; chat_lastId=19c354c85432b100b15582daf1f16d65; _lbn_rt=rt_c5e13b48c9068c025ca6439be730b7f9; _lbn_d=1731077702; _lbn_rf=https%3A%2F%2Fwww.google.com%2F; register_fraction=resident; player=barifan; alleysearchtab=; chat_force=false; werewolf_search=0; metro_show_search_other_rat=0; player_id=7390418; authkey=0190c46015f80643922afcca0791ef9e8bdfe062; userid=7390418; travelpage=default; mfPassatiji=true; chat_state=minimized; minimized=1; minichat-battle=%7B%22x%22%3A%22-160.994px%22%2C%22y%22%3A%22318.989px%22%2C%22w%22%3A%22175.18181800000002px%22%2C%22h%22%3A%22170.18181800000002px%22%7D; type=weak; minlevel=13; maxlevel=13; search_type=level; sound_slots=1; sovetpage=career; _lbn_l=1731722021; chat_active=1731722153038\",\n        DNT: \"1\",\n        Host: \"www.moswar.ru\",\n        Origin: new URL(window.location.href).origin + \"\",\n        Referer: new URL(window.location.href).origin + \"/casino/slots/\",\n        \"Sec-Fetch-Dest\": \"empty\",\n        \"Sec-Fetch-Mode\": \"cors\",\n        \"Sec-Fetch-Site\": \"same-origin\",\n        \"User-Agent\":\n          \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/130.0.0.0 Safari/537.36\",\n        \"X-Requested-With\": \"XMLHttpRequest\",\n        \"sec-ch-ua\": '\"Not?A_Brand\";v=\"99\", \"Chromium\";v=\"130\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"macOS\"',\n      },\n      body: new URLSearchParams({\n        action: \"spin\",\n        count: count,\n      }),\n    }\n  );\n\n  const data = await res.json();\n\n  const timestamp = new Date().toTimeString().split(\" \")[0];\n  const log = { timestamp, count, profit: data.win ? data.profit : 0 };\n\n  // Retrieve existing logs from localStorage\n  const logs = JSON.parse(localStorage.getItem(\"slotLogs\")) || [];\n\n  // Add the new log\n  logs.push(log);\n\n  // Save updated logs back to localStorage\n  localStorage.setItem(\"slotLogs\", JSON.stringify(logs));\n\n  console.log(`[${log.timestamp}] ${log.count} -> ${log.profit}`);\n\n  return data;\n}\n\nfunction getRandomDelay(min, max) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nasync function startSlotRolling() {\n  setInterval(\n    async () => {\n      await slotRoll(10);\n    },\n    getRandomDelay(8000, 12000)\n  );\n}\n\nexport async function rollKubovich(spins = 10) {\n  async function roll(action = \"black\", type = \"black\") {\n    await fetch(new URL(window.location.href).origin + \"/casino/kubovich/\", {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: `action=${action}&type=${type}`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    });\n    AngryAjax.reload();\n  }\n\n  if (!document.querySelector(\"#push-ellow\").classList.contains(\"disabled\")) {\n    console.log(\"roll yellow\");\n    await roll(\"load\", \"yellow\");\n    await roll(\"yellow\", \"black\");\n  } else {\n    await roll();\n    await roll(\"load\");\n  }\n}\n\nexport async function playBlackjack() {\n  let response = await fetch(\n    new URL(window.location.href).origin + \"/casino/blackjack/\",\n    {\n      method: \"POST\",\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: \"action=new&bet=10\",\n      credentials: \"include\",\n    }\n  );\n\n  let game = await response.json();\n  let total = game.newRightHand.reduce((sum, card) => sum + card[2], 0);\n\n  while (total < 17) {\n    await new Promise((res) => setTimeout(res, 500)); // Small delay\n    let hitResponse = await fetch(\n      new URL(window.location.href).origin + \"/casino/blackjack/\",\n      {\n        method: \"POST\",\n        headers: {\n          accept: \"application/json, text/javascript, */*; q=0.01\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        body: \"action=more\",\n        credentials: \"include\",\n      }\n    );\n\n    let hit = await hitResponse.json();\n    if (!hit.card) break;\n    total += hit.card[0][2];\n\n    if (total > 21) break; // Lost, restart\n  }\n\n  await new Promise((res) => setTimeout(res, 500)); // Small delay\n  await fetch(new URL(window.location.href).origin + \"/casino/blackjack/\", {\n    method: \"POST\",\n    headers: {\n      accept: \"application/json, text/javascript, */*; q=0.01\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    body: \"action=stop\",\n    credentials: \"include\",\n  });\n}\n", "let $ = window.$;\n\nexport function timeToMs(timeStr) {\n  const parts = timeStr.split(\":\").map(Number);\n  let hours = 0,\n    minutes = 0,\n    seconds = 0;\n\n  if (parts.length === 3) {\n    hours = parts[0];\n    minutes = parts[1];\n    seconds = parts[2];\n  } else if (parts.length === 2) {\n    minutes = parts[0];\n    seconds = parts[1];\n  } else if (parts.length === 1) {\n    seconds = parts[0];\n  }\n\n  return (hours * 3600 + minutes * 60 + seconds) * 1000;\n}\n\nexport function getMoscowTime() {\n  return new Date(\n    new Date().toLocaleString(\"en-US\", { timeZone: \"Europe/Moscow\" })\n  );\n}\n\nexport function formatTime(seconds) {\n  const hrs = Math.floor(seconds / 3600);\n  const mins = Math.floor((seconds % 3600) / 60);\n  const secs = seconds % 60;\n\n  const timeParts = [\n    hrs > 0 ? String(hrs).padStart(2, \"0\") : null,\n    String(mins).padStart(2, \"0\"),\n    String(secs).padStart(2, \"0\"),\n  ].filter(Boolean); // Exclude null parts\n\n  return timeParts.join(\":\");\n}\n\nexport function formatNumber(num) {\n  num = `${num}`.split(\",\").join(\"\");\n  if (Math.abs(num) >= 1e9) {\n    return Math.floor((num / 1e9) * 10) / 10 + \"B\"; // Round down to 1 decimal place\n  } else if (Math.abs(num) >= 1e6) {\n    return Math.floor((num / 1e6) * 10) / 10 + \"M\"; // Round down to 1 decimal place\n  } else if (Math.abs(num) >= 1e3) {\n    return Math.floor((num / 1e3) * 10) / 10 + \"K\"; // Round down to 1 decimal place\n  }\n  return num.toString();\n}\n\nexport function delay(s = 1) {\n  return new Promise((res) => setTimeout(res, s * 1000));\n}\n\nexport async function getElementsOnThePage(selector, pathname) {\n  const currentOrigin = new URL(window.location.href).origin;\n  const pathName = pathname.startsWith(\"/\") ? pathname : \"/\" + pathname;\n  const response = await fetch(currentOrigin + pathName);\n  const data = await response.text();\n  const doc = parseHtml(data);\n  const elements = doc.querySelectorAll(selector);\n\n  if (elements.length === 0) return undefined;\n\n  return elements.length === 1 ? elements[0] : Array.from(elements);\n}\n\nexport function parseHtml(htmlString) {\n  const parser = new DOMParser();\n\n  const cleanedHtmlString = htmlString\n    .replace(/\\\\&quot;/g, '\"') // Handle escaped quotes if they exist\n    .replace(/\\\\\"/g, '\"'); // Normalize double-escaped quotes\n\n  const doc = parser.parseFromString(cleanedHtmlString, \"text/html\");\n\n  return doc;\n}\n\nexport function convertPlayerUrlToId(url) {\n  const match = url.match(/\\player\\/(\\d+)\\//);\n  const playerId = match ? match[1] : null;\n  return playerId;\n}\n\nexport function getPlayerId(doc) {\n  try {\n    const playerUrl = doc.querySelector(\".fighter2 .user a\").href;\n    const playerId = convertPlayerUrlToId(playerUrl);\n    return playerId;\n  } catch (e) {\n    console.log(\"\uD83D\uDEA7 Could not find player id\");\n  }\n}\n\nexport function filterLogs(doc = window.document) {\n  let farmLogs = [...doc.querySelectorAll(\"tr\")].filter(\n    (tr) => tr.querySelector(\"td.actions div.c\")?.innerText === \"\u0412 \u0441\u043F\u0438\u0441\u043E\u043A \u0436\u0435\u0440\u0442\u0432\"\n  );\n\n  let whales = farmLogs\n    .map((el) => {\n      let tugriki = +el\n        .querySelector(\".text .tugriki\")\n        .innerText.split(\",\")\n        .join(\"\");\n      const user = el.querySelector(\".user a\").href;\n      if (tugriki > 300000) return user;\n    })\n    .filter((el) => el);\n\n  let ids = whales.map((url) => convertPlayerUrlToId(url));\n  return ids;\n}\n\nexport async function getTodayScore() {\n  const count = +(await getElementsOnThePage(\".my .value b\", `/rating/wins/`))\n    .innerText;\n\n  return count;\n}\n\nexport function strToHtml(htmlString) {\n  const tempDiv = document.createElement(\"div\");\n  tempDiv.innerHTML = htmlString.trim();\n  return tempDiv.firstChild;\n}\n\nexport async function scrapeStat(i) {\n  // Trigger the tooltip\n  const tooltipTriggerSelector = `#stats-accordion > dd:nth-child(2) > ul > li:nth-child(${i}) > div.label > span`;\n  const tooltip = $(`${tooltipTriggerSelector}`);\n  tooltip.trigger(\"mouseenter\");\n\n  // Wait for the tooltip to appear\n  await new Promise((resolve) => setTimeout(resolve, 250));\n\n  // Determine the tooltip container based on i+1\n  const tooltipContainer = `#tooltip${i + 1}`;\n\n  // Get the characteristic name (e.g., \"\u0417\u0434\u043E\u0440\u043E\u0432\u044C\u0435\")\n  const keySelector = `${tooltipContainer} > h2`;\n  const key = $(keySelector)[0]?.innerText;\n\n  if (!key) {\n    console.error(`Key not found for tooltip ${tooltipContainer}`);\n    return null;\n  }\n\n  // Get the basic stat (\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u0436)\n  const basicSelector = `${tooltipContainer} > div > span:nth-child(1)`;\n  const basicText = $(basicSelector)[0]?.innerText || \"\";\n  const basicValue = parseInt(basicText.split(\":\")[1].trim(), 10);\n\n  // Get the super stat (\u0421\u0443\u043F\u0435\u0440\u0437\u0434\u043E\u0440\u043E\u0432\u044C\u0435)\n  const superSelector = `${tooltipContainer} > div > span:nth-child(3)`;\n  const superText = $(superSelector)[0]?.innerText || \"\";\n  const superValue = parseInt(superText.split(\"+\")[1].trim(), 10);\n\n  // Construct the result object\n  const result = {\n    [key]: {\n      \u041F\u0435\u0440\u0441\u043E\u043D\u0430\u0436: basicValue || 0,\n      [\"\u0421\u0443\u043F\u0435\u0440\" + key.toLowerCase()]: superValue || 0,\n      \u0421\u0443\u043C\u043C\u0430: (basicValue || 0) + (superValue || 0),\n    },\n  };\n\n  return result;\n}\n\nexport async function gatherStats() {\n  const stats = {\n    \u0414\u0430\u0442\u0430: new Date().toLocaleDateString(\"ru-RU\").replace(/\\./g, \"/\"),\n  };\n\n  for (let i = 1; i <= 7; i++) {\n    const stat = await scrapeStat(i); // Call the scrapeStat function\n    if (stat) {\n      Object.assign(stats, stat); // Merge the result into the stats object\n    }\n  }\n\n  return stats;\n}\n\n// const allStats = await gatherStats();\n\n// console.log(allStats);\n", "/* global $ showAlert */\n\nimport { formatTime, strToHtml } from \"../utils.js\";\n\nexport function createButton({\n  text,\n  onClick = async () => {},\n  title,\n  className,\n  disableAfterClick = true,\n}) {\n  let btn = strToHtml(\n    `<button type=\"button\" class=\"${className ? className + \"-btn\" : \"\"} button\"><span style=\"float: none;\" class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\">${text}</div></span></button>`\n  );\n\n  // Function to update button text without breaking the structure\n  btn.setText = function (newText) {\n    $(btn).find(\".c\").text(newText);\n  };\n\n  btn.addEventListener(\"click\", async (event) => {\n    if (btn.classList.contains(\"disabled\")) return;\n\n    btn.classList.add(\"disabled\");\n\n    try {\n      await onClick(event);\n    } catch (e) {\n      console.error(onClick.toString(), e);\n    }\n\n    if (!disableAfterClick) {\n      btn.classList.remove(\"disabled\");\n    }\n  });\n\n  if (title) {\n    btn.title = title;\n  }\n\n  return btn;\n}\n\nexport function createDropdown({\n  toggleText,\n  className,\n  items,\n  isOpen = true,\n}) {\n  let $container = $(`<div class=\"dropdown ${className}\"></div>`).css({\n    display: \"flex\",\n    gap: \"8px\",\n    justifyContent: \"center\",\n    flexWrap: \"wrap\",\n    alignItems: \"center\",\n  });\n\n  if (!isOpen) {\n    $container.hide();\n  }\n\n  items.forEach((item) => {\n    $container.append(item);\n  });\n\n  const toggleBtn = createButton({\n    text: toggleText,\n    onClick: (e) => {\n      const btn = e.currentTarget;\n      $container.toggle(\"fast\");\n      btn.classList.remove(\"disabled\");\n    },\n  });\n\n  const $dropdown = $(\"<div>\")\n    .css({\n      display: \"flex\",\n      gap: \"8px\",\n      justifyContent: \"center\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n    })\n    .append(toggleBtn, $container);\n\n  // Expose append method\n  $dropdown.append = (item) => {\n    $container.append(item);\n  };\n\n  return $dropdown;\n}\n\n// createDropdown({\n//   className: \"abilitied-dropdown\",\n//   toggleText: \"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0430\u0431\u0438\u043B\u043A\u0438\",\n//   items: $(\"#abls\").children().toArray(),\n//   isOpen: true,\n// });\n\nexport function createNumberAction({\n  label,\n  action,\n  className,\n  min = 0,\n  max = 500,\n}) {\n  let $container = $(`<div class=\"${className} btn-input-field\"></div>`).css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n    gap: \"4px\",\n    padding: \"4px\",\n  });\n\n  let $input = $(\"<input>\", {\n    type: \"number\",\n    min,\n    max,\n    value: min,\n    class: \"input-field\",\n  })\n    .css({\n      width: \"60px\",\n      textAlign: \"center\",\n    })\n    .on(\"input\", function () {\n      let val = parseInt($(this).val(), 10);\n      if (!val) $(this).val(min);\n      if (val > max) {\n        $(this).val(max);\n      }\n      if (val < min) {\n        $(this).val(min);\n      }\n\n      // Update button text dynamically\n      button.setText(`${label} x${$(this).val()}`);\n    });\n\n  let button = createButton({\n    text: `${label} x${min}`,\n    className,\n    onClick: async () => {\n      let count = parseInt($input.val(), 10);\n      if (isNaN(count) || count <= min || count > max) return;\n\n      button.classList.add(\"disabled\");\n\n      // Track start time\n      const startTime = Date.now();\n\n      for (let i = 0; i < count; i++) {\n        await action();\n      }\n\n      // Track end time and calculate the difference\n      const endTime = Date.now();\n      const diffMs = endTime - startTime;\n\n      button.classList.remove(\"disabled\");\n\n      // // Call showAlert with the formatted message\n      // showAlert(\n      //   \"\u0413\u043E\u0442\u043E\u0432\u043E\",\n      //   `\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u043B \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435 ${count} \u0440\u0430\u0437 \u0437\u0430 ${formatTime(Math.floor(diffMs / 1000))}.`\n      // );\n    },\n  });\n\n  $container.append($input, $(button));\n  return $container;\n}\n", "/* global showAlert $*/\nimport { createPopover, sendAlert } from \"./index.js\";\nimport { createButton } from \"./ui/button.js\";\nimport { delay, formatTime, getElementsOnThePage, parseHtml } from \"./utils.js\";\n\n// \u043C\u0430\u0448\u0438\u043D\u044B \u043D\u0430 \u043E\u0442\u043A\u0430\u0442 \u0438 \u0430\u0431\u0438\u043B\u043A\u0438\nexport const EXCEPTION_CARS = [\n  160, 198, 64, 48, 165, 46, 167, 40, 211, 221, 197, 50, 122, 215, 47, 110, 115,\n  220, 196, 133, 87, 222, 179, 161,\n];\n\nexport const EXCEPTION_PLANES_AND_BOATS_RIDES_IDS = [158, 219, 155, 121]; // zeppelin, kosmospas (mars-25), kosmospas, mi-8 (\u0434\u0435\u0441\u0430\u043D\u0442)\n\n// \u0432\u0432\nexport const PLANES_AND_BOATS_RIDES_IDS = [\n  158, 121, 219, 155, 192, 190, 223, 93, 97, 135, 182, 178, 195, 59, 216, 212,\n  183, 173, 159, 156, 149, 146, 134, 119, 111, 95, 88, 84, 78, 74, 69, 68, 65,\n  58, 55, 54, 52, 51, 49, 44, 38, 36, 35,\n];\n\nexport const BANNED_CARS_RIDES_IDS = [\n  141, 19, 85, 174, 175, 176, 166, 177, 61, 187, 188, 33,\n];\n\nconst PRESETS = [\n  {\n    name: \"\uD83D\uDE99 \u0422\u0430\u0447\u043A\u0438 6 \u0447.\",\n    rides: [1, 2, 3, 4, 5, 6, 86, 162, 42],\n  },\n  {\n    name: \"\uD83C\uDFCE\uFE0F \u0422\u0430\u0447\u043A\u0438 10-12 \u0447.\",\n    rides: [\n      7, 8, 9, 10, 11, 12, 45, 50, 80, 83, 98, 163, 164, 191, 213, 214, 222,\n      110, 197, 92, 96, 221,\n    ],\n  },\n  {\n    name: \"\uD83D\uDE99 \u0422\u0430\u0447\u043A\u0438 13-15 \u0447.\",\n    rides: [215, 47, 53, 43, 169, 70, 157, 57, 62, 145, 170],\n  },\n  {\n    name: \"\uD83D\uDE97 \u0412\u0421\u0415 \u0422\u0410\u0427\u041A\u0418! \uD83D\uDCAF\",\n    rides: [],\n  },\n];\n\nexport async function carBringup(carId = \"979786\") {\n  await checkCarTank(carId);\n  fetch(new URL(window.location.href).origin + \"/automobile/bringup/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/automobile/bringup/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `car=${carId}&__ajax=1&return_url=%2Farbat%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function carBringupMode(carId = \"979786\") {\n  const isMonday =\n    new Intl.DateTimeFormat(\"en-US\", {\n      weekday: \"long\",\n      timeZone: \"Europe/Moscow\",\n    }).format(new Date()) === \"Monday\";\n\n  if (!isMonday) {\n    showAlert(\"\uD83D\uDE95\", \"\u041D\u0435 \u043F\u043E\u043D\u0435\u0434\u0435\u043B\u044C\u043D\u0438\u043A.\");\n    return;\n  }\n  const cooldownTimer = await getElementsOnThePage(\"#cooldown\", `/arbat/`);\n\n  if (cooldownTimer) {\n    try {\n      const secondsLeft = await cooldownTimer.getAttribute(\"timer\");\n      console.log(`[\uD83D\uDE95] Retrying in ${formatTime(secondsLeft)} minutes.`);\n      setTimeout(() => carBringupMode(carId), +secondsLeft * 1000);\n      return;\n    } catch (e) {\n      console.log(\"[\uD83D\uDE95] Cooldown timer not found.\");\n    }\n  }\n\n  await carBringup(carId);\n\n  await delay(3);\n\n  // Get new cooldown after triggering carBringup\n  const newCooldownTimer = await getElementsOnThePage(\"#cooldown\", `/arbat/`);\n  const newSecondsLeft = await newCooldownTimer.getAttribute(\"timer\");\n\n  console.log(\n    `[\uD83D\uDE95] \u2705 Done. Retrying in ${formatTime(newSecondsLeft)} minutes.`\n  );\n  setTimeout(() => carBringupMode(carId), +newSecondsLeft * 1000);\n}\n\nexport async function fillCarTank(carId = \"1095154\") {\n  await fetch(\n    `${new URL(window.location.href).origin}/automobile/buypetrol/${carId}/`,\n    {\n      headers: {\n        accept: \"*/*\",\n        \"accept-language\": \"en-GB,en;q=0.9\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"macOS\"',\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: `${new URL(window.location.href).origin}/automobile/buypetrol/${carId}/`,\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: `__ajax=1&return_url=%2Fautomobile%2Fcar%2F${carId}`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n}\n\nexport async function fuelAllCars() {\n  try {\n    const carsLinks = await getElementsOnThePage(\n      \"#home-garage > div > div > a\",\n      \"/home/\"\n    );\n\n    const carsIds = carsLinks.map(\n      (el) => el.getAttribute(\"href\").split(\"/\").splice(-2, 1)[0]\n    );\n\n    await Promise.all(carsIds.map((id) => fillCarTank(id)));\n  } catch (e) {\n    console.log(\"Could not fuel all cars\");\n  }\n}\n\nexport function getGarageRides() {\n  return [...document.querySelectorAll(\"li\")]\n    .filter((el) => el.getAttribute(\"id\") && !el.querySelector(\"span.timeout\"))\n    .map((li) => {\n      let carId = +li\n        .querySelector('.actions input[name=\"car\"]')\n        .getAttribute(\"value\");\n      let rideId = +li\n        .querySelector('.actions input[name=\"direction\"]')\n        .getAttribute(\"value\");\n      return { carId, rideId };\n    });\n}\n\nexport async function sendRide(carId, rideId) {\n  await checkCarTank(carId);\n\n  let res = await fetch(\n    new URL(window.location.href).origin + \"/automobile/ride/\",\n    {\n      body: new URLSearchParams({\n        direction: rideId,\n        car: carId,\n        __ajax: \"1\",\n      }),\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  let data = await res.text();\n  let resDoc = parseHtml(data);\n  let resAlert = resDoc.querySelector(\"body > .alert\");\n\n  resAlert.style.display = \"block\";\n  resAlert.style.position = \"static\"; // Remove absolute centering\n  resAlert.style.margin = \"5px\"; // Add some spacing\n  resAlert.querySelector(\".close-cross\").remove();\n\n  let alertsContainer = $(\"#ride-alerts\");\n  if (alertsContainer.length < 1) {\n    alertsContainer = createPopover(\"ride-alerts\");\n  }\n\n  alertsContainer.css({\n    \"align-items\": \"flex-start\",\n    overflowY: \"scroll\",\n    maxHeight: \"65vh\",\n    width: \"90vw\",\n  });\n\n  alertsContainer.append(resAlert);\n}\n\nexport async function sendPlanesAndBoats() {\n  const garageRides = getGarageRides();\n\n  // { title, carId, rideId }\n  let planesAndBoatsRides = garageRides.filter(\n    (ride) =>\n      PLANES_AND_BOATS_RIDES_IDS.includes(ride.rideId) &&\n      !EXCEPTION_PLANES_AND_BOATS_RIDES_IDS.includes(ride.rideId)\n  );\n\n  if (!planesAndBoatsRides || planesAndBoatsRides.length === 0) {\n    sendAlert({\n      title: \"\u041E\u0448\u0438\u0431\u043A\u0430!\",\n      img: \"/@/images/loc/auto/trip34.jpg\",\n      text: `\u041D\u0435 \u043D\u0430\u0448\u043B\u043E\u0441\u044C \u0412\u0412 \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438.`,\n    });\n    return;\n  }\n\n  for (const ride of planesAndBoatsRides) {\n    await sendRide(ride.carId, ride.rideId);\n  }\n  sendAlert({\n    title: \"\u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    img: \"/@/images/loc/auto/trip22.jpg\",\n    text: `\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u0412\u0412: ${planesAndBoatsRides.length} \u2708\uFE0F\uD83D\uDEA2.`,\n  });\n}\n\nexport async function sendCars(rideIds = []) {\n  const garageRides = getGarageRides();\n\n  let cars = garageRides.filter(\n    ({ rideId, carId }) =>\n      !PLANES_AND_BOATS_RIDES_IDS.includes(rideId) &&\n      !EXCEPTION_CARS.includes(carId) &&\n      !BANNED_CARS_RIDES_IDS.includes(carId) &&\n      (rideIds.length === 0 || rideIds.includes(rideId))\n  );\n\n  if (!cars || cars.length === 0) {\n    sendAlert({\n      title: \"\u041E\u0448\u0438\u0431\u043A\u0430!\",\n      img: \"/@/images/loc/auto/trip34.jpg\",\n      text: `\u041D\u0435 \u043D\u0430\u0448\u043B\u043E\u0441\u044C \u0442\u0430\u0447\u0435\u043A \u0434\u043B\u044F \u043E\u0442\u043F\u0440\u0430\u0432\u043A\u0438.`,\n    });\n    return;\n  }\n\n  for (const car of cars) {\n    await sendRide(car.carId, car.rideId);\n  }\n  sendAlert({\n    title: \"\u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    img: \"/@/images/loc/auto/trip22.jpg\",\n    text: `\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u0442\u0430\u0447\u0435\u043A: ${cars.length} \uD83D\uDE99.`,\n  });\n}\n\nexport async function checkCarTank(carId = \"979786\") {\n  let carTankSpan = await getElementsOnThePage(\n    \".fuel .neft\",\n    `/automobile/car/${carId}/`\n  );\n\n  try {\n    const fuelLeft = +carTankSpan.innerText.split(\":\")[1].split(\"/\")[0];\n\n    if (fuelLeft === 0) {\n      console.log(\"[Check Car Tank] Car tank is empty!\");\n      await fillCarTank(carId);\n    }\n  } catch (e) {\n    console.log(\"[Check Car Tank] Car tank not found\");\n  }\n}\n\nexport function sortGarage() {\n  if ($(\"#send-cars-controls\").length > 0) return;\n\n  const sendPlanesAndBoatsBtn = createButton({\n    text: \"\uD83D\uDEA2 \u2708\uFE0F \u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u0432\u0432\",\n    onClick: sendPlanesAndBoats,\n  });\n\n  const sendCarsPresetsBtns = PRESETS.map((preset) => {\n    const btn = createButton({\n      text: preset.name,\n      onClick: async () => {\n        if (confirm(`\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C ${preset.name}?`)) {\n          await sendCars(preset.rides);\n        }\n      },\n      disableAfterClick: false,\n    });\n\n    return btn;\n  });\n\n  let $items = $(\"#content > div > div.cars-trip-choose.clearfix > div ul li\");\n\n  // fill tank before sending car\n  $items.each(function () {\n    const id = $(this).data(\"direction-id\");\n    if (id) {\n      const span = $(\"<span>\").text(id).css({\n        position: \"absolute\",\n        color: \"whitesmoke\",\n        right: \"3%\",\n        zIndex: 10,\n        background: \"black\",\n        borderRadius: \"4px\",\n        padding: \"2px\",\n      });\n\n      $(this).prepend(span);\n    }\n\n    const $btn = $(this).find(\".ride-button\");\n    $btn.on(\"click\", async function (e) {\n      e.preventDefault();\n      const carId = $(this).closest(\"li\").find(\"input.car-id\").val();\n      await fillCarTank(carId);\n      $(this).closest(\"form\").submit();\n    });\n  });\n\n  function sortAndReattach($items) {\n    let { exceptionCars, planesAndBoats, rest, bannedCars } =\n      categorizeCars($items);\n\n    const allCars = [...exceptionCars, ...rest, ...bannedCars];\n\n    let sortedItems = [\n      ...exceptionCars,\n      ...planesAndBoats,\n      ...sortCarsByCooldown(rest.reverse()),\n      ...bannedCars,\n    ];\n\n    const cooldownBoatsCount = planesAndBoats.filter(\n      (el) => getCarCooldown($(el)) > 0\n    ).length;\n\n    const cooldownCarsCount = allCars.filter((el) => {\n      const [chinuk, buksir] = [64, 198];\n      const rideId = +$(el).attr(\"data-direction-id\");\n      if (rideId === chinuk || rideId === buksir) {\n        return false;\n      }\n\n      return getCarCooldown($(el)) > 0;\n    }).length;\n\n    const carsCountDiv = $(`\n      <div id=\"cars-count\">\n        <span>\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u0432\u0432: <b>${cooldownBoatsCount} /  ${planesAndBoats.length}</b> \u2708\uFE0F \uD83D\uDEA2</span>\n        <span>\u041E\u0442\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u043E \u0442\u0430\u0447\u0435\u043A: <b>${cooldownCarsCount} / ${allCars.length}</b> \uD83D\uDE99</span>\n      </div>\n    `).css({\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"flex-start\",\n      alignItems: \"center\",\n      gap: \"8px\",\n    });\n\n    const buttonsGrid = $(\"<div></div>\")\n      .css({\n        display: \"grid\",\n        gridTemplateColumns: \"1fr 1fr\",\n        gap: \"8px\",\n        justifyContent: \"center\",\n        width: \"50%\",\n      })\n      .append(sendPlanesAndBoatsBtn)\n      .append(sendCarsPresetsBtns);\n\n    const carsControlDiv = $(\"<div id='send-cars-controls'>\")\n      .css({\n        display: \"flex\",\n        gap: \"8px\",\n        justifyContent: \"space-evenly\",\n      })\n      .append(buttonsGrid)\n      .append(carsCountDiv);\n\n    $(\"#content > div > div.block-bordered\").html(carsControlDiv);\n\n    let $parent = $(\"#content > div > div.cars-trip-choose.clearfix > div ul\");\n    $(sortedItems).appendTo($parent);\n  }\n\n  function redrawCards($items) {\n    $items.each((_, el) => {\n      $(el).find(\"table.title\").remove();\n      $(el).find(\"table.ride-info\").remove();\n      $(el).css({ minHeight: \"auto\", height: \"auto\" });\n      $(el)\n        .find(\".picture .timeout\")\n        .each((_, el) => {\n          $(el).css({ height: \"auto\" });\n          $(el).contents().not(\"span.ride-cooldown\").remove();\n        });\n      if ($(el).find(\".car .timeout\").length) {\n        $(el).css(\"opacity\", 0.7);\n      }\n    });\n  }\n\n  sortAndReattach($items);\n  redrawCards($items);\n\n  // Append the sorted items back to the parent without overwriting\n  let garageContainer = $(\n    \"#content > div > div.cars-trip-choose.clearfix > div ul\"\n  );\n\n  // STYLE GARAGE\n  // add shadow to car cards\n  $items.css(\"box-shadow\", \"0px 1px 9px 2px rgba(24, 22, 38, 0.5)\");\n\n  garageContainer.css({\n    display: \"grid\",\n    \"grid-template-columns\": \"repeat(auto-fit, minmax(200px, 1fr))\",\n    gap: \"10px\",\n  });\n\n  $(\".cars-trip-choose.clearfix\").css({\n    position: \"relative\",\n    left: \"35%\",\n    transform: \"translateX(-50%)\",\n    width: \"80vw\",\n    margin: \"auto\",\n    \"z-index\": 101,\n  });\n\n  $(\".cars-trip-accordion\").css({\n    background: \"rgba(255, 255, 255, 0.2)\",\n    \"backdrop-filter\": \"blur(10px)\",\n    \"-webkit-backdrop-filter\": \"blur(10px)\",\n    \"border-radius\": \"10px\",\n    border: \"1px solid rgba(255, 255, 255, 0.3)\",\n    padding: \"20px\",\n    width: \"100%\",\n    \"box-shadow\": \"0 4px 10px rgba(0, 0, 0, 0.1)\",\n  });\n}\n\nfunction getCarCooldown($el) {\n  let timer = $el.find(\".car .car-cooldown\").attr(\"timer\");\n  return timer ? parseInt(timer, 10) : -1; // -1 if missing\n}\n\nfunction sortCarsByCooldown($items) {\n  if (!Array.isArray($items)) $items = $items.toArray();\n  return $items.sort((a, b) => getCarCooldown($(b)) - getCarCooldown($(a)));\n}\n\nfunction categorizeCars($items) {\n  let exceptionCars = [];\n  let planesAndBoats = [];\n  let rest = [];\n  let bannedCars = [];\n\n  $items.each((_, el) => {\n    let $el = $(el);\n    let directionId = +$el.attr(\"data-direction-id\");\n\n    if (EXCEPTION_CARS.includes(directionId)) {\n      // $el.css(\"background\", \"#b9dfc7\"); // EXCEPTION_CARS\n      exceptionCars.push(el);\n    } else if (PLANES_AND_BOATS_RIDES_IDS.includes(directionId)) {\n      $el.css(\"background\", \"#aad7f8\"); // PLANES_AND_BOATS\n      planesAndBoats.push(el);\n    } else if (BANNED_CARS_RIDES_IDS.includes(directionId)) {\n      $el.css(\"background\", \"#b9060e\"); // BANNED CARS\n      bannedCars.push(el);\n    } else {\n      // $el.css(\"background\", \"#f8d7aa\"); // REST\n      rest.push(el);\n    }\n\n    // Sort by predefined order\n    function getSortIndex(directionId, list) {\n      let index = list.indexOf(directionId);\n      return index === -1 ? Infinity : index; // If not found, place it at the end\n    }\n\n    exceptionCars.sort((a, b) => {\n      let idA = +$(a).attr(\"data-direction-id\");\n      let idB = +$(b).attr(\"data-direction-id\");\n      return (\n        getSortIndex(idA, EXCEPTION_CARS) - getSortIndex(idB, EXCEPTION_CARS)\n      );\n    });\n\n    planesAndBoats.sort((a, b) => {\n      let idA = +$(a).attr(\"data-direction-id\");\n      let idB = +$(b).attr(\"data-direction-id\");\n      return (\n        getSortIndex(idA, PLANES_AND_BOATS_RIDES_IDS) -\n        getSortIndex(idB, PLANES_AND_BOATS_RIDES_IDS)\n      );\n    });\n\n    return [...exceptionCars, ...planesAndBoats, ...rest];\n  });\n\n  return { exceptionCars, planesAndBoats, rest, bannedCars };\n}\n", "import { getElementsOnThePage } from \"./utils\";\n\nexport async function addToContacts(playerName, contactType = \"victim\") {\n  await fetch(new URL(window.location.href).origin + \"/phone/contacts/add/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/phone/contacts/add/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `name=+${playerName}&clan=&info=&type=${contactType}&__ajax=1&return_url=%2Fphone%2Fcontacts%2Fadd%2F7178077%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function removeFromContacts(playerName, playerId) {\n  console.log(`\uD83D\uDD25 Removing ${playerName} from contacts.`);\n  await fetch(new URL(window.location.href).origin + \"/phone/contacts/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/phone/contacts/victims/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=delete&id=${playerId}&nickname=+${playerName}&type=contact&__referrer=%2Fphone%2Fcontacts%2Fvictims%2F&return_url=%2Fphone%2Fcontacts%2Fvictims%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function sendMessage(recipientName, message) {\n  try {\n    let postkey = (\n      await getElementsOnThePage(\n        'input[name=\"post_key\"]',\n        new URL(window.location.href).origin + \"/phone/\"\n      )\n    ).value;\n\n    await fetch(\n      new URL(window.location.href).origin + \"/phone/messages/send/\",\n      {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en;q=0.9\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n          \"sec-ch-ua-mobile\": \"?0\",\n          \"sec-ch-ua-platform\": '\"macOS\"',\n          \"sec-fetch-dest\": \"empty\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer:\n          new URL(window.location.href).origin + \"/phone/messages/send/\",\n        referrerPolicy: \"strict-origin-when-cross-origin\",\n        body: `maxTextSize=10000&post_key=${postkey}&name=${recipientName}&text=${message}&__ajax=1&return_url=%2Fphone%2F`,\n        method: \"POST\",\n        mode: \"cors\",\n        credentials: \"include\",\n      }\n    );\n    showAlert(\"Phone \u2705\", `Message sent to ${recipientName}`);\n  } catch (e) {\n    showAlert(`Phone \u274C`, \"Could not send message\");\n    console.log(\"Could not send message\");\n  }\n}\n\nexport async function clearEnemies() {\n  await fetch(\"https://www.moswar.ru/phone/clear-contacts/enemies/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"137\", \"Not/A)Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: \"https://www.moswar.ru/phone/clear-contacts/enemies/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"__ajax=1&return_url=%2Fphone%2Fcontacts%2Fenemies%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n", "/* global $ */\n\nimport { addToContacts, clearEnemies } from \"./phone\";\nimport { sendAlert } from \"./ui\";\nimport { formatNumber, getElementsOnThePage } from \"./utils\";\n\nasync function renderCoolnessByPlayer() {\n  const players = $(\"#players .user\").toArray();\n\n  for (const player of players) {\n    const $player = $(player);\n    const playerId = $player\n      .find('a[href*=\"/player/\"]')\n      .attr(\"href\")\n      ?.split(\"/\")[2];\n    if (!playerId) continue;\n\n    const coolness = await getElementsOnThePage(\n      \"#pers-player-info .cool-1\",\n      `/player/${playerId}/`\n    );\n\n    if (!coolness || !coolness[0]) continue;\n\n    const originalCoolness = $(coolness[0]).clone();\n    const numberSpan = originalCoolness.find(\"span.cool-1\");\n    const number = parseInt(numberSpan.text().replace(/\\D/g, \"\"), 10);\n\n    if (isNaN(number)) continue; // Skip if parsing failed\n\n    const formatted = formatNumber(number);\n    numberSpan.attr(\"title\", number);\n    numberSpan.text(formatted);\n    $player.append(originalCoolness);\n  }\n}\n\nexport async function sortClanPlayersByCoolness() {\n  await renderCoolnessByPlayer();\n  const users = [];\n\n  $(\"#players .user\").each(function () {\n    const coolnessValue = parseInt(\n      $(this).find(\"span.cool-1\").last().attr(\"title\"),\n      10\n    );\n\n    if (!isNaN(coolnessValue)) {\n      // Ensure coolness is valid\n      users.push({ element: $(this), coolness: coolnessValue });\n    }\n  });\n\n  users.sort((a, b) => b.coolness - a.coolness);\n\n  const $players = $(\"#players\").empty();\n  users.forEach((user) => $players.append(user.element, \"<br>\"));\n}\n\nexport async function addClanToEnemies() {\n  await clearEnemies();\n  const playerNames = $('#players .user a[href^=\"/player/\"]')\n    .map((_, el) => $(el).text().trim())\n    .get();\n\n  for (const name of playerNames) {\n    await addToContacts(name, \"enemy\");\n  }\n  sendAlert({\n    title: \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    img: \"/@/images/pers/man102_thumb.png\",\n    text: `\u0414\u043E\u0431\u0430\u0432\u0438\u043B \u0432\u0441\u0435\u0445 \u0438\u0433\u0440\u043E\u043A\u043E\u0432 \u0432 \u043A\u043E\u043D\u0442\u0430\u043A\u0442\u044B (\u0432\u0440\u0430\u0433\u0438).`,\n  });\n}\n\nexport async function payEmerald(count) {\n  if (!count) {\n    console.log(\"\uD83D\uDC8E No count provided for emerald payment.\");\n    return;\n  }\n\n  await fetch(new URL(window.location.href).origin + \"/clanbeast/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"137\", \"Not/A)Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: \"https://www.moswar.ru/clanbeast/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=pay_emerald&amount=${count}&ajax=1&__referrer=%2Fclanbeast%2F&return_url=%2Fclanbeast%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n", "/* global $, showAlert, showConfirm */\n\nexport let OPTIONS = {\n  // \u0435\u0441\u043B\u0438 \u0432\u044B \u0433\u043E\u0442\u043E\u0432\u044B \u043F\u043E\u0436\u0435\u0440\u0442\u0432\u043E\u0432\u0430\u0442\u044C 2% \u0441\u043B\u0430\u0432\u044B, \u0442\u043E \u0437\u0430\u0434\u0430\u0439\u0442\u0435 \u0437\u043D\u0430\u0447\u0435\u043D\u0438\u0435 0.02:\n  // \u0435\u0441\u043B\u0438 \u0442\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0438\u0439 \u043C\u0430\u043A\u0441 1000, \u0442\u043E -2% \u0437\u043D\u0430\u0447\u0438\u0442 \u0447\u0442\u043E \u0432\u044B \u0433\u043E\u0442\u043E\u0432\u044B \u0430\u0442\u0430\u043A\u043E\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430\n  // \u0443 \u043A\u043E\u0442\u043E\u0440\u043E\u0433\u0430 \u0442\u0435\u043E\u0440\u0435\u0442\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u043C\u0430\u043A\u0441 \u0441\u043B\u0430\u0432\u0430 980 ... 1000\n  gloryLossCoefficient: 0.02,\n\n  // \u0441\u043F\u0438\u0441\u043E\u043A \u0446\u0435\u043B\u0435\u0439 \u0434\u043B\u044F \"\u041F\u043E\u0438\u0441\u043A\u0430 \u0421\u0438\u043B\u044C\u043D\u044B\u0445\"\n  targets: [\n    \"\u041C\u043E\u0421\u043A\u0412\u0438\u0427\u043A\u0410\",\n    \"\u041A\u043E\u0434\u0438 \u0411\u0430\u043A\u0441\u0442\u0435\u0440\",\n    \"error 404\",\n    \"KREATOR_007\",\n    \"_\u0422\u0430\u0442\u0430\u0440\u0438\u043D_\",\n    \"\u0420\u0435\u0430\u043A\u0442\u0438\u0432\u043D\u044B\u0439\",\n    \"Kitsune\",\n    \"\u0424\u0435\u0434\u043E\u0440 \u041C\u0430\u0440\u043C\u0435\u043B\u0430\u0434\u043E\u0432\u0438\u0447\",\n    \"\u0427\u0443\u0434\u043E \u042E\u0434\u043E\",\n    \"Sid_Ss\",\n    \"\u041A\u0432\u0430\u0437\u0438\u043C\u043E\u0434\u044B\u0447\",\n    \"\u0447\u0435\u0448\u0438\u043D\u043E\u0433\u0430\",\n  ],\n};\n\nexport const ABILITIES = {\n  roar: -310,\n  topot: -311,\n  krovotok: -313,\n  secondSelf: 363,\n  vampirism: 540,\n  invincible: 541,\n  mass: 543,\n};\n\n// handlers\nasync function speedRun() {\n  if (AngryAjax.getCurrentUrl() !== \"/travel2/\") {\n    console.log(\"[PVP] Not on Travel2 page. Navigating there...\");\n    AngryAjax.goToUrl(\"/travel2/\");\n  }\n\n  const currentCountryIndex = getCurrentCountryIndex();\n  const maxCountryIndex = getMaxCountryIndex();\n\n  if (currentCountryIndex == maxCountryIndex) {\n    showAlert(\n      \"\u0412\u044B \u0443\u0436\u0435 \u043D\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u043C \u0443\u0440\u043E\u0432\u043D\u0435!\",\n      \"\u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u0432 \u0434\u0440\u0443\u0433\u0443\u044E \u0441\u0442\u0440\u0430\u043D\u0443 \u0447\u0442\u043E\u0431\u044B \u043D\u0430\u0447\u0430\u0442\u044C \u0441\u043F\u0438\u0434\u0440\u0430\u043D. <br>\"\n    );\n    return;\n  }\n\n  console.log(\"[PVP] Speedrun started.\");\n  restoreHP();\n\n  await pvpStartFight();\n  $(document).one(\"ajaxStop\", () => setTimeout(handlePvpFight, 1000));\n  $(document).one(\"endOfTurn\", () => setTimeout(speedRun, 3000));\n}\n\n// async function handleSpeedrun() {\n//   if (!AngryAjax.getCurrentUrl().includes(\"fight\")) {\n//     console.log(\"NOT IN FIGHT\");\n//     return;\n//   }\n\n//   // $(document).off(\"ajaxStop\", handleSpeedrun);\n//   console.log(\"[PVP] Speedrun started.\");\n//   await handlePvpFight();\n// }\n\nasync function farmStrongHelpers() {\n  if (!AngryAjax.getCurrentUrl() !== \"/travel2/\") {\n    AngryAjax.goToUrl(\"/travel2/\");\n  }\n\n  await rollTargetOpponent();\n}\n\nasync function handleFarmStrongHelpers() {\n  $(document).one(\"ajaxStop\", handlePvpFight); // Attach handler to trigger only once\n  Worldtour2.startFight();\n  await delay(2);\n  // if (!AngryAjax.getCurrentUrl().includes(\"fight\")) {\n  //   console.log(\"NOT IN FIGHT\");\n  //   return;\n  // }\n  // await handlePvpFight();\n}\n\nasync function handleFarmStars() {\n  if (!AngryAjax.getCurrentUrl().includes(\"fight\")) {\n    console.log(\"NOT IN FIGHT\");\n    return;\n  }\n\n  $(document).off(\"ajaxStop\", handleFarmStars);\n  console.log(\"[PVP] Farming stars.\");\n  await handlePvpFight();\n  // await goToTravel();\n  // await delay(5);\n  // await farmStars();\n}\n\nexport async function handlePvpFight(infinite = false) {\n  if (!AngryAjax.getCurrentUrl().includes(\"fight\")) return;\n  if (!$(\".block-rounded\").children().first().hasClass(\"current\")) {\n    showAlert(\"\u041E\u0448\u0438\u0431\u043A\u0430\", \"\u041F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043D\u0430 \u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0438\u0439 \u0445\u043E\u0434!\");\n    return;\n  }\n\n  if (\n    $(\n      \"#fightGroupForm > table > tbody > tr > td.log > ul > li:nth-child(1) > div.result\"\n    ).length > 0\n  ) {\n    showAlert(\"\u041E\u0448\u0438\u0431\u043A\u0430\", \"\u0411\u043E\u0439 \u0443\u0436\u0435 \u0437\u0430\u043A\u043E\u043D\u0447\u0435\u043D.\");\n    return;\n  }\n\n  console.log(\"[PVP] Handle group fight.\");\n  await useAbility(ABILITIES.roar);\n  await useAbility(ABILITIES.secondSelf);\n  await useAbility(ABILITIES.krovotok);\n  await useAbility(ABILITIES.vampirism);\n  await useAbility(ABILITIES.topot);\n  await useAbility(ABILITIES.mass);\n  await useAbility(ABILITIES.invincible);\n  await makeTurn(10);\n  console.log(\"[PVP] Group fight handler finished execution.\");\n  $(document).one(\"ajaxStop\", () => {\n    console.log(\"Finished fight\");\n    if (infinite) {\n      $(document).one(\n        \"ajaxStop\",\n        setTimeout(() => Worldtour2.startFight(), 1000)\n      );\n    }\n  });\n}\n\n// utilities\nasync function makeTurn(turns = 10) {\n  if (!AngryAjax.getCurrentUrl().includes(\"fight\")) return;\n\n  for (let i = 0; i < turns; i++) {\n    const isFightOver = document.querySelector(\"#fight-actions > div.waiting\");\n    console.log(isFightOver);\n    if (isFightOver) {\n      checkLastFightLost();\n      return;\n    }\n    console.log(\"Making turn...\");\n    groupFightMakeStep();\n    AngryAjax.reload();\n    await delay(0.5);\n  }\n}\n\nfunction checkLastFightLost() {\n  const fightLost =\n    document\n      .querySelector(\"#fightGroupForm > h3 > div.group1\")\n      .innerText.split(\" \")[1]\n      .slice(1, -1)\n      .split(\"/\")[0] === \"0\";\n\n  lostLastFight = fightLost;\n  return fightLost;\n}\n\nasync function rollTargetOpponent() {\n  if (!OPTIONS.targets || OPTIONS.targets.length === 0) {\n    showAlert(\"\u041E\u0448\u0438\u0431\u043A\u0430!\", \"\u0423\u043A\u0430\u0436\u0438\u0442\u0435 \u0441\u043F\u0438\u0441\u043E\u043A \u0446\u0435\u043B\u0435\u0439 \u0434\u043B\u044F \u043F\u043E\u0438\u0441\u043A\u0430 \u0441\u0438\u043B\u044C\u043D\u044B\u0445.\");\n    return;\n  }\n  let { name, maxPoints, victoryPoints } = getOpponent();\n  try {\n    for (let i = 0; i <= 10; i++) {\n      if (!name) {\n        throw new Error(\"Nickname not found\");\n      }\n      console.log(\"[\uD83D\uDCC1pvp.js:175] \", name, maxPoints, victoryPoints);\n\n      if (OPTIONS.targets.includes(name)) {\n        showConfirm(\n          `<b>${name}</b> <br> \u0417\u0430 \u043F\u043E\u0431\u0435\u0434\u0443 \u0432\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0435 <b>${victoryPoints}</b> / <b>${maxPoints}</b> \u043E\u0447\u043A\u043E\u0432! (${maxPoints - victoryPoints})`,\n          [\n            {\n              title: \"\u041D\u0430\u043F\u0430\u0441\u0442\u044C!\",\n              callback: handleFarmStrongHelpers,\n            },\n            {\n              title: \"\u041E\u0442\u043C\u0435\u043D\u0430\",\n              callback: function (obj) {\n                closeAlert(obj);\n              },\n            },\n          ],\n          { __title: \"\u041F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A \u043D\u0430\u0439\u0434\u0435\u043D!\" }\n        );\n        return;\n      }\n\n      showAlert(\n        `\u041F\u043E\u0438\u0441\u043A \u0434\u043E\u0441\u0442\u043E\u0439\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430`,\n        `\u041F\u043E\u043F\u044B\u0442\u043A\u0430 ${i + 1}: <b>${name}</b>.<br>\u0418\u0449\u0435\u043C \u0434\u0430\u043B\u044C\u0448\u0435...`\n      );\n      let opponent = await rollPvp(i === 0); // First reroll for boss\n      name = opponent.name;\n      maxPoints = opponent.maxPoints;\n      victoryPoints = opponent.victoryPoints;\n    }\n    showConfirm(\n      \"\u041D\u0438\u043A\u043E\u0433\u043E \u0438\u0437 \u0441\u043F\u0438\u0441\u043A\u0430 \u043D\u0435 \u043D\u0430\u0448\u0435\u043B. \u0414\u0430\u043B\u044C\u043D\u0435\u0439\u0448\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F?\",\n      [\n        {\n          title: \"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u043F\u043E\u0438\u0441\u043A!\",\n          callback: rollTargetOpponent,\n        },\n        {\n          title: \"\u041E\u0442\u043C\u0435\u043D\u0430\",\n          callback: function (obj) {\n            closeAlert(obj);\n          },\n        },\n      ],\n      { __title: \"\u0411\u0435\u0437 \u0443\u0441\u043F\u0435\u0445\u0430... :(\" }\n    );\n  } catch (e) {\n    console.log(\"Could not search for opponent:\\n\", e);\n  }\n}\n\nasync function rollByMaxPoints() {\n  if (AngryAjax.getCurrentUrl() !== \"/travel2/\") {\n    AngryAjax.goToUrl(\"/travel2/\");\n  }\n\n  try {\n    const maxPoints = document.querySelector(\n      \"#content > div.worldtour-stats > div > p:nth-child(3) > span:nth-child(4)\"\n    ).innerText;\n    let opponent = getOpponent();\n    let lossThreshold = maxPoints * OPTIONS.gloryLossCoefficient;\n\n    for (let i = 0; i <= 10; i++) {\n      console.log(\"[\uD83D\uDCC1pvp.js:251] opponent:\", opponent);\n      const victoryLoss = maxPoints - opponent.victoryPoints;\n      if (victoryLoss < lossThreshold) {\n        // FOUND!\n        showConfirm(\n          `<b>${opponent.name}</b> <br> \u0417\u0430 \u043F\u043E\u0431\u0435\u0434\u0443 \u0432\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u0435 <b>${opponent.victoryPoints}</b> / <b>${maxPoints}</b> \u043E\u0447\u043A\u043E\u0432! (${maxPoints - opponent.victoryPoints})`,\n          [\n            {\n              title: \"\u041D\u0430\u043F\u0430\u0441\u0442\u044C!\",\n              callback: handleFarmStrongHelpers,\n            },\n            {\n              title: \"\u041E\u0442\u043C\u0435\u043D\u0430\",\n              callback: function (obj) {\n                closeAlert(obj);\n              },\n            },\n          ],\n          { __title: \"\u041F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A \u043D\u0430\u0439\u0434\u0435\u043D!\" }\n        );\n        return;\n      }\n\n      // keep searching\n      showAlert(\n        `\u041F\u043E\u0438\u0441\u043A \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 \u0441 \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C \u0441\u043B\u0430\u0432\u043E\u0439`,\n        `\u041F\u043E\u043F\u044B\u0442\u043A\u0430 ${i + 1}: <b>${opponent.name}</b> (<b>${opponent.victoryPoints}</b>).<br>\u0418\u0449\u0435\u043C \u0434\u0430\u043B\u044C\u0448\u0435 \u0432 \u0434\u0438\u0430\u043F\u0430\u0437\u043E\u043D\u0435 (<span class=\"dpoints\"><i></i> ${Math.floor(maxPoints - lossThreshold)} ... ${maxPoints}</span>)`\n      );\n      opponent = await rollPvp(i === 0); // First reroll for boss\n    }\n\n    // NOT FOUND after 10 retries... next steps?!\n    showConfirm(\n      \"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 \u0441 \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C \u0441\u043B\u0430\u0432\u044B. \u0414\u0430\u043B\u044C\u043D\u0435\u0439\u0448\u0438\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u044F?\",\n      [\n        {\n          title: \"\u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u044C \u043F\u043E\u0438\u0441\u043A!\",\n          callback: rollTargetOpponent,\n        },\n        {\n          title: \"\u041E\u0442\u043C\u0435\u043D\u0430\",\n          callback: function (obj) {\n            closeAlert(obj);\n          },\n        },\n      ],\n      { __title: \"\u0411\u0435\u0437 \u0443\u0441\u043F\u0435\u0445\u0430... :(\" }\n    );\n  } catch (e) {\n    console.log(\"Could not search for opponent:\\n\", e);\n  }\n}\n\nfunction getOpponent() {\n  try {\n    let name = document.querySelector(\".worldtour__enemy-nickname\").innerText;\n    let rewards = getPointsReward(document);\n\n    return {\n      name,\n      ...rewards,\n    };\n  } catch (error) {\n    showAlert(\"Could not get opponent name.\");\n    return;\n  }\n}\n\nasync function rollPvp(top = false) {\n  if (pvpTickets.boss < 50) {\n    showAlert(\n      \"\u0411\u0438\u043B\u0435\u0442\u044B \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u044E\u0442\u0441\u044F!\",\n      `\u0423 \u0432\u0430\u0441 \u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C <span class=\"shuffle2\">${pvpTickets.boss}<i></i></span> \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u0434\u043B\u044F \u041F\u043E\u0438\u0441\u043A\u0430 \u0422\u043E\u043F 20. <br> \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435, \u0438\u043B\u0438 \u0441\u043D\u0438\u043C\u0438\u0442\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0435.`\n    );\n    throw new Error(\"Not enough boss tickets!\");\n  }\n  if (pvpTickets.normal < 100) {\n    showAlert(\n      \"\u0411\u0438\u043B\u0435\u0442\u044B \u0437\u0430\u043A\u0430\u043D\u0447\u0438\u0432\u0430\u044E\u0442\u0441\u044F!\",\n      `\u0423 \u0432\u0430\u0441 \u043E\u0441\u0442\u0430\u043B\u043E\u0441\u044C <span class=\"shuffle\">${pvpTickets.boss}<i></i></span> \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u0434\u043B\u044F \u0441\u043C\u0435\u043D\u044B \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430. <br> \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435, \u0438\u043B\u0438 \u0441\u043D\u0438\u043C\u0438\u0442\u0435 \u043E\u0433\u0440\u0430\u043D\u0438\u0447\u0435\u043D\u0438\u0435.`\n    );\n    throw new Error(\"Not enough normal tickets!\");\n  }\n  try {\n    let res = await fetch(new URL(window.location.href).origin + \"/travel2/\", {\n      headers: {\n        accept:\n          \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\",\n        \"accept-language\": \"en-US,en;q=0.9,ru;q=0.8\",\n        \"cache-control\": \"max-age=0\",\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        \"upgrade-insecure-requests\": \"1\",\n      },\n      referrer: new URL(window.location.href).origin + \"/travel2/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: `action=roll${top ? \"2\" : \"\"}&ajax=1&__referrer=%2Ftravel2%2F&return_url=%2Ftravel2%2F`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    });\n\n    let resHtmlStr = await res.text();\n    let resHtml = parseHtml(resHtmlStr);\n    let name = resHtml.querySelector(\".worldtour__enemy-nickname\").innerText;\n    let pointsReward = getPointsReward(resHtml);\n\n    if (top) {\n      pvpTickets.boss--;\n    } else {\n      pvpTickets.normal--;\n    }\n\n    return { name, ...pointsReward };\n  } catch (e) {\n    console.log(\"Could not reroll PvP.\");\n    return false;\n  }\n}\nexport async function useAbility(abilityId) {\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n    },\n    body: `action=useabl&json=1&target=${abilityId}`,\n    method: \"POST\",\n    credentials: \"include\",\n  });\n}\n\nasync function useItem(itemId) {\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n    },\n    body: `action=useabl&json=1&target=${abilityId}`,\n    method: \"POST\",\n    credentials: \"include\",\n  });\n}\n\n// helpers\nasync function delay(seconds = 1) {\n  return new Promise((resolve) => setTimeout(resolve, seconds * 1000));\n}\n\nasync function getPvpTicketsCount() {\n  try {\n    const normal = (\n      await getElementsOnThePage(\n        `.object-thumb img[src=\"/@/images/obj/travel/shuffle.png\"] + .count`,\n        new URL(window.location.href).origin + \"/player/\"\n      )\n    ).innerText.slice(1);\n\n    const boss = (\n      await getElementsOnThePage(\n        `.object-thumb img[src=\"/@/images/obj/travel/shuffle2.png\"] + .count`,\n        new URL(window.location.href).origin + \"/player/\"\n      )\n    ).innerText.slice(1);\n\n    return { normal, boss };\n  } catch (e) {\n    console.log(\"Could not get PvP tickets count.\");\n  }\n}\n\nasync function aGetPointsReward() {\n  try {\n    let maxPoints = +(\n      await getElementsOnThePage(\n        \"#content > div.worldtour-stats > div > p:nth-child(3) > span:nth-child(4)\",\n        new URL(window.location.href).origin + \"/travel2\"\n      )\n    ).innerText.split(\" \")[0];\n\n    let victoryPoints = +(\n      await getElementsOnThePage(\n        \"#content > div.worldtour-stats > div > p:nth-child(3) > span:nth-child(1)\",\n        new URL(window.location.href).origin + \"/travel2\"\n      )\n    ).innerText.split(\" \")[0];\n    return { maxPoints, victoryPoints };\n  } catch (error) {\n    console.log(\"[\uD83C\uDF0E]Could not get PvP points rewards.\");\n  }\n}\n\nfunction getPointsReward(doc = window.document) {\n  try {\n    let maxPoints = +doc\n      .querySelector(\n        \"#content > div.worldtour-stats > div > p:nth-child(3) > span:nth-child(4)\"\n      )\n      .innerText.split(\" \")[0];\n\n    let victoryPoints = +doc\n      .querySelector(\n        \"#content > div.worldtour-stats > div > p:nth-child(3) > span:nth-child(1)\"\n      )\n      .innerText.split(\" \")[0];\n    return { maxPoints, victoryPoints };\n  } catch (error) {\n    console.log(\"[\uD83C\uDF0E]Could not get PvP points rewards.\");\n  }\n}\n\nasync function checkPointsDiff(lossCoefficient = 0.02) {\n  const { maxPoints, victoryPoints } = await aGetPointsReward();\n  let threshold = maxPoints * lossCoefficient;\n  let diff = maxPoints - victoryPoints;\n  if (diff < threshold) {\n    return { maxPoints, victoryPoints };\n  }\n\n  return false;\n}\n\nasync function aGetCurrentCountryIndex() {\n  try {\n    let country = await getElementsOnThePage(\n      \"#content > div.worldtour-stats > div > h3\",\n      new URL(window.location.href).origin + \"/travel2/\"\n    );\n    let index = country.innerText.match(/\\d+/)[0];\n\n    return +index;\n  } catch (e) {\n    console.log(\"Could not get current country index.\");\n  }\n}\n\nfunction getCurrentCountryIndex() {\n  try {\n    let countryIndex = +document\n      .querySelector(\"#content > div.worldtour-stats > div > h3\")\n      .innerText.match(/\\d+/)[0];\n\n    return countryIndex;\n  } catch (e) {\n    console.log(\"Could not get current country index.\");\n  }\n}\n\nfunction getHelpersIds() {\n  let helpers = [...document.querySelectorAll(\".worldtour-helper\")];\n\n  return helpers\n    .map((helper) => {\n      const onclickString = helper\n        .querySelector(\"div.worldtour-helper__stats > div > span > button\")\n        .getAttribute(\"onclick\");\n      if (!onclickString) return;\n      return onclickString.match(\n        /Worldtour2\\.mfHelper\\((\\d+)\\s*,\\s*(\\d+)\\)/\n      )[1];\n    })\n    .filter(Boolean);\n}\n\nasync function modifyHelper(helperId) {\n  await fetch(new URL(window.location.href).origin + \"/travel2/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/travel2/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=helper_mf&helper_id=${helperId}&ajax=1&__referrer=%2Ftravel2%2F&return_url=%2Ftravel2%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nasync function maxOutHelpers(count = 5) {\n  if (AngryAjax.getCurrentUrl() !== \"/travel2/\") {\n    AngryAjax.goToUrl(\"/travel2/\");\n  }\n\n  const helpers = getHelpersIds();\n\n  const promises = Array.from({ length: 20 }).flatMap(() =>\n    helpers.slice(0, count).map(async (id) => {\n      if (id) {\n        await modifyHelper(id);\n      }\n    })\n  );\n\n  await Promise.all(promises);\n  AngryAjax.goToUrl(\"/travel2/\");\n\n  showAlert(\n    \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    `\u041F\u043E\u043C\u043E\u0448\u043D\u0438\u043A\u0438 (${count}) \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u043B\u0443\u0447\u0448\u0435\u043D\u044B! <br>`\n  );\n}\n\nasync function goToLevel(level) {\n  try {\n    await fetch(new URL(window.location.href).origin + \"/travel2/\", {\n      headers: {\n        accept: \"*/*\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8,ru;q=0.7,ro;q=0.6\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/travel2/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: `action=get_level&getLevel=${level}&ajax=1&__referrer=%2Ftravel2%2F&return_url=%2Ftravel2%2F`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    });\n\n    return AngryAjax.goToUrl(\"/travel2/\");\n  } catch (e) {\n    console.log(\"Could not go to level.\");\n  }\n}\n\nasync function goNextLevel() {\n  const currentIndex = await aGetCurrentCountryIndex();\n  if (currentIndex >= 28) {\n    console.log(\"Highest level reached.\");\n    return;\n  }\n  await goToLevel(currentIndex + 1);\n}\n\nasync function goPreviousLevel() {\n  const currentIndex = await aGetCurrentCountryIndex();\n  if (currentIndex <= 1) {\n    console.log(\"Lowest level reached.\");\n    return;\n  }\n  await goToLevel(currentIndex - 1);\n}\n\nfunction getMaxCountryIndex() {\n  try {\n    return [...document.querySelector(\"#travel-2-country\")]\n      .pop()\n      .innerText.split(\".\")[0];\n  } catch (error) {\n    console.log(\"Could not get max level. Error:\", error);\n  }\n}\n\nfunction canAttack() {\n  const attackBtn = document.querySelector(\".worldtour__button-big\");\n\n  return !attackBtn.classList.contains(\"disabled\");\n}\n\nasync function pvpStartFight() {\n  console.log(\"[PVP] START FIGHT...\");\n  await fetch(new URL(window.location.href).origin + \"/travel2/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/travel2/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=fight\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n  AngryAjax.reload();\n}\n\n//\n//\n//\n// utilities (TEMPORARY)\n//\n//\n\nasync function getElementsOnThePage(selector, url) {\n  const response = await fetch(url);\n  const data = await response.text();\n\n  const doc = parseHtml(data);\n  const elements = doc.querySelectorAll(selector);\n\n  if (elements.length === 0) return undefined;\n\n  return elements.length === 1 ? elements[0] : Array.from(elements);\n}\n\nfunction parseHtml(htmlString) {\n  const parser = new DOMParser();\n\n  const cleanedHtmlString = htmlString\n    .replace(/\\\\&quot;/g, '\"') // Handle escaped quotes if they exist\n    .replace(/\\\\\"/g, '\"'); // Normalize double-escaped quotes\n\n  const doc = parser.parseFromString(cleanedHtmlString, \"text/html\");\n\n  return doc;\n}\n\nfunction strToHtml(htmlString) {\n  const tempDiv = document.createElement(\"div\");\n  tempDiv.innerHTML = htmlString.trim();\n  return tempDiv.firstChild;\n}\n\nasync function farmStars() {\n  if (AngryAjax.getCurrentUrl() !== \"/travel2/\") {\n    console.log(\"[PVP] Not on Travel2 page. Navigating there...\");\n    AngryAjax.goToUrl(\"/travel2/\");\n  }\n\n  let prevCountry = getCurrentCountryIndex();\n\n  console.log(`[PVP] \u2B50\uFE0F Farming stars in ${prevCountry}.`);\n  restoreHP();\n\n  await pvpStartFight();\n  $(document).one(\"ajaxStop\", () => setTimeout(handlePvpFight, 1000));\n  $(document).one(\"endOfTurn\", () => setTimeout(farmStars, 1000));\n  // $(document).one(\"endOfTurn\", farmStars);\n}\n\nasync function onEndOfTurn() {\n  // restoreHP();\n\n  AngryAjax.goToUrl(\"/travel2/\");\n  $(document).one(\"ajaxStop\", () =>\n    setTimeout(() => $(document).trigger(\"endOfTurn\"), 1000)\n  );\n}\n\n// modify the default to redirect to travel2 after fight is over\nfunction groupFightAjaxCheck() {\n  // eslint-disable-next-line no-undef\n  noAjaxLoader = true;\n  $.post(\"/fight/\", { checkBattleState: 1 }, function (data) {\n    // eslint-disable-next-line no-undef\n    noAjaxLoader = false;\n    if (data == 1) {\n      //if ($.cookie(\"userid\") == 4158644) {\n      AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n      setTimeout(onEndOfTurn, 1000);\n\n      //} else {\n      //\tdocument.location.href = AngryAjax.getCurrentUrl().replace(/#/, \"\");\n      //}\n    } else {\n      $(\"#waitdots\").html(\n        Array((($(\"#waitdots\").text().length + 1) % 4) + 1).join(\".\")\n      );\n      window.AngryAjax.setTimeout(groupFightAjaxCheck, 1000);\n    }\n  });\n}\n\nfunction restoreHP() {\n  $.post(\n    \"/player/checkhp/\",\n    {\n      action: \"restorehp\",\n    },\n    function (data) {}\n  );\n}\n\nasync function customRoll(top = false) {\n  let res = await fetch(new URL(window.location.href).origin + \"/travel2/\", {\n    headers: {\n      accept:\n        \"text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7\",\n      \"accept-language\": \"en-US,en;q=0.9,ru;q=0.8\",\n      \"cache-control\": \"max-age=0\",\n      \"content-type\": \"application/x-www-form-urlencoded\",\n      \"upgrade-insecure-requests\": \"1\",\n    },\n    referrer: new URL(window.location.href).origin + \"/travel2/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=roll${top ? \"2\" : \"\"}&ajax=1&__referrer=%2Ftravel2%2F&return_url=%2Ftravel2%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  let resHtmlStr = await res.text();\n  let resHtml = parseHtml(resHtmlStr);\n\n  let newStats = $(resHtml).find(\".worldtour-stats\");\n  let newOpponentStats = $(resHtml).find(\n    \".worldtour__team.worldtour__team--right\"\n  );\n  let footerReward = $(resHtml).find(\".worldtour__footer-reward\");\n  // if there are rewards, append them\n  if (footerReward.length) {\n    $(\".worldtour__footer-reward\").first().replaceWith(footerReward);\n  }\n\n  // replace glory points stats\n  $(\".worldtour-stats\").replaceWith(newStats);\n  // replace worldtour container\n  $(\".worldtour__team.worldtour__team--right\").replaceWith(newOpponentStats);\n  // add tooltip to opponent stats\n  console.log(newOpponentStats.children().first());\n  simple_tooltip(newOpponentStats.children().first());\n\n  replaceRollBtnHandlers();\n}\n\nfunction renderPvpTotals() {\n  if ($(\"#pvp-totals\").length) return;\n  const totals = { current: 0, max: 0 };\n\n  $(\"#travel-2-country option\").each(function () {\n    const match = $(this)\n      .text()\n      .match(/(\\d+)\\/(\\d+)/);\n    if (match) {\n      totals.current += Number(match[1]);\n      totals.max += Number(match[2]);\n    }\n  });\n\n  const $totalsElement = $(\n    `<span id=\"pvp-totals\" style=\"font-size:140%\" class=\"dpoints\">\n    <br>${totals.current} / ${totals.max}<i></i>\n    </span>`\n  );\n  $(\".worldtour-stats__content\")\n    .css({ background: \"#00034a\" })\n    .append($totalsElement);\n\n  $(\"span.dpoints\").css({\n    \"text-shadow\": \"1px 1px 1px #00000073\",\n  });\n}\n\nasync function handleSkipFight() {\n  $(document).one(\"ajaxStop\", handlePvpFight);\n  await pvpStartFight();\n}\n\nfunction handleInfiniteFight() {\n  $(document).one(\"ajaxStop\", () => handlePvpFight(true));\n  Worldtour2.startFight();\n}\n\nfunction replaceRollBtnHandlers() {\n  $(\n    \"#content > div.worldtour.worldtour--2.worldtour--atlantida > div.worldtour__footer > div.worldtour__footer-actions-2 button\"\n  ).each((index, btn) => {\n    const $btn = $(btn);\n    $btn\n      .off(\"click\")\n      .removeAttr(\"onclick\")\n      .on(\"click\", async () => {\n        await customRoll(index === 1);\n        renderPvpTotals();\n      });\n  });\n\n  $(\".worldtour__button-border-blue .worldtour__button-small\").on(\n    \"click\",\n    helpersUI\n  );\n}\n\nfunction helpersUI() {\n  const $parent = $(\".worldtour-helpers-inner\");\n  $parent.html($parent.children().slice(0, 10));\n  $parent.css({\n    width: \"auto\",\n    \"margin-left\": \"0%\",\n    display: \"flex\",\n    \"flex-direction\": \"column\",\n    height: \"100%\",\n  });\n\n  // Worldtour2.paginateHelpersPageAnimation(1);\n  $(\".worldtour__pagination\").remove();\n}\n\nfunction highlightFullCountries() {\n  $(\"#travel-2-country option\").each(function () {\n    let text = $(this).text();\n    const match = text.match(/(\\d+)\\/(\\d+)/);\n    if (!match) return;\n\n    const current = parseInt(match[1], 10);\n    const total = parseInt(match[2], 10);\n\n    text = text.replace(/[\u2714?]/, current === total ? \"\u2705\" : \"\u23F3\");\n    $(this).text(text);\n  });\n}\n\nexport function initPvpUI() {\n  if ($(\"#skip-fight-btn\").length) return;\n  replaceRollBtnHandlers();\n  helpersUI();\n  renderPvpTotals();\n  highlightFullCountries();\n\n  // fix rating misalignment\n  $(\".worldtour-rating-place\").css({ position: \"absolute\" });\n\n  // move \u0433\u0435\u043E\u043C\u0435\u0442\u043A\u0438 banner to the bottom\n  $(\".worldtour-banner\").appendTo($(\".worldtour-banner\").parent());\n\n  if ($(\".auto-pvp\").length > 0) {\n    console.log(\"[PVP] Panel already initialized.\");\n    return;\n  }\n\n  let findStrongBtn = strToHtml(\n    `<div class=\"button auto-pvp\" id=\"travel-classic-button\" class=\"auto-pvp\"><a class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span class=\"cool-1\"><i></i>\u041F\u043E\u0438\u0441\u043A \u0421\u0438\u043B\u044C\u043D\u044B\u0445</span></div></a></div>`\n  );\n\n  findStrongBtn.addEventListener(\"click\", farmStrongHelpers);\n\n  let farmStarsBtn = strToHtml(\n    `<div class=\"button\" id=\"travel-classic-button\"><a class=\"f\"\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span class=\"star\"><i></i> \u0424\u0430\u0440\u043C\u0438\u0442\u044C \u0417\u0432\u0435\u0437\u0434\u044B </span></div></a></div>`\n  );\n\n  farmStarsBtn.addEventListener(\"click\", farmStars);\n\n  let speedrunBtn = strToHtml(\n    `<div class=\"button\" id=\"travel-classic-button\"><a class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span>\uD83C\uDFCE\uFE0F \u0421\u043F\u0438\u0434\u0440\u0430\u043D</span></div></a></div>`\n  );\n\n  speedrunBtn.addEventListener(\"click\", speedRun);\n\n  let maxOutBtn = strToHtml(\n    `<div class=\"button\" id=\"travel-classic-button\"><a class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span class=\"dpoints\"><i></i> \u041C\u0430\u043A\u0441\u0438\u043C\u0443\u043C \u0421\u043B\u0430\u0432\u044B</span></div></a></div>`\n  );\n\n  maxOutBtn.addEventListener(\"click\", async () => await rollByMaxPoints());\n\n  // DO NOT REMOVE\n  let skipFightBtn = $(\n    `<div class=\"button auto-pvp\" id=\"skip-fight-btn\" class=\"auto-pvp\"><a class=\"f\" ><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span>\u23E9 \u0421\u043A\u0438\u043F \u0431\u043E\u044F</span></div></a></div>`\n  );\n\n  let infiniteFightBtn = $(\n    `<div class=\"disabled button auto-pvp\" id=\"skip-fight-btn\" class=\"auto-pvp\"><a class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\"><span>\u221E \u0411\u0435\u0441\u043A\u043E\u043D\u0435\u0447\u043D\u044B\u0439 \u0431\u043E\u0439</span></div></a></div>`\n  );\n\n  skipFightBtn.on(\"click\", handleSkipFight);\n\n  infiniteFightBtn.on(\"click\", handleInfiniteFight);\n\n  // $(\"#travel-pvp-button\").after(findStrongBtn);\n  $(\"#travel-classic-button\").after(infiniteFightBtn);\n  $(\"#travel-pvp-button\").after(skipFightBtn);\n  // $(\"#travel-pvp-button\").after(speedrunBtn);\n  // $(\"#travel-classic-button\").after(farmStarsBtn);\n}\n\n// initPvpUI();\n// $(document).on(\"ajaxStop\", initPvpUI);\n\n// if (lostLastFight) {\n//   console.log(\"[PVP] Fight lost. Go to previous country.\");\n//   await goToLevel(prevCountry);\n// } else {\n//   console.log(\"[PVP] Fight won. Go to next country.\");\n//   await goToLevel(prevCountry + 1);\n//   prevCountry++;\n// }\n", "import { handlePvpFight } from \"./pvp\";\n\n/* global showAlert AngryAjax $ */\nvar _dung = {}; //\u043F\u043E\u0434\u0432\u0430\u043B \u043E\u0434\u0438\u043D\u043E\u0447\u043D\u044B\u0439\n_dung.newstart = true;\n_dung.appzone = 1;\n_dung.nextzone = 0;\n_dung.ss = {\n  1: {\n    zona: 3,\n    goboss: 2,\n    goper: [2, 0, 2],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  2: {\n    zona: 3,\n    goboss: 13,\n    goper: [3, 0, 13],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  3: {\n    zona: 2,\n    goboss: 4,\n    goper: [4, 0, 2],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  4: {\n    zona: 2,\n    goboss: 5,\n    goper: [5, 0, 3],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  5: {\n    zona: 2,\n    goboss: 6,\n    goper: [6, 0, 4],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  6: {\n    zona: 2,\n    goboss: 7,\n    goper: [7, 0, 5],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 30,\n  },\n  7: {\n    zona: 2,\n    goboss: 8,\n    goper: [8, 0, 6],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 99,\n  },\n  8: {\n    zona: 2,\n    goboss: 9,\n    goper: [11, 0, 7],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 99,\n  },\n  9: {\n    zona: 2,\n    goboss: 10,\n    goper: [8, 0, 8],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 99,\n  },\n  10: {\n    zona: 2,\n    goboss: 0,\n    goper: [9, 0, 9],\n    flapt: 0,\n    flboss: \"boss\",\n    fluseapt: 99,\n  },\n  11: {\n    zona: 1,\n    goboss: 12,\n    goper: [0, 0, 8],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 30,\n  },\n  12: {\n    zona: 1,\n    goboss: 0,\n    goper: [0, 0, 11],\n    flapt: 0,\n    flboss: \"box\",\n    fluseapt: 0,\n  },\n  13: {\n    zona: 3,\n    goboss: 14,\n    goper: [2, 0, 14],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  14: {\n    zona: 3,\n    goboss: 15,\n    goper: [13, 0, 16],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  15: {\n    zona: 3,\n    goboss: 17,\n    goper: [14, 0, 14],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  16: {\n    zona: 4,\n    goboss: 23,\n    goper: [14, 0, 23],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  17: {\n    zona: 3,\n    goboss: 21,\n    goper: [15, 0, 15],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  18: {\n    zona: 4,\n    goboss: 0,\n    goper: [23, 0, 23],\n    flapt: 0,\n    flboss: \"box\",\n    fluseapt: 70,\n  },\n  19: {\n    zona: 5,\n    goboss: 20,\n    goper: [23, 0, 0],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  20: {\n    zona: 5,\n    goboss: 0,\n    goper: [19, 0, 0],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 20,\n  },\n  21: {\n    zona: 3,\n    goboss: 22,\n    goper: [17, 0, 17],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 0,\n  },\n  22: {\n    zona: 3,\n    goboss: 0,\n    goper: [21, 0, 21],\n    flapt: 0,\n    flboss: \"boss\",\n    fluseapt: 99,\n  },\n  23: {\n    zona: 4,\n    goboss: 18,\n    goper: [16, 0, 19],\n    flapt: 0,\n    flboss: \"\",\n    fluseapt: 70,\n  },\n};\n_dung.zona = {\n  1: { boss: 12 },\n  2: { boss: 10 },\n  3: { boss: 22 },\n  4: { boss: 18 },\n  5: { boss: 20 },\n};\n_dung.obj = {\n  12: true,\n  10: true,\n  22: true,\n  18: true,\n};\n_dung.apt = {};\n_dung.empty = function () {\n  //\u043F\u0440\u0438\u0437\u043D\u0430\u043A, \u0447\u0442\u043E \u0432\u0441\u0435 \u0430\u0433\u0435\u043D\u0442\u044B \u043F\u0440\u043E\u0439\u0434\u0435\u043D\u044B\n  for (var m in _dung.dungObj.rooms) {\n    if (!_dung.dungObj.rooms[m].passed && _dung.ss[m].zona != 5) {\n      return false;\n    }\n  }\n  return true;\n};\n_dung.theend = function () {\n  //\u043D\u0430\u0434\u043F\u0438\u0441\u0438, \u0447\u0442\u043E \u0432\u0441\u0435 \u043F\u0440\u043E\u0439\u0434\u0435\u043D\u043E, \u0432\u044B\u0445\u043E\u0434\n  AngryAjax.reload();\n  showAlert(\"\u0412\u0441\u0435 \u043F\u0440\u043E\u0439\u0434\u0435\u043D\u043E\", \"\u041C\u043E\u0436\u0435\u0442\u0435 \u0432\u044B\u0439\u0442\u0438 \u0438\u0437 \u043F\u043E\u0434\u0437\u0435\u043C\u043A\u0438.\");\n};\n_dung.xod = function () {\n  var nextxod, m;\n  $.get(\n    \"/dungeon/inside/\",\n    function (data) {\n      response = data.content;\n      if (data && data.return_url && data.return_url == \"/dungeon/\") {\n        showAlert(\"\u041D\u0435 \u0441\u043F\u0443\u0441\u0442\u0438\u043B\u0438\u0441\u044C\", \"\u0421\u043F\u0443\u0441\u0442\u0438\u0442\u0435\u0441\u044C \u0432 \u043E\u0434\u0438\u043D\u043E\u0447\u043D\u0443\u044E \u043F\u043E\u0434\u0437\u0435\u043C\u043A\u0443 \u0441\u043F\u0435\u0440\u0432\u0430.\");\n        setTimeout(_dung.xod, 5000);\n        return;\n      }\n      if (data && data.return_url && data.return_url.search(\"/fight/\") != -1) {\n        $(document).one(\"ajaxStop\", handlePvpFight);\n        console.log(\"\u0413\u0440\u0443\u043F\u043F\u043E\u0432\u043E\u0439 \u0431\u043E\u0439 \");\n        setTimeout(_dung.xod, 5000);\n        return;\n      }\n      _dung.dungObj = $.parseJSON(\n        data.content.match(/var json = ({[\\s\\S]*});/m)[1]\n      );\n      console.log(_dung.dungObj);\n      var klet = Number(_dung.dungObj.room_players[player.id].position);\n      if (_dung.newstart) {\n        console.log(\"\u0438\u043D\u0438\u0446\u0438\u0430\u043B\u0438\u0437\u0430\u0446\u0438\u044F...\");\n        _dung.newstart = false;\n        for (m in _dung.obj) {\n          if (_dung.ss[m].flboss == \"boss\") {\n            if (\n              _dung.dungObj.objects[m] &&\n              _dung.dungObj.objects[m].length != 0\n            ) {\n              _dung.obj[m] = true;\n            } else {\n              _dung.obj[m] = false;\n            }\n          }\n        }\n      }\n      console.log(\"\u043A\u043B\u0435\u0442\u043A\u0430 \" + klet);\n      var zona = _dung.ss[klet].zona;\n      var boss = _dung.zona[zona].boss;\n      var apt = _dung.ss[klet].flapt;\n\n      if (_dung.ss[klet].flboss && _dung.obj[klet]) {\n        console.log(\"\u044E\u0437\u0430\u0435\u043C \u043E\u0431\u044A\u0435\u043A\u0442 \u0432 \" + klet);\n        postUrl(\n          \"/dungeon/useobject/\",\n          { action: \"useobject\", room: klet, object: 0 },\n          \"post\",\n          function (data) {\n            if (data.result) {\n              _dung.obj[klet] = false;\n            }\n            _dung.xod();\n          },\n          \"json\"\n        );\n        return;\n      }\n      if (_dung.empty()) {\n        _dung.theend();\n        return;\n      }\n      if (apt > 0 && _dung.apt[apt]) {\n        nextxod = apt;\n        console.log(\"\u0438\u0434\u0435\u043C \u0437\u0430 \u0430\u043F\u0442\u0435\u0447\u043A\u043E\u0439 \u043D\u0430 \" + nextxod);\n      } else {\n        if (\n          !_dung.dungObj.rooms[boss].passed ||\n          (_dung.ss[boss].flboss == \"boss\" &&\n            _dung.dungObj.objects[boss] &&\n            _dung.dungObj.objects[boss].length != 0)\n        ) {\n          if (\n            _dung.ss[boss].flboss == \"boss\" &&\n            _dung.dungObj.objects[boss] &&\n            _dung.dungObj.objects[boss].length != 0\n          ) {\n            _dung.obj[klet] = true;\n          }\n          nextxod = _dung.ss[klet].goboss;\n          console.log(\"\u0438\u0434\u0435\u043C \u0432 \u043D\u0430\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0438 \u0431\u043E\u0441\u0441\u0430 \u043D\u0430 \" + nextxod);\n        } else {\n          _dung.nextzone = zona + _dung.appzone;\n          if (_dung.nextzone > 5) {\n            _dung.appzone = -1;\n            _dung.nextzone = zona + _dung.appzone;\n          }\n          if (_dung.nextzone < 1) {\n            _dung.appzone = 1;\n            _dung.nextzone = zona + _dung.appzone;\n          }\n          nextxod = _dung.ss[klet].goper[_dung.appzone + 1];\n          console.log(\n            \"\u0438\u0434\u0435\u043C \u043A \u043F\u0435\u0440\u0435\u0445\u043E\u0434\u0443 \u0432 \u0437\u043E\u043D\u0443 \" + _dung.nextzone + \" \u043D\u0430 \" + nextxod\n          );\n        }\n      }\n      $.post(\n        \"/dungeon/gotoroom/\",\n        { referrer: \"/dungeon/inside/\", action: \"gotoroom\", room: nextxod },\n        function (data) {\n          AngryAjax.reload();\n          _dung.xod();\n        },\n        \"json\"\n      );\n    },\n    \"json\"\n  );\n};\n\nfunction startDungeon() {\n  _dung.xod();\n}\n\nexport default startDungeon;\n", "/* global $ AngryAjax showAlert player */\n\nimport { restoreHP } from \"./dopings\";\n\nconst ABILITIES = [\n  {\n    name: \"\u0420\u0430\u0437\u043E\u0433\u043D\u0430\u0442\u044C \u043D\u0435\u0434\u043E\u0432\u043E\u043B\u044C\u043D\u044B\u0445 [3]\",\n    id: \"59\",\n    title: \"OMON\",\n    description:\n      \"\u0412\u0441\u0435 \u043D\u0435\u0434\u043E\u0432\u043E\u043B\u044C\u0441\u0442\u0432\u0430 \u0432\u043B\u0430\u0441\u0442\u044C\u044E \u043B\u0435\u0433\u043A\u043E \u043F\u0440\u0435\u0441\u0435\u0447\u044C, \u043F\u0440\u0438\u0437\u0432\u0430\u0432 \u0432 \u0431\u043E\u0439 \u043D\u0430 \u0441\u0432\u043E\u0435\u0439 \u0441\u0442\u043E\u0440\u043E\u043D\u0435 <b>6</b> \u0431\u043E\u0439\u0446\u043E\u0432 \u041E\u041C\u041E\u041D\u0430.   \",\n  },\n  {\n    name: \"\u0427\u0435\u0440\u043D\u0430\u044F \u0434\u044B\u0440\u0430\",\n    id: \"269\",\n    title: \"blackHole\",\n    description:\n      \"\u0421\u043E\u0437\u0434\u0430\u0435\u0442 \u043D\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u043E\u0440\u043E\u043D\u0435 \u0432 \u0431\u043E\u044E \u0414\u044B\u0440\u0443, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u043F\u0435\u0440\u0435\u043C\u0430\u043D\u0438\u0432\u0430\u0435\u0442 \u043D\u0430 \u0432\u0430\u0448\u0443 \u0441\u0442\u043E\u0440\u043E\u043D\u0443 NPC \u0441\u043E\u043F\u0435\u0440\u043D\u0438\u043A\u0430!   \",\n  },\n  {\n    name: \"\u0422\u0443\u0448\u0438\u0442\u044C \u043F\u043E\u0436\u0430\u0440\",\n    id: \"282\",\n    title: \"extinguishFire\",\n    description:\n      \"\u0421\u043D\u0438\u043C\u0430\u0435\u0442 \u043E\u0442\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435 \u0441 \u0432\u043B\u0430\u0434\u0435\u043B\u044C\u0446\u0430 \u0438 3\u0445 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0445 \u0441\u043E\u044E\u0437\u043D\u0438\u043A\u043E\u0432, \u043E\u0431\u0440\u0430\u0437\u0443\u0435\u0442 \u043E\u0431\u043B\u0430\u043A\u043E \u043D\u0430 3 \u0445\u043E\u0434\u0430, \u043A\u043E\u0442\u043E\u0440\u043E\u0435 \u043F\u043E\u0433\u043B\u043E\u0449\u0430\u0435\u0442 \u0443\u0434\u0430\u0440\u044B!   \",\n  },\n  {\n    name: \"\u041A\u0430\u0442\u0443\u0448\u043A\u0430 \u0422\u0435\u0441\u043B\u0430\",\n    id: \"295\",\n    description:\n      \"\u041A\u0430\u0442\u0443\u0448\u043A\u0430 \u0422\u0435\u0441\u043B\u0430 \u2014 \u044D\u0442\u043E \u043D\u043E\u0432\u0430\u044F \u0441\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044C \u0434\u043B\u044F \u0433\u0440\u0443\u043F\u043F\u043E\u0432\u044B\u0445 \u0431\u043E\u0451\u0432, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u0441\u043E\u0432\u043C\u0435\u0449\u0430\u0435\u0442 \u0432 \u0441\u0435\u0431\u0435 \u0440\u0430\u0437\u0440\u0443\u0448\u0438\u0442\u0435\u043B\u044C\u043D\u0443\u044E \u043C\u043E\u0449\u044C \u0438 \u0437\u0430\u0449\u0438\u0442\u043D\u044B\u0435 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0430!   \",\n  },\n  {\n    name: \"\u0414\u0435\u0441\u0430\u043D\u0442\",\n    id: \"303\",\n    description:\n      \"\u041F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0432 \u0431\u043E\u0439 \u0434\u0435\u0441\u0430\u043D\u0442, \u043A\u043E\u0442\u043E\u0440\u044B\u0439 \u0443\u043D\u0438\u0447\u0442\u043E\u0436\u0438\u0442 \u0432\u0440\u0430\u0433\u0430 \u043C\u043E\u0449\u043D\u044B\u043C\u0438 \u0441\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044F\u043C\u0438   \",\n  },\n  {\n    name: \"\u041B\u0435\u0434\u044F\u043D\u043E\u0435 \u0434\u044B\u0445\u0430\u043D\u0438\u0435\",\n    id: \"325\",\n    description: \"\u041B\u0435\u0434\u044F\u043D\u043E\u0435 \u0434\u044B\u0445\u0430\u043D\u0438\u0435 \u0434\u0440\u0430\u043A\u043E\u043D\u0430!   \",\n  },\n  {\n    name: \"\u0421\u0445\u043E\u0434 \u043B\u0430\u0432\u0438\u043D\u044B\",\n    id: \"152\",\n    description: \"\u041F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A \u0442\u0435\u0440\u044F\u0435\u0442 \u0447\u0430\u0441\u0442\u044C \u0436\u0438\u0437\u043D\u0435\u0439 \u0438 \u043E\u0433\u043B\u0443\u0448\u0435\u043D \u043D\u0430 1 \u0445\u043E\u0434   \",\n  },\n  {\n    name: \"\u0421\u043A\u0438\u043D\u0443\u0442\u044C \u0434\u0432\u0430 \u0441\u043F\u0443\u0442\u043D\u0438\u043A\u0430\",\n    id: \"302\",\n    description:\n      \"\u041D\u0430\u043D\u043E\u0441\u0438\u0442 \u0443\u0440\u043E\u043D \u043F\u043E 4-\u043C \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u043C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430\u043C \u043D\u0430 30% \u043E\u0442 \u0442\u0435\u043A\u0443\u0449\u0438\u0445 \u0436\u0438\u0437\u043D\u0435\u0439!   \",\n  },\n  {\n    name: \"\u041C\u0435\u0434\u043E\u0432\u0430\u044F \u0437\u0430\u043D\u0430\u0447\u043A\u0430\",\n    id: \"54\",\n    description:\n      \"\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u043C\u0435\u0434\u043E\u0432\u0443\u044E \u0437\u0430\u043D\u0430\u0447\u043A\u0443, \u0432\u044B \u043D\u0435 \u0442\u043E\u043B\u044C\u043A\u043E \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0435 \u0432\u0430\u0448\u0438 \u0436\u0438\u0437\u043D\u0438 \u0434\u043E 30% \u043E\u0442 \u0432\u0430\u0448\u0435\u0433\u043E \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C\u0430 \u043A \u043A\u043E\u043D\u0446\u0443 \u0445\u043E\u0434\u0430, \u043D\u043E \u0438 \u043E\u0436\u0438\u0432\u0435\u0442\u0435, \u0435\u0441\u043B\u0438 \u0432\u0430\u0441 \u0432\u0434\u0440\u0443\u0433 \u0443\u0431\u044C\u044E\u0442 \u0432 \u043F\u0440\u043E\u0446\u0435\u0441\u0441\u0435.   \",\n  },\n  {\n    name: \"\u0423\u0434\u0430\u0440 \u0441 \u0432\u043E\u0437\u0434\u0443\u0445\u0430\",\n    id: \"353\",\n    description:\n      \"\u041C\u043E\u0449\u043D\u044B\u0435 \u0432\u0437\u0440\u044B\u0432\u044B \u043D\u0430\u043D\u043E\u0441\u044F\u0442 \u043E\u0433\u0440\u043E\u043C\u043D\u044B\u0439 \u0443\u0440\u043E\u043D \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0443, \u043D\u0435 \u043E\u0441\u0442\u0430\u0432\u043B\u044F\u044F \u0448\u0430\u043D\u0441\u043E\u0432 \u043D\u0430 \u043F\u043E\u0431\u0435\u0434\u0443!   \",\n  },\n  {\n    name: \"\u0412 \u043E\u0431\u043B\u0430\u043A\u0430 III\",\n    id: \"451\",\n    description:\n      \"\u0417\u0430\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u0442 \u043A\u043E\u043C\u0430\u043D\u0434\u0443 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 \u0443\u043B\u0435\u0442\u0435\u0442\u044C \u043D\u0430 \u043D\u0435\u0431\u043E. \u041D\u0430 \u0436\u043E\u043F\u043D\u043E\u0439 \u0442\u044F\u0433\u0435..   \",\n  },\n  {\n    name: \"\u0417\u0435\u0440\u043A\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u043B\u043E\u043D   \",\n    id: \"514\",\n    description: \"\",\n  },\n  {\n    name: \"\u041A\u043E\u0441\u043C\u043E\u0441\u043F\u0430\u0441 2.0\",\n    id: \"519\",\n    description:\n      \"\u0421 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0441\u0432\u043E\u0435\u0439 \u0440\u0430\u043A\u0435\u0442\u044B \u0432\u044B \u043C\u043E\u0436\u0435\u0442\u0435 \u0441\u043E\u0432\u0435\u0440\u0448\u0438\u0442\u044C \u0432\u0438\u0442\u043E\u043A \u0432\u043E\u043A\u0440\u0443\u0433 \u0417\u0435\u043C\u043B\u0438 \u0438 \u0432\u0435\u0440\u043D\u0443\u0442\u044C\u0441\u044F \u0432 \u0431\u043E\u0439 \u043F\u043E\u043B\u043D\u043E\u0441\u0442\u044C\u044E \u043E\u0431\u043D\u043E\u0432\u043B\u0451\u043D\u043D\u044B\u043C \u0441 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0439 \u044F\u0440\u043E\u0441\u0442\u044C\u044E!   \",\n  },\n  {\n    name: \"\u042D\u043B\u0435\u043A\u0442\u0440\u043E-\u0443\u0434\u0430\u0440 SUPER III\",\n    id: \"521\",\n    description:\n      \"\u041D\u0430\u043D\u043E\u0441\u0438\u0442 \u0443\u0440\u043E\u043D \u043F\u043E \u0446\u0435\u043F\u043E\u0447\u043A\u0435 \u0434\u043E 3-\u0445 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u043E\u0432 \u043D\u0430 65%, 40%, 15% \u0441 \u0448\u0430\u043D\u0441\u043E\u043C 100%, 100%, 75%, 50% \u0434\u043E \u0442\u0440\u0435\u0445 \u0440\u0430\u0437 \u0437\u0430 \u0431\u043E\u0439!   \",\n  },\n  {\n    name: \"\u0412\u043E\u0440\u043E\u043D\u043A\u0430\",\n    id: \"482\",\n    description:\n      \"\u0421\u043E\u0437\u0434\u0430\u0435\u0442 \u043D\u0430 \u0432\u0430\u0448\u0435\u0439 \u0441\u0442\u043E\u0440\u043E\u043D\u0435 \u0432 \u0431\u043E\u044E \u0412\u043E\u0440\u043E\u043D\u043A\u0443, \u043A\u043E\u0442\u043E\u0440\u0430\u044F \u043F\u0435\u0440\u0435\u043C\u0430\u043D\u0438\u0432\u0430\u0435\u0442 \u043D\u0430 \u0432\u0430\u0448\u0443 \u0441\u0442\u043E\u0440\u043E\u043D\u0443 NPC \u0441\u043E\u043F\u0435\u0440\u043D\u0438\u043A\u0430!   \",\n  },\n  {\n    name: \"\u0414\u0443\u0431\u0438\u043D\u043E\u0447\u043A\u0430\",\n    id: \"477\",\n    description: \"\u041D\u0430\u043D\u043E\u0441\u0438\u0442 \u0443\u0440\u043E\u043D \u0437\u0430 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u041E\u041C\u041E\u041D\u041E\u0412\u0446\u0430/\u0410\u0433\u0435\u043D\u0442\u0430/\u0418\u043D\u043E\u0430\u0433\u0435\u043D\u0442\u0438\u043A\u0430   \",\n  },\n  {\n    name: \"\u0420\u0430\u0437\u043E\u0433\u043D\u0430\u0442\u044C \u0442\u043E\u043B\u043F\u0443\",\n    id: \"389\",\n    description:\n      \"\u041F\u0440\u043E\u0433\u043E\u043D\u044F\u0435\u0442 \u0438\u0437 \u0431\u043E\u044F 3 \u0432\u0440\u0430\u0436\u0435\u0441\u043A\u0438\u0445 \u043C\u0438\u0433\u0440\u0430\u043D\u0442\u0430 \u0438\u043B\u0438 \u0448\u0442\u0443\u0440\u043C\u043E\u0432\u0438\u043A\u0430 \u0438 \u043D\u0430\u043D\u043E\u0441\u0438\u0442 \u0437\u0430 \u043A\u0430\u0436\u0434\u043E\u0433\u043E 5/7/10% \u0443\u0440\u043E\u043D\u0430 \u043F\u0440\u0438\u0437\u0432\u0430\u0432\u0448\u0435\u043C\u0443 \u0438\u0433\u0440\u043E\u043A\u0443!   \",\n  },\n  {\n    name: \"\u041F\u044B\u043B\u0430\u044E\u0449\u0438\u0439 \u0441\u043B\u0435\u0434 III   \",\n    id: \"523\",\n    description: \"\",\n  },\n  {\n    name: \"\u0413\u0435\u0439\u043C-\u043E\u0432\u0435\u0440\",\n    id: \"524\",\n    description:\n      \"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u041C15. \u0418\u0433\u0440\u0430 \u0432 \u041A\u0430\u043B\u044C\u043C\u0430\u0440\u0430 \u0436\u0435\u0441\u0442\u043E\u043A\u0430, \u0430 \u0436\u0438\u0437\u043D\u044C \u043D\u0435 \u0441\u0442\u043E\u0438\u0442 \u043D\u0438\u0447\u0435\u0433\u043E. \u0423\u0431\u0438\u0432\u0430\u0435\u0442 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 (\u043D\u0435 NPC).   \",\n  },\n  {\n    name: \"\u041A\u0430\u043C\u0435\u0448\u043A\u0438\",\n    id: \"525\",\n    description:\n      \"\u0414\u0435\u0442\u0441\u043A\u0430\u044F \u0438\u0433\u0440\u0430, \u0443 \u043A\u043E\u0433\u043E \u0431\u043E\u043B\u044C\u0448\u0435 \u2014 \u0442\u043E\u0442 \u0438 \u0441\u0438\u043B\u044C\u043D\u0435\u0435! \u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439 \u043A\u0430\u043C\u0435\u0448\u043A\u0438 \u0432\u043C\u0435\u0441\u0442\u043E \u043A\u0443\u043B\u0430\u043A\u043E\u0432. \u041A\u0430\u0436\u0434\u044B\u0439 \u043A\u0430\u043C\u0435\u0448\u0435\u043A \u043D\u0430\u043D\u043E\u0441\u0438\u0442 15% \u0443\u0440\u043E\u043D\u0430 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0443 \u0438 \u0441\u0436\u0438\u0433\u0430\u0435\u0442 15% \u044F\u0440\u043E\u0441\u0442\u0438. \u0414\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 \u043F\u0440\u0438\u0446\u0435\u043B\u044C\u043D\u043E.   \",\n  },\n  {\n    name: \"\u041C\u0430\u0441\u043A\u0430 \u0411\u043E\u0441\u0441\u0430\",\n    id: \"526\",\n    description:\n      \"\u041E\u0442\u043A\u0440\u044B\u0432\u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u041C10. \u0421\u0442\u0430\u043D\u044C \u0411\u043E\u0441\u0441\u043E\u043C \u0438\u0433\u0440\u044B \u0432 \u041A\u0430\u043B\u044C\u043C\u0430\u0440\u0430. \u041C\u0435\u043D\u044F\u0435\u0442 \u043E\u0431\u043B\u0438\u043A, \u0434\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u0442 \u0443\u0441\u0438\u043B\u0435\u043D\u043D\u0443\u044E \u043A\u0440\u0443\u0442\u043E\u0441\u0442\u044C, \u043D\u0430\u043D\u043E\u0441\u0438\u0442 \u0443\u0440\u043E\u043D \u0430\u043D\u043E\u043D\u0438\u043C\u043D\u044B\u043C \u0438\u0433\u0440\u043E\u043A\u0430\u043C, \u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0441\u044F \u0431\u043E\u0441\u0441\u043E\u043C \u043D\u0430 5 \u0445\u043E\u0434\u043E\u0432 (\u043D\u0430 \u0442\u0435\u0431\u044F \u043D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u044E\u0442 \u0431\u043E\u043B\u044C\u0448\u0438\u043D\u0441\u0442\u0432\u043E \u0441\u0438\u043B\u044C\u043D\u044B\u0445 \u0441\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u0435\u0439).   \",\n  },\n  {\n    name: \"\u041A\u0430\u043D\u0430\u0442\u044B\",\n    id: \"527\",\n    description:\n      \"\u0421\u0438\u043B\u0430 \u043A\u043E\u043C\u0430\u043D\u0434\u044B \u0432 \u0435\u0434\u0438\u043D\u0441\u0442\u0432\u0435. \u0415\u0441\u043B\u0438 \u0443 \u0442\u0435\u0431\u044F \u0435\u0441\u0442\u044C \u043A\u0430\u043D\u0430\u0442, \u043F\u0440\u0438\u043C\u0435\u043D\u0438 \u0435\u0433\u043E \u0432 \u043A\u043E\u043D\u0446\u0435 \u0445\u043E\u0434\u0430! \u0421\u0440\u0430\u0431\u0430\u0442\u044B\u0432\u0430\u0435\u0442 \u0442\u043E\u043B\u044C\u043A\u043E \u0443 \u0441\u0442\u043E\u0440\u043E\u043D\u044B \u0441 \u0431\u043E\u043B\u044C\u0448\u0438\u043C \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E\u043C \u043A\u0430\u043D\u0430\u0442\u043E\u0432. \u0423\u043C\u0435\u043D\u044C\u0448\u0430\u0435\u0442 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u043E\u0432: \u0434\u043E -40% \u043F\u043E 6 \u0438\u0433\u0440\u043E\u043A\u0430\u043C \u0432 \u0437\u0430\u0432\u0438\u0441\u0438\u043C\u043E\u0441\u0442\u0438 \u043E\u0442 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0430 \u043A\u0430\u043D\u0430\u0442\u043E\u0432.   \",\n  },\n  {\n    name: \"\u041F\u0435\u0447\u0435\u043D\u044C\u043A\u0430\",\n    id: \"528\",\n    description:\n      \"\u0412\u044B\u0440\u0435\u0436\u0438 \u0444\u0438\u0433\u0443\u0440\u043A\u0443, \u043D\u0435 \u0441\u043B\u043E\u043C\u0430\u0432 \u043F\u0435\u0447\u0435\u043D\u044C\u043A\u0443. \u0415\u0441\u043B\u0438 \u0435\u0441\u0442\u044C \u043A\u0438\u0442\u0430\u0439\u0441\u043A\u0430\u044F \u043F\u0435\u0447\u0435\u043D\u044C\u043A\u0430, \u043F\u043E\u0435\u0434\u0430\u043D\u0438\u0435 \u043B\u0435\u0447\u0438\u0442 50% \u0436\u0438\u0437\u043D\u0435\u0439 \u0438 \u043D\u0430\u043D\u043E\u0441\u0438\u0442 -30% \u0443\u0440\u043E\u043D\u0430 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u043C\u0443 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0443 (\u043D\u0435 NPC).   \",\n  },\n  {\n    name: \"\u041A\u0443\u043A\u043B\u0430\",\n    id: \"529\",\n    description:\n      \"\u041A\u0440\u0430\u0441\u043D\u044B\u0439 \u0441\u0432\u0435\u0442 \u2014 \u0441\u0442\u043E\u0439, \u0417\u0435\u043B\u0435\u043D\u044B\u0439 \u0441\u0432\u0435\u0442 \u2014 \u0438\u0434\u0438! \u041E\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442 \u0445\u043E\u0434\u044B \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430 \u043A\u0430\u0436\u0434\u044B\u0435 2 \u0445\u043E\u0434\u0430 \u043D\u0430 8 \u0445\u043E\u0434\u043E\u0432.   \",\n  },\n  {\n    name: \"\u041F\u0440\u0438\u0437\u0432\u0430\u0442\u044C \u041C\u044D\u0440\u0430\",\n    id: \"370\",\n    description: \"\u041F\u043E\u0437\u043E\u0432\u0438\u0442\u0435 \u041C\u044D\u0440\u0430 \u0432 \u0431\u043E\u0439, \u0447\u0442\u043E\u0431\u044B \u043E\u043D \u043F\u043E\u0432\u0435\u0440\u0433 \u0432\u0441\u0435\u0445 \u0432\u0440\u0430\u0433\u043E\u0432 \u0432 \u0448\u043E\u043A!   \",\n  },\n  {\n    name: \"\u042D\u043B\u0435\u043A\u0442\u0440\u043E-\u0432\u044B\u0445\u043B\u043E\u043F\",\n    id: \"490\",\n    description:\n      \"\u0411\u0443\u0434\u0443\u0442 \u043D\u0430\u043D\u043E\u0441\u0438\u0442\u044C \u0443\u0440\u043E\u043D \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u0438\u043C \u0432\u0430\u0448\u0438\u043C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430\u043C \u043D\u0435\u0441\u043A\u043E\u043B\u044C\u043A\u043E \u0445\u043E\u0434\u043E\u0432 \u043D\u0435\u0431\u043B\u043E\u043A\u0438\u0440\u0443\u0435\u043C\u044B\u0439 \u0443\u0440\u043E\u043D.   \",\n  },\n  {\n    name: \"\u0421\u0442\u0430\u0442\u044C \u0412\u0435\u043B\u0438\u043A\u0438\u043C   \",\n    id: \"435\",\n    description: \"\",\n  },\n  {\n    name: \"\u041A\u0430\u043B\u044C\u044F\u043D \u00AB\u0410\u0440\u0431\u0443\u0437\u043D\u044B\u0439\u00BB \u0423\u043B\u044C\u0442\u0440\u0430\",\n    id: \"33\",\n    description:\n      \"\u0410\u0440\u043E\u043C\u0430\u0442\u043D\u044B\u0439 \u043A\u0430\u043B\u044C\u044F\u043D \u043F\u043E\u043A\u0440\u044B\u0432\u0430\u0435\u0442 \u0437\u0430\u0449\u0438\u0442\u043D\u043E\u0439 \u0430\u0440\u0431\u0443\u0437\u043D\u043E\u0439 \u043A\u043E\u0440\u043A\u043E\u0439 \u0438 <b>\u0441\u043D\u0438\u0436\u0430\u0435\u0442 \u0443\u0440\u043E\u043D \u043E\u0442 \u0443\u0434\u0430\u0440\u043E\u0432</b> \u043F\u043E \u0432\u0430\u043C \u043D\u0430 40% \u043D\u0430 \u0431\u043B\u0438\u0436\u0430\u0439\u0448\u0438\u0435 5 \u0445\u043E\u0434\u043E\u0432.   \",\n  },\n  {\n    name: \"\u041A\u0430\u043B\u044C\u044F\u043D \u00AB\u041B\u0435\u0434\u044F\u043D\u043E\u0439\u00BB \u0423\u043B\u044C\u0442\u0440\u0430\",\n    id: \"32\",\n    description:\n      \"\u0417\u0430\u043C\u0435\u0447\u0430\u0442\u0435\u043B\u044C\u043D\u044B\u0439 \u043A\u0430\u043B\u044C\u044F\u043D, \u0432 \u043A\u043E\u0442\u043E\u0440\u043E\u043C \u0432 \u043A\u0430\u0447\u0435\u0441\u0442\u0432\u0435 \u0436\u0438\u0434\u043A\u043E\u0441\u0442\u0438 \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0432\u043E\u0434\u0430 \u0438\u0437 \u0440\u0430\u0441\u0442\u0430\u044F\u0432\u0448\u0438\u0445 \u0441\u043D\u0435\u0433\u043E\u0432\u0438\u043A\u043E\u0432, \u043F\u0440\u0438\u043E\u0431\u0440\u0435\u043B \u0443\u043D\u0438\u043A\u0430\u043B\u044C\u043D\u044B\u0435 \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u0430 \u2014 \u0432 \u0431\u043E\u044E \u043E\u043D \u043E\u043A\u0440\u0443\u0436\u0438\u0442 \u0432\u0430\u0441 \u043D\u0430\u0441\u0442\u043E\u044F\u0449\u0438\u043C\u0438 \u043B\u0435\u0434\u044F\u043D\u044B\u043C\u0438 \u0448\u0438\u043F\u0430\u043C\u0438, \u043E\u043F\u0430\u0441\u043D\u044B\u043C\u0438 \u0434\u043B\u044F \u0432\u0440\u0430\u0433\u0430! 40% \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u043D\u043E\u0433\u043E \u0443\u0440\u043E\u043D\u0430 \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044F \u0432\u0440\u0430\u0433\u0443 \u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435 5 \u0445\u043E\u0434\u043E\u0432.   \",\n  },\n  {\n    name: \"\u041A\u0430\u043B\u044C\u044F\u043D \u00AB\u0413\u0440\u0430\u043D\u0430\u0442\u043E\u0432\u044B\u0439\u00BB \u0423\u043B\u044C\u0442\u0440\u0430\",\n    id: \"34\",\n    description:\n      \"\u0417\u0430\u0434\u043E\u0440\u043D\u044B\u0439 \u0432\u043A\u0443\u0441 \u0433\u0440\u0430\u043D\u0430\u0442\u043E\u0432\u043E\u0433\u043E \u043A\u0430\u043B\u044C\u044F\u043D\u0430 \u0443\u0432\u0435\u043B\u0438\u0447\u0438\u0442 \u0443\u0440\u043E\u043D \u043E\u0442 \u0431\u0440\u043E\u0441\u0430\u0435\u043C\u044B\u0445 \u0432\u0430\u043C\u0438 \u0433\u0440\u0430\u043D\u0430\u0442 <b>\u043D\u0430 35% \u0432 \u0442\u0435\u0447\u0435\u043D\u0438\u0435 3 \u0445\u043E\u0434\u043E\u0432</b>.   \",\n  },\n  {\n    name: \"\u041C\u0435\u0434\u0432\u0435\u0436\u0438\u0439 \u0420\u044B\u043D\u043E\u043A\",\n    id: \"444\",\n    description:\n      \"\u0422\u0440\u0430\u0442\u0438\u0442 \u0432\u0441\u0435 \u0442\u0443\u0433\u0440\u0438\u043A\u0438 \u043D\u0430 \u0443\u0440\u043E\u043D, \u0440\u0430\u0432\u043D\u044B\u0439 \u0438\u0445 \u043A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u0443, \u043F\u043E \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u043C\u0443 \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0443   \",\n  },\n  {\n    name: \"\u0420\u0435\u043B\u0438\u043A\u0442 \u043F\u0438\u0442\u043E\u043C\u0446\u0430   \",\n    id: \"462\",\n    description: \"\",\n  },\n  {\n    name: \"\u0421\u0442\u0438\u0445\u0438\u044F: \u0412\u043E\u0434\u0430\",\n    id: \"480\",\n    description:\n      \"<b>\u041E\u0431\u044B\u0447\u043D\u0430\u044F</b>: \u0421\u043C\u044B\u0432\u0430\u0435\u0442 \u043D\u0435\u0433\u0430\u0442\u0438\u0432\u043D\u044B\u0435 \u044D\u0444\u0444\u0435\u043A\u0442\u044B \u0441 3 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0445 \u0441\u043E\u044E\u0437\u043D\u0438\u043A\u043E\u0432 (\u0438\u0433\u0440\u043E\u043A\u043E\u0432) (\u043E\u0442\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435, \u043A\u0440\u043E\u0432\u043E\u0442\u0435\u0447\u0435\u043D\u0438\u0435.. ) \u043A\u0430\u0436\u0434\u044B\u0435 2 \u0445\u043E\u0434\u0430 \u0434\u043E \u043A\u043E\u043D\u0446\u0430 \u0431\u043E\u044F. <br/><b>\u0423\u0441\u0438\u043B\u0435\u043D\u043D\u0430\u044F</b>: \u0421\u043C\u044B\u0432\u0430\u0435\u0442 \u043D\u0435\u0433\u0430\u0442\u0438\u0432\u043D\u044B\u0435 \u044D\u0444\u0444\u0435\u043A\u0442\u044B \u0441 4 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u0445 \u0441\u043E\u044E\u0437\u043D\u0438\u043A\u043E\u0432 (\u0438\u0433\u0440\u043E\u043A\u043E\u0432) (\u043E\u0442\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u0435, \u043A\u0440\u043E\u0432\u043E\u0442\u0435\u0447\u0435\u043D\u0438\u0435 ) \u043A\u0430\u0436\u0434\u044B\u0435 \u0445\u043E\u0434  \u0434\u043E \u043A\u043E\u043D\u0446\u0430 \u0431\u043E\u044F   \",\n  },\n  {\n    name: \"\u0421\u0442\u0438\u0445\u0438\u044F: \u041E\u0433\u043E\u043D\u044C\",\n    id: \"479\",\n    description:\n      \"<b>\u041E\u0431\u044B\u0447\u043D\u0430\u044F</b>: \u043D\u0430\u043D\u043E\u0441\u0438\u0442 \u0436\u0433\u0443\u0447\u0438\u0439 \u0443\u0440\u043E\u043D 3 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u043C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430\u043C \u0443\u0440\u043E\u043D -15% \u043E\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0445\u043F \u043A\u0430\u0436\u0434\u044B\u0439 \u0445\u043E\u0434 \u0434\u043E \u043A\u043E\u043D\u0446\u0430 \u0431\u043E\u044F. <br/><b>\u0423\u0441\u0438\u043B\u0435\u043D\u043D\u0430\u044F</b>: \u043D\u0430\u043D\u043E\u0441\u0438\u0442 \u0436\u0433\u0443\u0447\u0438\u0439 \u0443\u0440\u043E\u043D 5 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u044B\u043C \u043F\u0440\u043E\u0442\u0438\u0432\u043D\u0438\u043A\u0430\u043C \u0443\u0440\u043E\u043D -15% \u043E\u0442 \u0442\u0435\u043A\u0443\u0449\u0435\u0433\u043E \u0445\u043F \u0434\u043E \u043A\u043E\u043D\u0446\u0430 \u0431\u043E\u044F   \",\n  },\n  {\n    name: \"\u0421\u0442\u0438\u0445\u0438\u044F: \u0412\u043E\u0437\u0434\u0443\u0445\",\n    id: \"478\",\n    description:\n      \"\u041D\u0430\u0447\u043D\u0438\u0442\u0435 \u0434\u0435\u043B\u0430\u0442\u044C \u0441\u0435\u043B\u0444\u0438 \u0432 \u0431\u043E\u044E, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u0437\u0430\u0449\u0438\u0442\u0443 \u043E\u0442 \u0443\u0434\u0430\u0440\u043E\u0432 \u043A\u0443\u043B\u0430\u043A\u0430\u043C\u0438 \u0438 \u0433\u0440\u0430\u043D\u0430\u0442.   \",\n  },\n  {\n    name: \"\u0421\u0442\u0438\u0445\u0438\u044F: \u0417\u0435\u043C\u043B\u044F\",\n    id: \"481\",\n    description:\n      \"<b>\u041E\u0431\u044B\u0447\u043D\u0430\u044F</b>: \u0421\u043D\u0438\u0436\u0430\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0443\u044E \u044F\u0440\u043E\u0441\u0442\u044C \u0432 \u0431\u043E\u044E \u043D\u0430 15% \u043A\u0430\u0436\u0434\u044B\u0439 \u0445\u043E\u0434, \u043F\u043E\u043A\u0430 \u0448\u043A\u0430\u043B\u0430 \u043D\u0435 \u0434\u043E\u0439\u0434\u0435\u0442 \u0434\u043E 0 (\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E \u043F\u043E 3\u043C \u0438\u0433\u0440\u043E\u043A\u0430\u043C)<br/><b>\u0423\u0441\u0438\u043B\u0435\u043D\u043D\u0430\u044F</b>: \u0421\u043D\u0438\u0436\u0430\u0435\u0442 \u0442\u0435\u043A\u0443\u0449\u0443\u044E \u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0443\u044E \u044F\u0440\u043E\u0441\u0442\u044C \u0432 \u0431\u043E\u044E \u043D\u0430 25% \u043A\u0430\u0436\u0434\u044B\u0439 \u0445\u043E\u0434, \u043F\u043E\u043A\u0430 \u0448\u043A\u0430\u043B\u0430 \u044F\u0440\u043E\u0441\u0442\u0438 \u043D\u0435 \u0434\u043E\u0439\u0434\u0435\u0442 \u0434\u043E 0 (\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E \u043F\u043E 3\u043C \u0438\u0433\u0440\u043E\u043A\u0430\u043C)   \",\n  },\n  {\n    name: \"\u041F\u0430\u043D\u0446\u0438\u0440\u044C\",\n    id: \"-312\",\n    description: \"\u0414\u0430\u0451\u0442 \u0445\u043E\u0437\u044F\u0438\u043D\u0443 \u043F\u043E\u043B\u043D\u0443\u044E \u043D\u0435\u0443\u044F\u0437\u0432\u0438\u043C\u043E\u0441\u0442\u044C \u043D\u0430 \u0441\u0440\u043E\u043A \u0434\u043E 3-\u0445 \u0445\u043E\u0434\u043E\u0432!   \",\n  },\n  {\n    name: \"\u041A\u0440\u043E\u0432\u043E\u0442\u0435\u0447\u0435\u043D\u0438\u0435 II\",\n    id: \"-314\",\n    description: \"\u0412\u0440\u0430\u0433 \u0442\u0435\u0440\u044F\u0435\u0442 \u0437\u0434\u043E\u0440\u043E\u0432\u044C\u0435 \u0432 \u043D\u0430\u0447\u0430\u043B\u0435 \u043A\u0430\u0436\u0434\u043E\u0433\u043E \u0445\u043E\u0434\u0430, \u043E\u0442 5 \u0434\u043E 30%!   \",\n  },\n  null,\n];\n\nexport async function joinProt() {\n  await restoreHP();\n  AngryAjax.goToUrl(\"/alley/\");\n  $(document).one(\"ajaxStop\", async () => {\n    function getMetroFightKey() {\n      const onclickValue = $('.alley-sovet h3:contains(\"\u041F\u0440\u043E\u0442\u0438\u0432\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u0435\")')\n        .parent()\n        .find(\"span.f\")\n        .attr(\"onclick\");\n\n      if (!onclickValue) return null;\n\n      const match = onclickValue.match(/'([^']+)'(?:\\s*\\))/);\n      return match ? match[1] : null;\n    }\n\n    const key = getMetroFightKey();\n    await fetch(\n      new URL(window.location.href).origin + \"/sovet/join_metro_fight/\",\n      {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        body: `action=join_metro_fight&metro=2&type=metro&joinkey=${key}&__referrer=%2Falley%2F&return_url=%2Falley%2F`,\n        method: \"POST\",\n        mode: \"cors\",\n      }\n    );\n\n    AngryAjax.goToUrl(\"/sovet/map/\");\n    Groups.showCreateGroup(\"sovet\");\n  });\n}\n\nexport async function boostClan() {\n  await fetch(new URL(window.location.href).origin + \"/clan/profile/banzai/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/clan/profile/banzai/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `player=${player.id}&boost%5Bratingaccur%5D=10000&boost%5Bratingdamage%5D=10000&boost%5Bratingcrit%5D=10000&boost%5Bratingdodge%5D=10000&boost%5Bratingresist%5D=10000&boost%5Bratinganticrit%5D=10000&hours=8&__ajax=1&return_url=%2Fclan%2Fprofile%2Fbanzai%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  AngryAjax.goToUrl(\"/clan/profile/banzai/\");\n}\n\nexport async function protMode() {\n  showAlert(\n    \"\uD83D\uDC54 \u0420\u0435\u0436\u0438\u043C \u043F\u0440\u043E\u0442\u0438\u0432\u043E\u0441\u0442\u043E\u044F\u043D\u0438\u044F \u0432\u043A\u043B\u044E\u0447\u0435\u043D!\",\n    \"\u0417\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u044E\u0441\u044C \u0432 \u043F\u0440\u043E\u0442 \u043A\u0430\u0436\u0434\u044B\u0435 30 \u043C\u0438\u043D\u0443\u0442, 5 \u043C\u0438\u043D\u0443\u0442 \u0434\u043E \u0431\u043E\u044F.\"\n  );\n}\n\nexport async function attackRandom(fightId) {\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: `${new URL(window.location.href).origin}/fight/${fightId}/`,\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=attack&json=1&__referrer=%2Ffight%2F${fightId}%2F&return_url=%2Ffight%2F${fightId}%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nasync function useItem(fightId, itemId, targetId = \"146130036\") {\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n      \"sec-ch-ua-mobile\": \"?0\",\n      \"sec-ch-ua-platform\": '\"macOS\"',\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: `${new URL(window.location.href).origin}/fight/${fightId}/`,\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=useitem&json=1&target=${targetId}&__referrer=%2Ffight%2F${fightId}%2F&return_url=%2Ffight%2F${fightId}%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nclass GroupFight {\n  constructor() {\n    this.activeAbilities = ABILITIES;\n    this.activeAbilitiesIds = [];\n    this.abilitiesMap = {}; // This will map title to ability for easy access\n    this.init();\n  }\n\n  // Initialize the active abilities\n  init() {\n    this.getActiveAbilities();\n    this.mapAbilities();\n\n    window.groupFightAjaxCheck = () => {\n      noAjaxLoader = true;\n      $.post(\"/fight/\", { checkBattleState: 1 }, (data) => {\n        noAjaxLoader = false;\n        if (data == 1) {\n          AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n          setTimeout(() => this.onEndOfTurn(), 1000); // Arrow function binds `this` automatically\n        } else {\n          $(\"#waitdots\").html(\n            Array((($(\"#waitdots\").text().length + 1) % 4) + 1).join(\".\")\n          );\n          window.AngryAjax.setTimeout(groupFightAjaxCheck, 1000);\n        }\n      });\n    };\n  }\n\n  getActiveAbilities() {\n    this.activeAbilitiesIds = $(\".fight-slots-ability td\")\n      .filter((_, el) => $(el).find('input[type=\"radio\"]').length)\n      .map((_, el) => {\n        const $abl = $(el).find(\"img\");\n        const id = $abl.attr(\"data-id\");\n        return id;\n      })\n      .toArray();\n  }\n\n  getInventory() {}\n\n  mapAbilities() {\n    this.abilitiesMap = this.activeAbilitiesIds.reduce((map, id) => {\n      // Find the ability object by id\n      const ability = ABILITIES.find((abl) => abl.id === id);\n\n      if (ability) {\n        map[ability.title] = ability;\n      }\n\n      return map;\n    }, {});\n  }\n\n  useAbility(abilityTitle) {\n    const ability = this.abilitiesMap[abilityTitle];\n    if (ability) {\n      console.log(`Using ability: ${ability.name}`);\n      // Implement ability logic here (e.g., triggering ability effects)\n    } else {\n      console.log(\"Ability not found or not active\");\n    }\n  }\n\n  isFightOver() {\n    return $(\"#fight-actions > div.waiting\").length > 0;\n  }\n\n  onEndOfTurn() {\n    console.log(\"End of turn\");\n    if (this.isFightOver()) {\n      console.log(\"Fight is over. Cleaning up\");\n      this.cleanUp();\n    }\n  }\n\n  // Restore the default fight check function\n  cleanUp() {\n    window.groupFightAjaxCheck = function () {\n      noAjaxLoader = true;\n      $.post(\"/fight/\", { checkBattleState: 1 }, function (data) {\n        noAjaxLoader = false;\n        if (data == 1) {\n          AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n        } else {\n          $(\"#waitdots\").html(\n            Array((($(\"#waitdots\").text().length + 1) % 4) + 1).join(\".\")\n          );\n          window.AngryAjax.setTimeout(groupFightAjaxCheck, 1000);\n        }\n      });\n    };\n  }\n}\n", "export function createContainer({ title, children = [] }) {\n  const container = $(`<div class=\"block-bordered\">\n    <ins class=\"t l\"><ins></ins></ins><ins class=\"t r\"><ins></ins></ins>\n    <div class=\"center clear\">\n      <h3>${title}</h3>\n      <div class=\"petarena-training-description\"></div>\n    </div>\n    <ins class=\"b l\"><ins></ins></ins><ins class=\"b r\"><ins></ins></ins>\n  </div>`);\n\n  const content = container.find(\".petarena-training-description\");\n  children.forEach((child) => content.append(child));\n  return container;\n}\n", "/* global $ petarenaSetActive */\n\nimport { createButton } from \"./ui\";\nimport { createContainer } from \"./ui/container\";\nimport { getElementsOnThePage } from \"./utils\";\n\nasync function getPetAbilities(petId) {\n  const petInfo = await getElementsOnThePage(\n    \".petarena-training\",\n    `/petarena/train/${petId}/`\n  );\n\n  if (!petInfo) return;\n\n  let abilities;\n\n  abilities = $(petInfo).find(\".abilities.hint-msg\");\n\n  if (!abilities.length) {\n    abilities = $(petInfo).find(\".pet-info\").next();\n  }\n\n  abilities = abilities.find(\".object-thumb\").filter((_, el) => {\n    const $el = $(el);\n    const hasAction = $el.find(\".action\").length;\n    const timerDiv = $el.find(\".timer\");\n    const hasTimer = timerDiv.length;\n    const img = $el.find(\"img\");\n\n    // if (!hasAction || !hasTimer) return false;\n\n    timerDiv.css({\n      borderCollapse: \"collapse\",\n      emptyCells: \"show\",\n      lineHeight: \"1.3\",\n      listStyleType: \"none\",\n      display: \"block\",\n      background: \"#ab6a33\",\n      border: \"1px solid #804600\",\n      color: \"white\",\n      fontSize: \"12px\",\n      fontWeight: \"bold\",\n      textAlign: \"center\",\n      position: \"absolute\",\n      left: \"2px\",\n      top: \"26px\",\n      padding: \"0px 3px\",\n      borderRadius: \"5px\",\n      cursor: \"default\",\n    });\n\n    simple_tooltip(img);\n    countdown(timerDiv);\n    return hasAction || hasTimer;\n  });\n\n  // abilities.each((_, el) => {});\n\n  // console.log(abilities);\n\n  return abilities;\n}\n\nfunction getPetsIds() {\n  return $(\".object-thumb\")\n    .map((_, el) => {\n      const $thumb = $(el);\n      $thumb.css({ height: \"auto\" });\n      const $action = $thumb.find(\".action span:contains('\u043E\u0431\u0443\u0447\u0438\u0442\u044C')\").parent();\n      const id = $action.attr(\"onclick\")?.match(/\\/(\\d+)\\//)?.[1];\n      if (!id) return;\n      return id;\n    })\n    .get();\n}\n\nasync function renderAbilitiesContainer() {\n  if ($(\"#pets-abilities\").length > 0) return;\n  const container = $('<div id=\"pets-abilities\"></div>').css({\n    display: \"flex\",\n    flexWrap: \"wrap\",\n    maxWidth: \"330px\",\n    gap: \"4px\",\n    overflow: \"auto\",\n    justifyContent: \"center\",\n    alignItems: \"center\",\n  });\n\n  const showAbilitiesBtn = createButton({\n    text: \"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0430\u0431\u0438\u043B\u043A\u0438 \u043F\u0438\u0442\u043E\u043C\u0446\u0435\u0432\",\n    onClick: async () => {\n      const petsIds = getPetsIds();\n      for (const petId of petsIds) {\n        const ability = await getPetAbilities(petId);\n        container.append(ability);\n      }\n    },\n    className: \"show-abilities\",\n    disableAfterClick: true,\n  });\n\n  const wrapper = createContainer({\n    title: \"\u0410\u0431\u0438\u043B\u043A\u0438 \u043F\u0438\u0442\u043E\u043C\u0446\u0435\u0432\",\n    children: [container, showAbilitiesBtn],\n  });\n\n  $(\".inventary .equipment-cell\").last().prepend(wrapper);\n}\n\nexport async function redrawPetarena() {\n  if ($(\"#pets-table\").length) return; // rerendering occured if #pets-table is present\n  redrawLayout();\n\n  const [cage, relict] = $(\".block-bordered .center.clear\")\n    .filter(function () {\n      const text = $(this).find(\"h3\").text().trim();\n      return (\n        text === \"\u0411\u043E\u0435\u0432\u0430\u044F \u041F\u0435\u0440\u0435\u043D\u043E\u0441\u043A\u0430 \u043F\u0438\u0442\u043E\u043C\u0446\u0435\u0432\" || text === \"\u0422\u0430 \u0441\u0430\u043C\u0430\u044F \u0440\u0435\u043B\u0438\u043A\u0432\u0430\"\n      );\n    })\n    .get();\n\n  // append relic pets table\n  const relictPetsTable = await getElementsOnThePage(\n    \"table\",\n    \"/petarena/cage-relic/\"\n  );\n\n  if (relictPetsTable) {\n    $(relictPetsTable)\n      .find(\"#equipment-accordion, dd, .object-thumbs\")\n      .css({ width: \"auto\", scrollbarWidth: \"none\", overflowY: \"scroll\" })\n      .attr(\"id\", \"pets-table\");\n\n    $(relict).append(relictPetsTable);\n  }\n\n  // append cage table\n  const cageTable = await getElementsOnThePage(\"table\", \"/petarena/cage/\");\n\n  if (cageTable) {\n    $(cageTable).find(\"#equipment-accordion, dd, .object-thumbs\").css({\n      width: \"auto\",\n      height: \"auto\",\n      scrollbarWidth: \"none\",\n      overflowY: \"scroll\",\n    });\n\n    $(cage).append(cageTable);\n  }\n\n  await renderAbilitiesContainer();\n}\n\nfunction redrawLayout() {\n  const table = $(\".inventary\");\n\n  table.find(\"tr\").each(function () {\n    const tds = $(this).find(\"td\");\n\n    const firstChild1 = tds.eq(0).children().first();\n    const firstChild2 = tds.eq(1).children().first(); // Might not exist\n\n    if (firstChild1.length) {\n      table.find(\"tr:first td:first\").append(firstChild1);\n    }\n    if (firstChild2.length) {\n      table.find(\"tr:first td:last\").append(firstChild2);\n    }\n\n    // Remove empty rows (tr) if both tds are now empty\n    if (tds.eq(0).is(\":empty\") && tds.eq(1).is(\":empty\")) {\n      $(this).remove();\n    }\n  });\n\n  // remove useless info taking up space...\n  $(\".dopings-cell\").first().find(\".block-bordered\").slice(0, 2).remove();\n\n  // append button to take to battle for each pet\n  $(\"#equipment-accordion .object-thumbs\")\n    .first()\n    .children(\".object-thumb\")\n    // .filter((_, el) => {\n    //   const src = $(el).find(\"img\").attr(\"src\");\n    //   return ![\n    //     \"/@/images/obj/pets/40-5.png\",\n    //     \"/@/images/obj/pets/42-6.png\",\n    //   ].includes(src);\n    // })\n    .each((_, el) => {\n      const $thumb = $(el);\n      $thumb.css({ height: \"auto\" });\n      const $action = $thumb.find(\".action span:contains('\u043E\u0431\u0443\u0447\u0438\u0442\u044C')\").parent();\n      const id = $action.attr(\"onclick\")?.match(/\\/(\\d+)\\//)?.[1];\n      if (!id) return;\n\n      let takeWithMeBtn = $(\"<div>\", {\n        class: \"take-pet action\",\n        html: \"<span>\u0432 \u0431\u043E\u0439</span>\",\n        click: function () {\n          petarenaSetActive(id, \"battle\");\n        },\n      });\n\n      takeWithMeBtn.insertAfter($action);\n    });\n}\n", "/* global $ AngryAjax */\n\nimport { createButton } from \"./ui\";\nimport { createPopover } from \"./ui\";\n\nfunction getTattooDetails(imgSrc) {\n  const parts = imgSrc.split(\"/\");\n  const type = parts.at(-2); // 'symbol'\n  const category = parts.at(-1).split(\".\")[0]; // '4_1'\n\n  return [type, category];\n}\n\nfunction getActiveTattoo() {\n  try {\n    const thumb = $(\".object-thumbs .object-thumb\")\n      .has(\".action.disabled\")\n      .find(\"img\")\n      .attr(\"src\");\n\n    return thumb;\n  } catch (error) {\n    console.log(\"Could not find active tattoo.\\n\", error);\n  }\n}\n\nexport async function handleModifyManyTattoos(count = 10) {\n  const activeTattoo = getActiveTattoo();\n\n  for (let i = 0; i < count; i++) {\n    if (activeTattoo) {\n      await modifyTattoo(activeTattoo);\n    }\n  }\n\n  $(document).one(\"ajaxStop\", () => gatherAlerts());\n  AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n}\n\nexport async function modifyTattoo(imgSrc) {\n  const [type, category] = getTattooDetails(imgSrc);\n  await fetch(new URL(window.location.href).origin + \"/tattoo/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/tattoo/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=tattoo_mf&honey=0&style=${type}&id=${category}&ajax=1&__referrer=%2Ftattoo%2F&return_url=%2Ftattoo%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport const modifyManyButton = createButton({\n  text: \"\u262F\uFE0F x10\",\n  onClick: async () => {\n    await handleModifyManyTattoos(10);\n    modifyManyButton.classList.remove(\"disabled\");\n  },\n  title: \"10 \u043C\u043E\u0434\u0438\u0444\u0438\u043A\u0430\u0446\u0438\u0439 \u0432\u044B\u0431\u0440\u0430\u043D\u043D\u044B\u0445 \u0442\u0430\u0442\u0443\u0438\u0440\u043E\u043A\",\n});\n\nfunction gatherAlerts() {\n  let alertsContainer = $(\"#tattoo-alerts\");\n\n  // create the container if doesn't exist\n  if (!alertsContainer.length) {\n    alertsContainer = createPopover(\"tattoo-alerts\");\n  }\n\n  // Append, style, and filter success alerts in one go\n  $(\".alert\").each((_, alert) => {\n    if (!alertsContainer.has(alert).length) {\n      $(alert).css(\"position\", \"static\").css(\"display\", \"inline-block\");\n\n      if ($(alert).find(\"#alert-text\").text().includes(\"\u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0443\u043B\u0443\u0447\u0448\u0438\u043B\u0438\")) {\n        $(alert).find(\"#alert-title\").css(\"background\", \"green\");\n        $(alert).find(\".close-cross\").remove();\n        alertsContainer.append(alert);\n      }\n    }\n  });\n}\n", "/* global $ $log showAlert */\n\nimport { formatNumber } from \"../utils\";\nimport { createButton, createDropdown } from \"./button.js\";\n\nconst primaryKeywords = [\n  {\n    text: \"\u0432\u043D\u0435\u0437\u0430\u043F\u043D\u043E \u043E\u0436\u0438\u0432\u0430\u0435\u0442 \u043F\u0440\u0438 \u043F\u043E\u043C\u043E\u0449\u0438 \u0442\u0430\u0438\u043D\u0441\u0442\u0432\u0435\u043D\u043D\u043E\u0439 \u0447\u0451\u0440\u043D\u043E\u0439 \u043A\u043E\u0448\u043A\u0438, \u0432\u043E\u0437\u043D\u0438\u043A\u0448\u0435\u0439 \u0438\u0437 \u041C\u0430\u0442\u0440\u0438\u0446\u044B\",\n    img: \"/@/images/obj/beast_ability/ability40.png\",\n  },\n  {\n    text: \"\u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0440\u0435\u0430\u043D\u0435\u043C\u043E\u0431\u0438\u043B\u044F \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044F \u0432 \u0431\u043E\u0439\",\n    img: \"/@/images/obj/cars/162-big.png\",\n  },\n  {\n    text: \"\u0433\u0440\u043E\u043C\u043A\u043E \u0447\u0438\u0442\u0430\u0435\u0442 QR-\u043A\u043E\u0434\",\n    img: \"/@/images/ico/ability/bigbro_3.png\",\n  },\n  {\n    text: \"\u043D\u0430\u0434\u0435\u0432\u0430\u0435\u0442 \u0442\u044E\u0440\u0431\u0430\u043D\",\n    img: \"/@/images/ico/ability/bentley_abil.png\",\n  },\n  {\n    text: \"\u0418\u0433\u0440\u0430 \u0432 \u041A\u0430\u043B\u044C\u043C\u0430\u0440\u0430 \u0416\u0435\u0441\u0442\u043E\u043A\u0430\",\n    img: \"/@/images/loc/squid2025/abils/1.png\",\n  },\n  {\n    text: \"\u043D\u0435\u0433\u0430\u0442\u0438\u0432\u043D\u044B\u0435 \u044D\u0444\u0444\u0435\u043A\u0442\u044B\",\n    img: \"/@/images/ico/ability/abil_dyson.png\",\n  },\n  {\n    text: \"\u043E\u0431\u043B\u0435\u0442\u0435\u0432 \u0432\u043E\u043A\u0440\u0443\u0433 \u0417\u0435\u043C\u043B\u0438\",\n    img: \"/@/images/ico/ability/abil_kosmo2.png\",\n  },\n\n  {\n    text: \"\u0432\u0438\u0434\u0438\u0442 \u043A\u0440\u0430\u0441\u043D\u044B\u0439 \u0441\u0432\u0435\u0442 \u0438 \u0437\u0430\u0441\u0442\u044B\u0432\u0430\u0435\u0442\",\n    img: \"/@/images/loc/squid2025/abils/6.png\",\n  },\n  {\n    text: \"\u0432 \u043A\u0443\u043A\u043B\u0443 \u0438 \u0442\u043E\u0442 \u043D\u0430\u0447\u0438\u043D\u0430\u0435\u0442 \u0437\u0430\u0441\u0442\u044B\u0432\u0430\u0442\u044C \u043A\u0430\u0436\u0434\u044B\u0435 2 \u0445\u043E\u0434\u0430\",\n    img: \"/@/images/loc/squid2025/abils/6.png\",\n  },\n  {\n    text: \"\u043D\u043E\u0441\u0442\u0430\u043B\u044C\u0433\u0438\u0440\u0443\u0435\u0442 \u0438 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442\",\n    img: \"https://www.moswar.ru/@/images/ico/ability/car220.png\",\n  },\n];\n\nconst secondaryKeywords = [\n  {\n    text: \"\u043F\u0443\u0441\u043A\u0430\u0435\u0442 \u043D\u0430 \u043A\u043E\u0442\u043E\u0448\u0430\u0432\u0435\u0440\u043C\u0443 \u0441\u0435\u0440\u0434\u0438\u0442\u043E\u0433\u043E \u043A\u043E\u0442\u0438\u043A\u0430\",\n    img: \"/@/images/obj/../ico/ability/burrito_abil.png\",\n  },\n  {\n    text: \"\u0442\u0430\u043A \u043F\u043E\u0442\u044F\u043D\u0443\u043B \u043A\u0430\u043D\u0430\u0442\",\n    img: \"/@/images/obj/../ico/ability/squid_4.png\",\n  },\n  // {\n  //   text: \"\u0434\u0435\u043B\u0430\u0435\u0442 \u043A\u0443\u0441\u044C \u043F\u0438\u0442\u043E\u043C\u0446\u0443\",\n  //   img: \"/@/images/obj/../ico/ability/wolfie_2.png\",\n  // },\n  // {\n  //   text: \"\u0431\u044C\u0435\u0442 \u0445\u0432\u043E\u0441\u0442\u043E\u043C \u0438 \u0438\u0433\u0440\u043E\u043A\",\n  //   img: \"/@/images/ico/ability/dino5.png\",\n  // },\n  {\n    text: \"\u043F\u0440\u0438\u0432\u0435\u0437 \u043D\u0430 \u0431\u0440\u043E\u043D\u0435\u043F\u043E\u0435\u0437\u0434\u0435 \u043C\u043E\u0433\u0443\u0447\u0435\u0433\u043E \u0441\u043E\u044E\u0437\u043D\u0438\u043A\u0430\",\n    img: \"/@/images/ico/ability/kim_sum2.png\",\n  },\n  {\n    text: \"\u0427\u0435\u0440\u043D\u0430\u044F \u0434\u044B\u0440\u0430 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442 \u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C\",\n    img: \"/@/images/ico/ability/black_hole.png\",\n  },\n  {\n    text: \"\u0412\u043E\u0440\u043E\u043D\u043A\u0430 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442 \u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C\",\n    img: \"/@/images/ico/ability/tugboat.png\",\n  },\n];\n\nexport function redrawGroupFightLogs() {\n  if ($(\"#enhanced-logs\").length) return;\n\n  const $allLogs = $log.find(\"div.text\");\n  const $container = $(\"<div id='enhanced-logs'>\").css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"4px\",\n    marginBottom: \"8px\",\n  });\n\n  const allKeywords = [\n    ...secondaryKeywords.map((k) => ({ ...k, priority: 0 })),\n    ...primaryKeywords.map((k) => ({ ...k, priority: 1 })),\n  ];\n\n  const $matching = $log\n    .find(\"div.text p\")\n    .filter((_, p) =>\n      allKeywords.some(({ text }) => $(p).text().includes(text))\n    );\n\n  const entries = [];\n\n  $matching.each((_, p) => {\n    const $p = $(p);\n    const entry = allKeywords.find(({ text }) => $p.text().includes(text));\n    if (!entry) return;\n\n    const $logWrapper = $(\"<div>\").css({\n      display: \"flex\",\n      alignItems: \"center\",\n      gap: \"4px\",\n      border: \"1px solid rgb(103, 63, 0)\",\n      borderRadius: \"4px\",\n      padding: \"4px\",\n    });\n\n    const $img = $(\"<img>\")\n      .attr(\"src\", entry.img)\n      .css({ width: \"32px\", height: \"32px\" });\n\n    $logWrapper.append($img, $p.clone());\n    entries.push({ priority: entry.priority, $wrapper: $logWrapper });\n    $p.remove();\n  });\n\n  entries\n    .sort((a, b) => b.priority - a.priority)\n    .forEach(({ $wrapper }) => $container.append($wrapper));\n\n  $allLogs.prepend($container);\n\n  $(\".forcejoin\").each((_, el) => {\n    $(el).prependTo($allLogs);\n  });\n}\n\n//\n//\n// old shit:\n//\n//\n\nexport function enhanceLogs() {\n  const currentPlayerName = getCurrentPlayerName();\n  const $logsContainer = $(\".log > ul.fight-log .text\");\n\n  let $myLogsContainer = $(\"#logs-me\");\n\n  if (!$myLogsContainer.length) {\n    $myLogsContainer = $(\"<div id='logs-me'></div>\")\n      .css(\"display\", \"flex\")\n      .css(\"flexDirection\", \"column\");\n  }\n\n  // Run the function on both left and right lists\n  $(\".list-users--left, .list-users--right\").each(function () {\n    sortPlayersLists($(this));\n  });\n\n  // sort logs\n  const logActions = [\n    { text: \"\u0412\u043E\u0440\u043E\u043D\u043A\u0430\", icon: \"/@/images/obj/../ico/ability/tugboat.png\" },\n    {\n      text: \"\u043F\u0443\u0441\u043A\u0430\u0435\u0442 \u043D\u0430 \u043A\u043E\u0442\u043E\u0448\u0430\u0432\u0435\u0440\u043C\u0443 \u0441\u0435\u0440\u0434\u0438\u0442\u043E\u0433\u043E \u043A\u043E\u0442\u0438\u043A\u0430\",\n      icon: \"/@/images/obj/../ico/ability/burrito_abil.png\",\n    },\n    { text: \"\u0414\u044B\u043C\u043E\u0432\u0443\u044E \u0437\u0430\u0432\u0435\u0441\u0443\", icon: \"/@/images/ico/ability/kuzn_abil.png\" },\n    { text: \"\u041A\u043E\u043C\u043F\u044C\u044E\u0442\u0435\u0440\u043D\u044B\u0439 \u0412\u0438\u0440\u0443\u0441\", icon: \"/@/images/loc/hacker/abil_1.png\" },\n    // { text: \"\u043F\u0440\u0438\u0432\u0435\u0437 \u043D\u0430 \u0431\u0440\u043E\u043D\u0435\u043F\u043E\u0435\u0437\u0434\u0435\", action: formatTrainAttackLog },\n    // { text: \"\u041D\u0435\u0437\u0440\u0438\u043C\u044B\u0439 \u0437\u0430\u0449\u0438\u0442\u043D\u0438\u043A\", action: formatDefenderLogs },\n    {\n      text: \"\u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430\",\n      condition: (el) => el.hasClass(\"rupor\"),\n      action: (el) => el.remove(),\n    },\n    { text: \"\u043D\u0438\u043A\u0442\u043E \u043D\u0435 \u043F\u043E\u0441\u0442\u0440\u0430\u0434\u0430\u043B\", action: (el) => el.remove() },\n    { text: \"\u0431\u0430\u0442\u0430\u0440\u0435\u0439\u043A\u0438 \u0422\u0435\u0441\u043B\u044B\", icon: \"/@/images/ico/ability/tesla_expl.png\" },\n    {\n      text: \"\u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0440\u0435\u043B\u0438\u043A\u0442\u0430 \u0441\u043D\u0438\u0436\u0430\u0435\u0442 \u043A\u0440\u0443\u0442\u043E\u0441\u0442\u044C\",\n      icon: \"/@/images/obj/relict/rock77_128.png\",\n    },\n    { text: \"\u043F\u043E\u0434\u0436\u0438\u0433\u0430\u0435\u0442 \u0442\u0440\u043E\u043D\", icon: \"/@/images/obj/relict/rock38_128.png\" },\n    {\n      text: \"\u0420\u0435\u043B\u0438\u043A\u0442 \u0434\u0435\u043B\u0430\u044E\u0442 \u0432\u0435\u043B\u0438\u043A\u0438\u043C\",\n      icon: \"/@/images/obj/relict/rock47_128.png\",\n    },\n    { text: \"\u0443\u0432\u043E\u0437\u0438\u0442 \u0443 \u0438\u0433\u0440\u043E\u043A\u0430\", icon: \"/@/images/obj/cars/129-big.png\" },\n    {\n      text: \"\u043A\u043E\u043C\u0430\u043D\u0434\u0443\u0435\u0442 \u041E\u041C\u041E\u041D\u0443 \u0440\u0430\u0437\u0433\u043E\u043D\u044F\u0442\u044C \u043D\u0435\u0441\u043E\u0433\u043B\u0430\u0441\u043D\u044B\u0445\",\n      icon: \"/@/images/obj/confr_ability/fight_ability6.png\",\n    },\n    { text: \"\u043F\u0440\u0435\u0432\u0440\u0430\u0449\u0430\u0435\u0442 \u0432 \u043A\u0443\u043A\u043B\u0443\", icon: \"/@/images/loc/squid2025/abils/6.png\" },\n    {\n      text: \"\u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0411\u043E\u0435\u0432\u043E\u0433\u043E \u043C\u0438\u0433\u0440\u0430\u043D\u0442\u0430, \u0440\u0430\u0437\u043C\u0430\u0445\u0438\u0432\u0430\u044F \u0422\u0440\u0443\u0434\u043E\u0432\u043E\u0439 \u043A\u043D\u0438\u0436\u043A\u043E\u0439\",\n      icon: \"/@/images/obj/fight_item/migrant.png\",\n    },\n    {\n      text: \"\u0435\u0441\u0442 \u043A\u0438\u0442\u0430\u0439\u0441\u043A\u0438 \u043F\u0435\u0447\u0435\u043D\u044C\u043A\u0438 \u0438 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u0430\u0432\u043B\u0438\u0432\u0430\u0435\u0442 \u0441\u0435\u0431\u0435\",\n      icon: \"/@/images/loc/squid2025/abils/5.png\",\n    },\n    { text: \"\u0438\u0433\u0440\u0430\u0435\u0442 \u0432 \u041A\u0430\u043C\u0435\u0448\u043A\u0438\", icon: \"/@/images/loc/squid2025/abils/2.png\" },\n    { text: \"\u0434\u0451\u0440\u0433\u0430\u0435\u0442 \u0437\u0430 \u0441\u0442\u0440\u0443\u043D\u044B!\", icon: \"/@/images/ico/ability/balalajka.png\" },\n    { text: \"\u0434\u0435\u043B\u0430\u0435\u0442 \u043A\u0443\u0441\u044C \u043F\u0438\u0442\u043E\u043C\u0446\u0443\", icon: \"/@/images/ico/ability/wolfie_2.png\" },\n    {\n      text: \"\u044F\u0440\u043E\u0441\u0442\u043D\u043E \u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0432 \u0431\u043E\u0439 \u043A\u043B\u043E\u043D\u0430\",\n      icon: \"/@/images/ico/ability/fury_7.png\",\n    },\n    {\n      text: \"\u041F\u0440\u0438\u0448\u0435\u043B\u0435\u0446 \u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C \u043C\u0438\u043D\u0438-\u041F\u0440\u0438\u0448\u0435\u043B\u044C\u0446\u0430!\",\n      icon: \"/@/images/ico/ability/alien_many.png\",\n    },\n    {\n      text: \"\u043E\u0431\u044A\u0435\u0434\u0438\u043D\u044F\u0435\u0442 \u0442\u0440\u0435\u0445 \u043C\u0438\u043D\u0438-\u043F\u0440\u0438\u0448\u0435\u043B\u044C\u0446\u0435\u0432\",\n      icon: \"/@/images/ico/ability/alien_uber.png\",\n    },\n    {\n      text: \"\u043F\u0440\u0438\u0432\u043E\u0437\u0438\u0442 \u0432 \u0431\u043E\u0439 \u043D\u0430 \u0441\u0432\u043E\u0435\u043C \u041C\u0430\u0439\u0431\u0430\u0431\u0430\u0445\u0435\",\n      icon: \"/@/images/obj/gifts2017/mers/invite-big.png\",\n    },\n    {\n      text: \"\u043F\u0440\u043E\u0432\u043E\u0434\u0438\u0442 \u0443\u0434\u0430\u0440 \u0441 \u0431\u0435\u0441\u043F\u0438\u043B\u043E\u0442\u043D\u0438\u043A\u0430!\",\n      icon: \"/@/images/ico/ability/bpla_abil.png\",\n    },\n    {\n      text: \"\u041A\u043E\u0441\u043C\u0438\u0447\u0435\u0441\u043A\u0430\u044F \u041F\u044B\u043B\u044C \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442 \u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C\",\n      icon: \"/@/images/ico/ability/cloud3.png\",\n    },\n    { text: \"\u0441\u0442\u0440\u0435\u043B\u044F\u0435\u0442 \u043A\u0430\u043A \u0432 \u043A\u0438\u043D\u043E\", icon: \"/@/images/ico/ability/gru_1.png\" },\n    { text: \"\u0431\u044C\u0435\u0442 \u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u043B\u0430\u043F\u0438\u0449\u0438\", icon: \"/@/images/ico/ability/lion_1.png\" },\n    {\n      text: \"\u043F\u0440\u0435\u0434\u044A\u044F\u0432\u0438\u0442\u044C \u0434\u043E\u043A\u0443\u043C\u0435\u043D\u0442\u044B\",\n      icon: \"/@/images/ico/ability/tetris_abil.png\",\n    },\n    {\n      text: \"\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u044F \u0414\u0436\u0435\u0439\u043B \u0411\u0440\u0435\u0439\u043A, \u0441\u043D\u0438\u043C\u0430\u0435\u0442\",\n      icon: \"/@/images/loc/hacker/abil_2.png\",\n    },\n    {\n      text: \"\u041A\u0430\u0442\u0443\u0448\u043A\u0443 \u0422\u0435\u0441\u043B\u0443\",\n      icon: \"/@/images/obj/gifts2018/car/tesla_coil_128.png\",\n    },\n    { text: \"\u0425\u0430\u043A\u0435\u0440 [??] \u0447\u0438\u043F\u0438\u0440\u0443\u0435\u0442\", icon: \"/@/images/ico/ability/bigbro_2.png\" },\n    {\n      text: \"\u0425\u0430\u043A\u0435\u0440 \u043C\u043E\u0431\u0438\u043B\u0438\u0437\u0443\u0435\u0442\u0441\u044F \u0438 \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442 \u043D\u0430 \u043F\u043E\u043C\u043E\u0449\u044C\",\n      icon: \"/@/images/loc/hacker/abil_6.png\",\n    },\n    { text: \"\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u0441\u044F \u0411\u043E\u0441\u0441\u043E\u043C\", icon: \"/@/images/loc/squid2025/abils/3.png\" },\n    {\n      text: \"\u0433\u0440\u043E\u043C\u043A\u043E \u0447\u0438\u0442\u0430\u0435\u0442 QR-\u043A\u043E\u0434\",\n      icon: \"/@/images/ico/ability/bigbro_3.png\",\n    },\n    {\n      text: \"\u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0441\u0438\u043B\u044C\u043D\u0435\u0439\u0448\u0438\u0445 \u0434\u0443\u0445\u043E\u0432 \u0441\u043E\u043F\u0435\u0440\u043D\u0438\u043A\u043E\u0432\",\n      icon: \"/@/images/ico/ability/abil_shaman_ultra.png\",\n    },\n    { text: \"\u041C\u044D\u0440\", icon: \"/@/images/ico/ability/major.png\" },\n    { text: \"\u041C\u043E\u0441\u0413\u043E\u0441\u0421\u0442\u0440\u0430\u0445!\", icon: \"/@/images/obj/relict/rock72_128.png\" },\n    { text: \"\u041F\u044B\u043B\u0430\u044E\u0449\u0438\u0439 \u0441\u043B\u0435\u0434\", icon: \"/@/images/ico/ability/car220.png\" },\n    {\n      text: \"\u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442 \u0434\u0443\u0431\u0438\u043D\u043E\u0447\u043A\u0443 \u0438 \u043D\u0430\u043D\u043E\u0441\u0438\u0442 50% \u0443\u0440\u043E\u043D\u0430\",\n      icon: \"/@/images/ico/ability/omon_weapon.png\",\n    },\n    {\n      text: \"\u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0428\u0442\u0443\u0440\u043C\u043E\u0432\u0438\u043A\u0430, \u0440\u0430\u0437\u043C\u0430\u0445\u0438\u0432\u0430\u044F \u0443\u0434\u043E\u0441\u0442\u043E\u0432\u0435\u0440\u0435\u043D\u0438\u0435\u043C\",\n      icon: \"/@/images/obj/fight_item/migrant4_128.png\",\n    },\n    {\n      text: \"\u0432\u044B\u0441\u0430\u0436\u0438\u0432\u0430\u0435\u0442 \u0432 \u0431\u043E\u0439 \u0414\u0435\u0441\u0430\u043D\u0442\",\n      icon: \"/@/images/ico/ability/heli_cage.png\",\n    },\n    {\n      text: \"\u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044F \u0438 \u0441\u0431\u0440\u0430\u0441\u044B\u0432\u0430\u0435\u0442 \u0411\u0430\u043B\u043B\u0430\u0441\u0442\",\n      icon: \"/@/images/ico/ability/afg.png\",\n    },\n    {\n      text: \"\u043F\u0440\u043E\u043B\u0435\u0442\u0430\u0435\u0442 \u043D\u0430 \u0434\u0436\u0435\u0442\u0435 \u0438 \u0443\u0432\u0435\u043B\u0438\u0447\u0438\u0432\u0430\u0435\u0442 \u0441\u0432\u043E\u044E \u043C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u0443\u044E \u044F\u0440\u043E\u0441\u0442\u044C\",\n      icon: \"/@/images/obj/cars/361-big.png\",\n    },\n    {\n      text: \"\u043F\u0440\u043E\u0433\u043E\u043D\u044F\u0435\u0442 \u0432\u0441\u0435\u0445 \u0432\u0442\u043E\u0440\u044B\u0445 \u043F\u0438\u0442\u043E\u043C\u0446\u0435\u0432\",\n      icon: \"/@/images/obj/../ico/ability/burrito_abil.png\",\n    },\n    {\n      text: \"\u041F\u0440\u0438\u0448\u0435\u043B\u0435\u0446 \u0437\u0430\u0440\u0430\u0436\u0430\u0435\u0442 \u043F\u0430\u0440\u0430\u0437\u0438\u0442\u043E\u043C\",\n      icon: \"/@/images/ico/ability/alien_par.png\",\n    },\n    {\n      text: \"\u041C\u0430\u0440\u0441\u0438\u0430\u043D\u0438\u043D\",\n      icon: \"/@/images/loc/mars/abils/abil5.png\",\n    },\n    {\n      text: \"\u0440\u0430\u043A\u0435\u0442\u0443 DIY\",\n      icon: \"/@/images/loc/rocket/rocket.png\",\n    },\n    {\n      text: \"\u0433\u043E\u0440\u044F\u0447\u0443\u044E \u043A\u0430\u0440\u0442\u043E\u0448\u043A\u0443\",\n      icon: \"/@/images/loc/mars/potato@2x.png\",\n    },\n    {\n      text: \"\u0433\u0438\u043F\u043D\u043E\u0442\u0438\u0437\u0438\u0440\u0443\u0435\u0442\",\n      icon: \"/@/images/ico/ability/abys_abil.png\",\n    },\n    {\n      text: \"\u0422\u0438\u0442\u0430\u043D\u043E\u0441 \u0434\u0435\u043B\u0430\u0435\u0442 \u0432\u0435\u043B\u0438\u043A\u0438\u043C\",\n      icon: \"/@/images/loc/tanos/talant_3.png\",\n    },\n    {\n      text: \"\u0440\u043E\u0439 \u043F\u0447\u0451\u043B\",\n      icon: \"/@/images/obj/bear_ability/bear_ability_1.png\",\n    },\n    {\n      text: \"\u0440\u043E\u0439 \u043F\u0447\u0451\u043B\",\n      icon: \"/@/images/obj/bear_ability/bear_ability_1.png\",\n    },\n    {\n      text: \"\u0411\u041F\u041B\u0410\",\n      icon: \"/@/images/obj/cars/338-big.png\",\n    },\n    {\n      text: \"\u043F\u0440\u044F\u0447\u0435\u0442\u0441\u044F \u043F\u043E\u0434 \u043A\u0440\u044B\u043B\u043E\u043C \u0441\u0430\u043C\u043E\u043B\u0451\u0442\u0430 \u0438 \u0435\u0433\u043E \u0437\u0434\u043E\u0440\u043E\u0432\u044C\u0435 \u043D\u0435 \u043F\u0430\u0434\u0430\u0435\u0442 \u043D\u0438\u0436\u0435\",\n      icon: \"/@/images/obj/cars/319-big.png\",\n    },\n    {\n      text: \"\u043A\u0443\u0431\u0440\u0438\u043A-\u0440\u0443\u0431\u0438\u043A\u0430\",\n      icon: \"/@/images/obj/gifts2025/ny/rubik/8_256.png\",\n    },\n    {\n      text: \"\u0441 \u043F\u043E\u043C\u043E\u0449\u044C\u044E \u0440\u0435\u0430\u043D\u0435\u043C\u043E\u0431\u0438\u043B\u044F \u0432\u043E\u0437\u0432\u0440\u0430\u0449\u0430\u0435\u0442\u0441\u044F \u0432 \u0431\u043E\u0439\",\n      icon: \"/@/images/obj/cars/162-big.png\",\n    },\n  ];\n\n  function looselyIncludes(html, text) {\n    if (!text) console.log(html);\n    return text.split(/\\s+/).every((word) => html.includes(word));\n  }\n\n  const dropdownContainer = $(\"<div>\").css({\n    display: \"flex\",\n    flexDirection: \"column\",\n    gap: \"8px\",\n  });\n  const dropdownMap = new Map();\n\n  $logsContainer.children().each(function () {\n    const el = $(this);\n    const logText = el.text();\n\n    for (const { text, icon, action, condition } of logActions) {\n      if (looselyIncludes(logText, text) && (!condition || condition(el))) {\n        if (text.includes(\"\"))\n          if (!dropdownMap.has(text)) {\n            dropdownMap.set(\n              text,\n              createDropdown({\n                toggleText: `<img src=\"${icon}\" style=\"height:64px; width: 64px;\" class=\"ability-log-icon\" />`,\n                items: [],\n                className: \"ability-log-container\",\n                isOpen: false,\n              })\n            );\n          }\n\n        if (icon) addIcon(el, icon);\n        if (action) action(el);\n\n        dropdownMap.get(text).append(el);\n      }\n    }\n\n    if (\n      currentPlayerName &&\n      logText.includes(currentPlayerName) &&\n      !logText.toLowerCase().includes(\"\u043A\u043B\u043E\u043D\")\n    ) {\n      $myLogsContainer.append(el);\n    }\n  });\n\n  // Append all dropdowns at the end\n  dropdownMap.forEach((dropdown) => dropdownContainer.append(dropdown));\n  $logsContainer.append(dropdownContainer);\n\n  const $myLogsDropdown = createDropdown({\n    toggleText: \"\u041C\u043E\u0438 \u043B\u043E\u0433\u0438\",\n    className: \"me-logs\",\n    items: [$myLogsContainer],\n    isOpen: true,\n  }).css({\n    outline: \"4px inset lightseagreen\",\n    borderRadius: \"2px\",\n    padding: \"6px 0px\",\n  });\n\n  if (!$(\".me-logs\").length && $myLogsContainer.length > 0) {\n    $logsContainer.prepend($myLogsDropdown);\n  }\n}\n\nfunction sortPlayersLists($container) {\n  var $rageContainer = $(\"<div>\")\n    .css(\"display\", \"flex\")\n    .css(\"flexDirection\", \"column\");\n\n  var $me,\n    $dead = [],\n    $players = [],\n    $brothersMikhalycha = [];\n\n  $container.find(\"li\").each(function () {\n    var $li = $(this);\n    var $playerRage = $li.find(\".player-rage\");\n\n    if ($playerRage.length) {\n      var rageWidth = parseFloat($playerRage.find(\".percent\").css(\"width\"));\n\n      // Identify the current player and add them to the correct array\n      if ($li.hasClass(\"me\")) {\n        $me = $li;\n      } else if ($li.hasClass(\"dead\")) {\n        $dead.push($li);\n      } else if ($li.find(\".user\").text().includes(\"\u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430\")) {\n        // Check for \"\u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430\" and add to $brothersMikhalycha\n        $brothersMikhalycha.push({ li: $li, rage: rageWidth });\n      } else {\n        // Sort the rest by the rage width (descending)\n        $players.push({ li: $li, rage: rageWidth });\n      }\n    }\n  });\n\n  // Sort players based on rage width (descending)\n  $players.sort(function (a, b) {\n    return b.rage - a.rage; // Descending order\n  });\n\n  // Sort \"\u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430\" players based on their rage width (descending)\n  $brothersMikhalycha.sort(function (a, b) {\n    return b.rage - a.rage; // Descending order\n  });\n\n  // Prepend the current player, append sorted players, then \u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430, and finally dead players\n  if ($me) $rageContainer.prepend($me);\n\n  // Append sorted players\n  $players.forEach(function (player) {\n    $rageContainer.append(player.li);\n  });\n\n  // Append \"\u0411\u0440\u0430\u0442 \u041C\u0438\u0445\u0430\u043B\u044B\u0447\u0430\" players\n  $brothersMikhalycha.forEach(function (player) {\n    $rageContainer.append(player.li);\n  });\n\n  // Append dead players\n  $dead.forEach(function ($li) {\n    $rageContainer.append($li);\n  });\n\n  // Prepend the container with sorted players to the list\n  $container.prepend($rageContainer);\n}\n\nfunction formatTrainAttackLog($p) {\n  const match = $p.html().match(/(.*?)\u043F\u043E\u0441\u0442\u0440\u0430\u0434\u0430\u043B\u0438:\\s*(.*)/);\n  if (!match) return;\n\n  const mainText = match[1].trim();\n  const players = match[2].split(/,\\s*/).map((player) => player.trim());\n\n  $p.empty().css({\n    display: \"flex\",\n    flexDirection: \"column\",\n  });\n\n  // Top div with icon\n  const $topDiv = $(\"<div>\").css({\n    display: \"flex\",\n    alignItems: \"center\",\n  });\n\n  const $img = $(\"<img>\")\n    .attr(\"src\", \"/@/images/ico/ability/kim_sum2.png\")\n    .css({\n      width: \"32px\",\n      height: \"32px\",\n    });\n\n  const $textSpan = $(\"<span>\").html(mainText);\n\n  $topDiv.append($img).append($textSpan);\n\n  // Grid for players\n  const $gridDiv = $(\"<div>\").css({\n    display: \"grid\",\n    gridTemplateColumns: \"repeat(auto-fill, minmax(120px, 1fr))\",\n    gap: \"4px\",\n  });\n\n  players.forEach((player) => {\n    const playerWithConvertedNumber = player.replace(/-?\\d+/g, (match) =>\n      formatNumber(Number(match))\n    );\n    $gridDiv.append(playerWithConvertedNumber);\n  });\n\n  $p.append($topDiv).append($gridDiv);\n}\n\nfunction formatDefenderLogs() {\n  $(\".text\").each(function () {\n    var $container = $(this);\n    var $pContainer = $(\"<p>\", { class: \"defender-log\" });\n    var $nodes = $container.contents();\n    var parts = [];\n\n    for (var i = 0; i < $nodes.length; i++) {\n      var node = $nodes[i];\n      if (node.nodeType === 1 && node.tagName === \"P\") break; // Stop at the first <p>\n      $pContainer.append(node);\n    }\n\n    if ($pContainer.contents().length) {\n      let rawText = $pContainer\n        .html()\n        .split(\".\")\n        .filter((p) => p.trim() !== \"\");\n      if (rawText.length > 0) {\n        let firstSentence = rawText[0].replace(\" \u0436\u0438\u0437\u043D\u0435\u0439\", \"\");\n        let otherSentences = rawText.slice(1).map((p) =>\n          p\n            .replace(/.*?\u0431\u044C\u0435\u0442 /, \"\")\n            .replace(\" \u0436\u0438\u0437\u043D\u0435\u0439\", \"\")\n            .trim()\n        );\n        $pContainer.html(`${firstSentence}, ${otherSentences.join(\", \")}.`);\n        addIcon($pContainer, \"/@/images/obj/relict/rock17_128.png\");\n      }\n      $container.prepend($pContainer);\n    }\n  });\n}\n\nfunction addIcon($p, src) {\n  $p.css({\n    display: \"flex\",\n    alignItems: \"center\",\n    gap: \"4px\",\n  });\n\n  const $img = $(\"<img>\").attr(\"src\", src).css({\n    width: \"32px\",\n    height: \"32px\",\n  });\n\n  const $span = $(\"<span>\").html($p.html());\n\n  $p.empty().append($img).append($span);\n}\n\nfunction getCurrentPlayerName() {\n  return $(\".me .user a[href*='player']\")?.text();\n}\n\nexport function extractFightLogEntries() {\n  const selector =\n    \"#fightGroupForm > table > tbody > tr > td.log > ul > li > div > p\";\n  const elements = document.querySelectorAll(\n    `${selector} span.name-resident, ${selector} span.name-arrived`\n  );\n\n  return [\n    ...new Set(Array.from(elements).map((el) => el.closest(\"p\").outerHTML)),\n  ];\n}\n\nexport function replaceGroupFightLogs(logs) {\n  if (!logs) {\n    logs = extractFightLogEntries();\n  }\n\n  // count before\n  const logsCountBefore = $(\n    \"#sign_ufl > tbody > tr > td.log > ul > li > div.text\"\n  )\n    .children()\n    .filter(function () {\n      // Keep elements that have a 'class' attribute, even if it's empty\n      return $(this).is(\"[class]\");\n    })\n    .not(\".line\").length;\n\n  // replace logs\n  $(\"#sign_ufl > tbody > tr > td.log > ul > li > div.text\").html(\n    [...logs].join(\"\")\n  );\n\n  // count after\n  const logsCountAfter = $(\n    \"#sign_ufl > tbody > tr > td.log > ul > li > div.text\"\n  ).children().length;\n\n  // alert\n  var alert = showAlert(\n    \"\u2705 \u041E\u0447\u0438\u0442\u0441\u043A\u0430 \u043B\u043E\u0433\u043E\u0432 \u043E\u0442 \u041D\u041F\u0421\",\n    `\u041A\u043E\u043B-\u0432\u043E \u043B\u043E\u0433\u043E\u0432 \u0434\u043E \u043E\u0447\u0438\u0441\u0442\u043A\u0438: <strong>${logsCountBefore}</strong> <br>\u041A\u043E\u043B-\u0432\u043E \u043B\u043E\u0433\u043E\u0432 \u043F\u043E\u0441\u043B\u0435 \u043E\u0447\u0438\u0441\u0442\u043A\u0438: <strong>${logsCountAfter}</strong><br>\u041B\u043E\u0433\u043E\u0432 \u0443\u0431\u0440\u0430\u043D\u043E: <strong>${logsCountBefore - logsCountAfter}</strong>`\n  );\n\n  var fightGroup = $(\".fight-group\");\n  if (fightGroup.length) {\n    var position = fightGroup.offset();\n    var top = position.top;\n    var left = position.left + fightGroup.outerWidth();\n    var positionOffset = 100;\n\n    // Place the alert at the top-right corner\n    alert.css({\n      top: top + \"px\",\n      left: positionOffset + left + \"px\",\n    });\n  }\n}\n", "import { createButton } from \"./button\";\n\n/* global $ AngryAjax */\nexport function createPopover(id, customCss = \"\") {\n  let $container = $(`#${id}`);\n  if (!$container.length) {\n    $container = $(\"<div>\", { id }).css({\n      position: \"fixed\",\n      width: \"50%\",\n      top: \"30%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n      minHeight: \"35vh\",\n      \"overflow-y\": \"auto\",\n      \"overflow-x\": \"hidden\",\n      display: \"flex\",\n      \"flex-wrap\": \"wrap\",\n      \"justify-content\": \"center\",\n      \"align-items\": \"center\",\n      gap: \"10px\",\n      padding: \"10px\",\n      \"border-radius\": \"8px\",\n      background: \"rgba(0, 0, 0, 0.8)\",\n      \"box-shadow\": \"0px 4px 10px rgba(0, 0, 0, 0.3)\",\n      \"z-index\": 9999,\n      \"scrollbar-width\": \"thin\",\n      \"pointer-events\": \"auto\",\n      border: \"none\",\n    });\n\n    if (customCss) {\n      $container.attr(\"style\", `${$container.attr(\"style\")}; ${customCss}`);\n    }\n\n    const closeButton = createButton({\n      text: \"X\",\n      onClick: () => {\n        $container.remove(), AngryAjax.reload();\n      },\n      title: \"\u0417\u0430\u043A\u0440\u044B\u0442\u044C \u043E\u043A\u043D\u043E\",\n    });\n\n    const $closeButton = $(closeButton).css({\n      position: \"absolute\",\n      top: \"2%\",\n      right: \"2%\",\n      \"z-index\": 99999,\n    });\n\n    $container.append($closeButton);\n    $(\"body\").prepend($container);\n  }\n  return $container;\n}\n", "/* global $ showAlert showConfirm closeAlert countdown AngryAjax  */\n\nimport { playBlackjack } from \"../../src/locations/casino.js\";\nimport {\n  chaoticFightMode,\n  checkBronikPieces,\n  eatSnickers,\n  farm,\n  joinPahan,\n  metroWorkMode,\n  patrolMode,\n  playGypsy,\n  signUpForDeps,\n  signUpForSiri,\n  trackRatMode,\n  tradeAllSiri,\n  workMode,\n} from \"../alley.js\";\nimport { carBringupMode, sortGarage } from \"../cars.js\";\nimport {\n  addClanToEnemies,\n  payEmerald,\n  sortClanPlayersByCoolness,\n} from \"../clan.js\";\nimport { eatSilly, getStats, restoreHP } from \"../dopings.js\";\nimport startDungeon from \"../dungeon-solo.js\";\nimport { boostClan, joinProt } from \"../group-fight.js\";\nimport { redrawPetarena } from \"../pets.js\";\nimport { handlePvpFight, initPvpUI } from \"../pvp.js\";\nimport { handleModifyManyTattoos } from \"../tattoo.js\";\nimport { formatNumber, getElementsOnThePage, strToHtml } from \"../utils.js\";\nimport { createButton, createNumberAction } from \"./button.js\";\nimport { enhanceLogs, redrawGroupFightLogs } from \"./logs.js\";\nimport { createPopover } from \"./popover.js\";\n\nconst assistantButtonsProps = [\n  {\n    text: \"\uD83C\uDF54\",\n    title: \"\u0420\u0430\u0431\u043E\u0442\u0430 \u0438 \u043F\u0430\u0442\u0440\u0443\u043B\u044C\",\n    onClick: async () => {\n      await workMode(1);\n      await patrolMode(10);\n    },\n  },\n  {\n    text: \"\uD83D\uDC00\",\n    title: \"\u041A\u0440\u044B\u0441\u044B \u0430\u0432\u0442\u043E\u043F\u0438\u043B\u043E\u0442\",\n    onClick: async () => await trackRatMode(5),\n  },\n  {\n    text: \"\uD83D\uDCB5\",\n    title: \"\u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0430\u043B\u044E\u0442\u0443\",\n    className: \"show-currency\",\n    onClick: async (event) => {\n      let btn = event.currentTarget; // Get the clicked button\n      let $currencyContainer = await getCurrencyContainer();\n\n      if ($(\"#currency-container\").length) {\n        $(\"#currency-container\").replaceWith($currencyContainer);\n      } else {\n        $currencyContainer.hide();\n        $(btn).parent().append($currencyContainer);\n        $currencyContainer.slideToggle();\n      }\n    },\n    disableAfterClick: false,\n  },\n  // { text: \"\u2649\uFE0F\", title: \"\u0417\u043E\u0434\u0438\u0430\u043A\", onClick: async () => await zodiacMode() },\n  {\n    text: \"\uD83D\uDD2E\",\n    title: \"\u0421\u0438\u0440\u0438 \u043E\u0442\u043B\u043E\u0436\u043A\u0430 (\u0437\u0430 3 \u0441\u0435\u043A\u0443\u043D\u0434\u044B)\",\n    onClick: async () => await signUpForSiri(),\n  },\n  {\n    text: \"\uD83C\uDD7F\uFE0F\",\n    title: \"\u0414\u044D\u043F\u0441 \u043E\u0442\u043B\u043E\u0436\u043A\u0430 (\u0437\u0430 10 \u043C\u0438\u043D\u0443\u0442)\",\n    onClick: async () => await signUpForDeps(),\n  },\n  {\n    text: \"\uD83D\uDD31\",\n    title: \"\u0411\u043E\u0439 \u0441 \u041F\u0430\u0445\u0430\u043D\u043E\u043C\",\n    onClick: async () => {\n      if (confirm(\"\u0417\u0430\u043F\u0438\u0441\u0430\u0442\u044C\u0441\u044F \u043D\u0430 \u043F\u0430\u0445\u0430\u043D\u0430?\")) {\n        joinPahan();\n      }\n    },\n    disableAfterClick: false,\n  },\n  {\n    text: \"\uD83D\uDC4A\",\n    title:\n      \"50 \u0431\u043E\u0435\u0432 \u0432 \u0437\u0430\u043A\u043E\u0443\u043B\u043A\u0438 \u043E\u0431\u043E\u0440\u043E\u0442\u043D\u0435\u043C (\u0443\u0440\u043E\u0432\u0435\u043D\u044C \u043E\u0431\u043E\u0440\u043E\u0442\u043D\u044F - 1)\\n\u043D\u0443\u0436\u043D\u044B: \u043E\u0431\u043E\u0440\u043E\u0442\u0435\u043D\u044C + \u043C\u0430\u0436\u043E\u0440 + \u0441\u043D\u0438\u043A\u0435\u0440\u0441\u044B/\u0442\u043E\u043D\u0443\u0441)\",\n    onClick: async () => await farm(50),\n    disableAfterClick: false,\n  },\n  {\n    text: `<img src=\"/@/images/obj/jobs/item6.png\" style=\"width: 16px; height: 16px; transform: scale(1.5);\">`,\n    onClick: eatSnickers,\n    title: \"\u041A\u0443\u0448\u0430\u0442\u044C \u0441\u043D\u0438\u043A\u0435\u0440\u0441\",\n    disableAfterClick: false,\n  },\n  {\n    text: \"\uD83D\uDDFC\",\n    title: \"\u0422\u0443\u0440\u0435\u043B\u044C + \u043C\u0435\u0442\u0430\u043B\u043B\u043E\u0434\u0435\u0442\u0435\u043A\u0442\u043E\u0440 (\u0435\u0441\u043B\u0438 \u0435\u0441\u0442\u044C)\",\n    onClick: async () => {\n      await fetch(\"/turret/23018/\", {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en;q=0.9\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-fetch-dest\": \"empty\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer: new URL(window.location.href).origin + \"/turret/23018/\",\n        body: \"action=search&__ajax=1&return_url=%2Fturret%2F23018%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n      });\n\n      await fetch(new URL(window.location.href).origin + \"/turret/23018/\", {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en;q=0.9\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-fetch-dest\": \"empty\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer: new URL(window.location.href).origin + \"/turret/23018/\",\n        body: \"action=metaldetector&__ajax=1&return_url=%2Fturret%2F23018%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n      });\n\n      await fetch(new URL(window.location.href).origin + \"/turret/23018/\", {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer: new URL(window.location.href).origin + \"/turret/23018/\",\n        body: \"action=install\",\n        method: \"POST\",\n        mode: \"cors\",\n        credentials: \"include\",\n      });\n\n      AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n    },\n  },\n  {\n    text: \"\uD83E\uDD3A\",\n    title: \"\u0417\u0430\u043F\u0438\u0441\u044C \u043D\u0430 \u0445\u0430\u043E\u0442 \u0437\u0430 30 \u0441\u0435\u043A\u0443\u043D\u0434 \u0434\u043E \u0431\u043E\u044F, \u043A\u0430\u0436\u0434\u044B\u0435 15 \u043C\u0438\u043D\u0443\u0442.\",\n    onClick: chaoticFightMode,\n  },\n  {\n    text: \"\uD83D\uDC54\",\n    title: \"\u0417\u0430\u043F\u0438\u0441\u044C \u043D\u0430 \u043F\u0440\u043E\u0442.\\n(\u0412\u043E\u043A\u0437\u0430\u043B\u044C\u043D\u044B\u0439)\",\n    onClick: joinProt,\n    disableAfterClick: false,\n  },\n  {\n    text: \"\u26A1\uFE0F\",\n    title: \"\u041F\u0440\u0438\u043B\u0438\u0432 \u0431\u043E\u0434\u0440\u043E\u0441\u0442\u0438 (\u0411\u0430\u043D\u0437\u0430\u0439!).\",\n    onClick: boostClan,\n    disableAfterClick: false,\n  },\n  {\n    text: \"\u26CF\uFE0F\",\n    title: \"\u0421\u043F\u0443\u0441\u043A \u0432 \u043C\u0435\u0442\u0440\u043E \u043A\u0430\u0436\u0434\u044B\u0435 10 \u043C\u0438\u043D\u0443\u0442. (\u041A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u044F \u0428\u0435\u043B\u043A\u0443\u043D\u0447\u0438\u043A)\",\n    onClick: async () => await metroWorkMode(),\n  },\n  {\n    text: \"\uD83D\uDEA9\",\n    title: \"\u0421\u043E\u0431\u0438\u0440\u0430\u0435\u043C \u0434\u0435\u0442\u0430\u043B\u0438 \u0411\u0440\u043E\u043D\u0435\u043F\u043E\u0435\u0437\u0434\u0430 \u0420\u0435\u0432\u043E\u043B\u044E\u0446\u0438\u0438\",\n    onClick: async () => await checkBronikPieces(),\n  },\n  {\n    text: \"\uD83D\uDD73\uFE0F\",\n    title: \"\u041E\u0434\u0438\u043D\u043E\u0447\u043D\u0430\u044F \u043F\u043E\u0434\u0437\u0435\u043C\u043A\u0430, \u0430\u0432\u0442\u043E\u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435\",\n    onClick: startDungeon,\n  },\n];\n\nconst navLinks = [\n  { href: \"/dungeon\", text: \"\uD83D\uDD73\uFE0F \u041F\u043E\u0434\u0437\u0435\u043C\u043A\u0430\" },\n  { href: \"/neftlenin/\", text: \"\uD83D\uDEE2\uFE0F \u041D\u0435\u0444\u0442\u044C\" },\n  { href: \"/metro/\", text: \"\uD83D\uDC00 \u041A\u0440\u044B\u0441\u044B\" },\n  { href: \"/bank/\", text: \"\uD83C\uDFE6 \u0411\u0430\u043D\u043A\" },\n  { href: \"/square/tvtower/\", text: \"\uD83D\uDCFA \u0422\u0412\" },\n  { href: \"/nightclub/\", text: \"\uD83E\uDEA9 \u041A\u043B\u0443\u0431\" },\n  { href: \"/huntclub/wanted/\", text: \"\uD83C\uDFAF \u041E\u041A\" },\n  { href: \"/home/relic/\", text: \"\uD83E\uDDE9 \u0420\u0435\u043B\u0438\u043A\u0442\u044B\" },\n  { href: \"/camp/gypsy/\", text: \"\u2728 \u0426\u044B\u0433\u0430\u043D\u043A\u0430\" },\n  { href: \"/berezka/section/mixed/\", text: \"\uD83D\uDECD\uFE0F \u0411\u0435\u0440\u0435\u0437\u043A\u0430\" },\n  { href: \"/metrowar/clan/\", text: \"\uD83D\uDE87 \u041C\u0435\u0442\u0440\u043E\u0432\u0430\u0440\" },\n  { href: \"/sovet/career/\", text: \"\uD83D\uDC54 \u0413\u043E\u0441\u041F\u0440\u043E\u043C\" },\n  { href: \"/meetings/team/\", text: \"\uD83E\uDEA7 \u041C\u0438\u0442\u044B\" },\n  { href: \"/petarena/\", text: \"\uD83E\uDDAE \u041F\u0435\u0442\u044B\" },\n  { href: \"/squid/\", text: \"\uD83E\uDD91 \u041A\u0430\u043B\u044C\u043C\u0430\u0440\" },\n  { href: \"/travel2/\", text: \"\uD83C\uDF0D \u0420\u0435\u0439\u0434\u044B\" },\n  { href: \"/automobile/ride/\", text: \"\uD83D\uDE95 \u041F\u043E\u0435\u0437\u0434\u043A\u0430\" },\n];\n\nexport function sendAlert({ title, img, text }) {\n  const container = $(\"<div>\").css({\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"flex-start\",\n    gap: \"8px\",\n    borderRadius: \"5px\",\n    overflow: \"hidden\",\n  });\n\n  const message = $(\"<span>\").text(text);\n  const image = $(\"<img>\").attr(\"src\", img).css({\n    width: \"84px\",\n    height: \"84px\",\n    objectFit: \"cover\",\n    objectPosition: \"right\",\n  });\n\n  if (img) {\n    container.append(image);\n  }\n\n  container.append(message);\n\n  showAlert(title, container.prop(\"outerHTML\"));\n}\n\nexport async function renderPanel() {\n  try {\n    let $assistantContainer = $('<div id=\"assistant-container\"></div>').css({\n      position: \"absolute\",\n      display: \"flex\",\n      maxWidth: \"120px\",\n      maxHeight: \"600px\",\n      height: \"auto\",\n      gap: \"20px\",\n      flexDirection: \"column\",\n      alignItems: \"flex-end\",\n      backgroundColor: \"rgb(255, 244, 225)\",\n      top: \"258px\",\n      padding: \"12px 10px\",\n      borderWidth: \"2px\",\n      borderStyle: \"solid\",\n      borderColor: \"rgb(209, 148, 92)\",\n      borderRadius: \"12px\",\n      zIndex: \"999999\",\n    });\n\n    $(\".body-bg\").append($assistantContainer);\n\n    $assistantContainer.hide(); // hidden by default\n    $(document).on(\"click\", () => $assistantContainer.hide());\n\n    $assistantContainer.on(\"click\", (e) => e.stopPropagation());\n\n    $(document).on(\"contextmenu\", (event) => {\n      event.preventDefault();\n      $assistantContainer\n        .css({ left: event.pageX, top: event.pageY })\n        .slideToggle(\"fast\");\n    });\n\n    let $autopilotBtnContainer = $('<div id=\"assistant-autopilot\"></div>').css({\n      display: \"flex\",\n      gap: \"8px\",\n      width: \"100%\",\n      minWidth: \"80px\",\n      flexWrap: \"wrap\",\n      justifyContent: \"space-around\",\n    });\n\n    assistantButtonsProps.forEach(\n      ({ text, title, onClick, condition, disableAfterClick }) => {\n        if (condition === false) return;\n        let $btn = createButton({\n          text,\n          title,\n          onClick,\n          disableAfterClick,\n        });\n\n        $autopilotBtnContainer.append($btn);\n      }\n    );\n\n    $assistantContainer.append($autopilotBtnContainer);\n  } catch (e) {\n    console.log(\"\u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0440\u0438\u0441\u043E\u0432\u0430\u0442\u044C \u043F\u0430\u043D\u0435\u043B\u044C \u043D\u0430\u0432\u0438\u0433\u0430\u0446\u0438\u0438.\\n\", e);\n  }\n}\n\nexport async function renderNavbar() {\n  if ($(\"#navbar-links\").length > 0) return;\n  let $navLinks = $('<div id=\"navbar-links\" class=\"borderdata\"></div>').css({\n    display: \"flex\",\n    position: \"sticky\",\n    top: \"8px\",\n    justifyContent: \"center\",\n    flexWrap: \"wrap\",\n    gap: \"16px 32px\",\n    alignItems: \"center\",\n    padding: \"10px 12px\",\n    zIndex: \"102\",\n    border: \"2px solid #ffd591\",\n    background: \"#f9f6ec\",\n    borderRadius: \"8px\",\n    margin: \"14px\",\n    boxShadow: \"rgba(0, 0, 0, 0.25) 0px 0px 8px 4px\",\n  });\n\n  // const cosmodromeBtn = await getElementsOnThePage(\n  //   \"#square-stadium-button > a\",\n  //   new URL(window.location.href).origin + \"/tverskaya/\"\n  // );\n\n  // const comsodromeOnClickHandler = () => {\n  //   if (cosmodromeBtn) {\n  //     eval(cosmodromeBtn.getAttribute(\"onclick\"));\n  //   }\n  // };\n\n  // links.push({\n  //   text: \"\uD83D\uDE80 \u041A\u043E\u0441\u043C\u043E\u0434\u0440\u043E\u043C\",\n  //   onClick: comsodromeOnClickHandler,\n  // });\n\n  navLinks.forEach(({ href, text, onClick }) => {\n    let $a = $(\"<a></a>\").text(text).css(\"text-decoration\", \"none\");\n\n    if (onClick) {\n      $a.attr(\"href\", \"#\").on(\"click\", (e) => {\n        e.preventDefault();\n        onClick();\n      });\n    } else {\n      $a.attr({ href, onclick: \"return AngryAjax.goToUrl(this, event);\" });\n    }\n\n    $navLinks.append($a);\n  });\n\n  let mainBlock = $(\"#main\");\n  mainBlock.children().eq(1).before($navLinks);\n}\n\nasync function getCurrencyContainer() {\n  let borderdata = await getElementsOnThePage(\n    \".borderdata\",\n    \"/berezka/section/mixed/\"\n  );\n\n  // const playerDocumentResponse = await fetch(new URL(window.location.href).origin + \"/player/\");\n  // const playerDocumentHtmlStr = await playerDocumentResponse.text();\n  // const playerDocument = parseHtml(playerDocumentHtmlStr);\n\n  // const getCount = (selector) => {\n  //   let el = playerDocument.querySelector(selector);\n  //   return el ? el.textContent.trim().slice(1) : \"0\";\n  // };\n\n  // let playerPageCurrency = [\n  //   `<span class=\"travel-pass\">${getCount('img[src=\"/@/images/obj/travel/pass.png\"] + .count')}<i></i></span>&nbsp;`,\n  //   `<span class=\"shuffle2\">${getCount('img[src=\"/@/images/obj/travel/shuffle2.png\"] + .count')}<i></i></span>&nbsp;`,\n  //   `<span class=\"shuffle\">${getCount('img[src=\"/@/images/obj/travel/shuffle.png\"] + .count')}<i></i></span>&nbsp;`,\n  //   `<span class=\"travel-magnet\">${getCount('img[src=\"/@/images/obj/travel/magnet.png\"] + .count')}<i></i></span>&nbsp;`,\n  //   `<span class=\"travel-ticket\">${getCount('img[src=\"/@/images/obj/travel/ticket.png\"] + .count')}<i></i></span>&nbsp;`,\n  // ].map(strToHtml);\n\n  let container = $('<div id=\"currency-container\"></div>');\n  container.css({\n    width: \"100%\",\n    \"min-width\": \"120px\",\n    display: \"flex\",\n    \"flex-wrap\": \"wrap\",\n    gap: \"12px 2px\",\n    \"justify-content\": \"space-between\",\n  });\n\n  const currency = [\n    ...Array.from(borderdata.children),\n    // ...playerPageCurrency,\n  ].map((span) => {\n    const originalText = span.innerText;\n    const number = parseInt(originalText.replace(/[^0-9]/g, \"\"), 10);\n\n    if (!isNaN(number)) {\n      span.title = originalText;\n\n      // format & reinsert the icon\n      span.innerHTML = formatNumber(number) + span.querySelector(\"i\").outerHTML;\n    }\n    $(span).css({\n      display: \"inline-flex\",\n      alignItems: \"center\",\n    });\n\n    return span;\n  });\n\n  container.empty().append(currency);\n  return container;\n}\n\nexport async function redrawMain() {\n  // eslint-disable-next-line\n  if (AngryAjax.getCurrentUrl() !== \"/player/\") {\n    return;\n  }\n\n  if (location.pathname.search(/\\/player\\/$/) !== -1) {\n    initMultiItemUi();\n  }\n\n  function expandInventory() {\n    document.querySelector(\n      \"#content > table.inventary > tbody > tr > td.equipment-cell > div\"\n    ).style.width = \"577px\";\n    document.querySelector(\n      \"#content > table.inventary > tbody > tr > td.equipment-cell > div > dl\"\n    ).style.width = \"577px\";\n    document.querySelector(\n      \"#content > table.inventary > tbody > tr > td.equipment-cell > div > dl > dd\"\n    ).style.width = \"577px\";\n  }\n\n  function expandDopings() {\n    document.querySelector(\"#dopings-accordion\").style.width = \"80px\";\n    document.querySelector(\"#dopings-accordion > dd\").style.width = \"80px\";\n    $(\"#dopings-accordion > dd > .object-thumbs\").css({ height: \"955.5px\" });\n\n    if ($(\".action.use-all-siri\").length) {\n      return;\n    }\n\n    const div = $(`\n      <div class=\"action use-all-siri\"><span>\u043E\u0431\u043C\u0435\u043D \u0432\u0441\u0435</span></div>\n    `);\n\n    div.on(\"click\", async () => {\n      if (div.hasClass(\"disabled\")) return;\n\n      div.addClass(\"disabled\");\n\n      await tradeAllSiri();\n\n      div.removeClass(\"disabled\");\n    });\n\n    $(\n      '.object-thumbs[htab=\"inventory\"] img[src=\"/@/images/obj/phones/siri_64.png\"]'\n    )\n      .parent()\n      .append(div);\n  }\n\n  function expandPetTab() {\n    document.querySelector(\"#pet-accordion\").style.width = \"220px\";\n    document.querySelector(\n      \"#pet-accordion > dd > div.object-thumbs\"\n    ).style.width = \"220px\";\n  }\n\n  function modifyPayEmerald() {\n    const $target = $(`img[data-st='10483']`).closest(\".padding\");\n    const count = parseInt($target.find(\".count\").text().replace(\"#\", \"\"), 10);\n    $target\n      .find(\".action span\")\n      .text(\"\u0432\u043D\u0435\u0441\u0442\u0438 \u0432\u0441\u0435\")\n      .parent()\n      .removeAttr(\"onclick\")\n      .on(\"click\", async () => {\n        await payEmerald(count);\n\n        AngryAjax.reload();\n        sendAlert({\n          title: \"\u0412\u0441\u0435 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n          text: `\u0412\u044B \u0432\u043D\u0435\u0441\u043B\u0438 ${count} \u0438\u0437\u0443\u043C\u0440\u0443\u0434\u043E\u0432.`,\n          img: \"/@/images/obj/clan/emerald.png\",\n        });\n      });\n  }\n\n  function sortInventory() {\n    const topItems = [14820, 10292, 8799, 813, 10097, 14730, 3347, 4020];\n    const container = $('.htabs-submenu[rel=\"inventory\"]').first();\n    const fragments = $();\n\n    topItems.forEach((id) => {\n      const item = $(`.object-thumb:has(img[data-st='${id}'])`);\n      if (item.length) fragments.push(item[0]);\n    });\n\n    container.after(fragments);\n  }\n\n  // eslint-disable-next-line no-undef\n  const inventoryContainer = document.querySelector(\n    \"#content > table.inventary > tbody > tr > td.equipment-cell > div > dl > dd > div:nth-child(1)\"\n  );\n\n  expandDopings();\n  expandInventory();\n  expandPetTab();\n  initMultiItemUi();\n  initEatDops();\n  modifyPayEmerald();\n\n  setTimeout(sortInventory, 500);\n\n  if (inventoryContainer && inventoryContainer.offsetHeight < 300) {\n    console.log(\"[i] toggle inventory expand\");\n    // eslint-disable-next-line\n    inventaryExpand.toggle();\n  }\n\n  // removePetTab();\n}\n\nvar initMultiItemUi = function () {\n  if (typeof localStorage[\"mw_alerts\"] == \"undefined\") {\n    localStorage[\"mw_alerts\"] = \"[]\";\n  }\n  let alertsData = JSON.parse(localStorage[\"mw_alerts\"]);\n  if (alertsData.length > 0) {\n    for (var i in alertsData) {\n      showAlert(\"\u041E\u043F\u043E\u0432\u0435\u0449\u0435\u043D\u0438\u0435\", alertsData[i]);\n    }\n    alertsData = [];\n    localStorage[\"mw_alerts\"] = \"[]\";\n  }\n\n  window.parseData = function (data, st) {\n    var a = JSON.parse(data);\n    console.log(a);\n    var al = new Array();\n    for (var j in a.alerts) {\n      al.push(a.alerts[j].text);\n    }\n    for (var i in a.inventory) {\n      if (\"inventory-\" + a.inventory[i].code + \"-btn\" == st) {\n        var obj = { id: a.inventory[i].id, alerts: al };\n        return obj;\n      }\n    }\n    var obj = { alerts: al };\n    return obj;\n  };\n\n  window.parseDataItem = function (data, st) {\n    var a = JSON.parse(data);\n    console.log(a);\n    var al = new Array();\n    for (var j in a.alerts) {\n      al.push(a.alerts[j].text);\n    }\n    for (var i in a.inventory) {\n      if (\"/@/images/obj/\" + a.inventory[i].image == st) {\n        var obj = { id: a.inventory[i].id, alerts: al };\n        return obj;\n      }\n    }\n    var obj = { alerts: al };\n    return obj;\n  };\n\n  window.buyNextGift = function (num, id, st, action, title, sp) {\n    if (typeof title == \"undefined\") {\n      title = \"\u041F\u043E\u0434\u0430\u0440\u043E\u043A\";\n    }\n    if (num > 0) {\n      $.get(\"/player/json/\" + action + \"/\" + id + \"/\", function (data) {\n        moswar.showPopup(title + \" \u043E\u0442\u043A\u0440\u044B\u0442!\", \"\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C: \" + (num - 1), 4000);\n        var obj = parseData(data, st);\n        if (typeof obj.id != \"undefined\") {\n          var a = JSON.parse(localStorage[\"mw_alerts\"]);\n          for (var i in obj.alerts) {\n            a.push(obj.alerts[i]);\n          }\n          localStorage[\"mw_alerts\"] = JSON.stringify(a);\n          buyNextGift(num - 1, obj.id, st, action, title, sp);\n        } else {\n          var a = JSON.parse(localStorage[\"mw_alerts\"]);\n          for (var i in obj.alerts) {\n            a.push(obj.alerts[i]);\n          }\n          localStorage[\"mw_alerts\"] = JSON.stringify(a);\n          if (sp == \"1\") {\n            localStorage[\"listGiftsN\"] = Number(localStorage[\"listGiftsN\"]) - 1;\n            if (Number(localStorage[\"listGiftsN\"]) < 1) {\n              setTimeout(\"AngryAjax.goToUrl('/player/');\", 1000);\n            }\n          } else {\n            setTimeout(\"AngryAjax.goToUrl2('/player/');\", 2000);\n          }\n        }\n      });\n    } else {\n      if (sp == \"1\") {\n        localStorage[\"listGiftsN\"] = Number(localStorage[\"listGiftsN\"]) - 1;\n        if (Number(localStorage[\"listGiftsN\"]) < 1) {\n          setTimeout(\"AngryAjax.goToUrl2('/player/');\", 1000);\n        }\n      } else {\n        setTimeout(\"AngryAjax.goToUrl2('/player/');\", 2000);\n      }\n    }\n  };\n\n  var buyNextItem = function (num, id, st, action, title, sp) {\n    if (typeof title == \"undefined\") {\n      title = \"\u041F\u0440\u0435\u0434\u043C\u0435\u0442\";\n    }\n    if (num > 0) {\n      $.get(\"/player/json/\" + action + \"/\" + id + \"/\", function (data) {\n        moswar.showPopup(title + \" \u043E\u0442\u043A\u0440\u044B\u0442!\", \"\u041E\u0441\u0442\u0430\u043B\u043E\u0441\u044C: \" + (num - 1), 4000);\n        var obj = parseDataItem(data, st);\n        if (typeof obj.id != \"undefined\") {\n          var a = JSON.parse(localStorage[\"mw_alerts\"]);\n          for (var i in obj.alerts) {\n            a.push(obj.alerts[i]);\n          }\n          localStorage[\"mw_alerts\"] = JSON.stringify(a);\n          buyNextItem(num - 1, obj.id, st, action, title, sp);\n        } else {\n          var a = JSON.parse(localStorage[\"mw_alerts\"]);\n          for (var i in obj.alerts) {\n            a.push(obj.alerts[i]);\n          }\n          localStorage[\"mw_alerts\"] = JSON.stringify(a);\n          if (sp == \"1\") {\n            localStorage[\"listGiftsN\"] = Number(localStorage[\"listGiftsN\"]) - 1;\n            if (Number(localStorage[\"listGiftsN\"]) < 1) {\n              setTimeout(\"AngryAjax.goToUrl2('/player/');\", 1000);\n            }\n          } else {\n            setTimeout(\"AngryAjax.goToUrl2('/player/');\", 2000);\n          }\n        }\n      });\n    } else {\n      if (sp == \"1\") {\n        localStorage[\"listGiftsN\"] = Number(localStorage[\"listGiftsN\"]) - 1;\n        if (Number(localStorage[\"listGiftsN\"]) < 1) {\n          setTimeout(\"AngryAjax.goToUrl2('/player/');\", 1000);\n        }\n      } else {\n        setTimeout(\"AngryAjax.goToUrl2('/player/');\", 2000);\n      }\n    }\n  };\n\n  window.multOpenGift = function (gift) {\n    var id = $(gift).parent().parent().find(\"img\").attr(\"data-id\");\n    var type = $(gift).parent().parent().find(\".action\").attr(\"id\");\n    var act = $(gift).parent().parent().find(\".action\").attr(\"data-action\");\n    var b = [];\n    b.push({\n      title: \"\u041E\u0442\u043A\u0440\u044B\u0442\u044C\",\n      callback: function (obj) {\n        alertsData = [];\n        buyNextGift(\n          $(\"#multbuy\").attr(\"value\"),\n          id,\n          type,\n          act,\n          m.items[id].info.title,\n          \"0\"\n        );\n        closeAlert(obj);\n      },\n    });\n    b.push({ title: \"\u041E\u0442\u043C\u0435\u043D\u0430\", callback: null });\n    showConfirm(\n      '<p align=\"center\">\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: <input id=\"multbuy\" value=\"' +\n        $(gift).parent().parent().find(\".count\").text().replace(/#/gi, \"\") +\n        '\"></p>',\n      b,\n      { __title: \"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043C\u043D\u043E\u0433\u043E :)\" }\n    );\n  };\n\n  window.multOpenItem = function (gift) {\n    var id = $(gift).parent().parent().find(\"img\").attr(\"data-id\");\n    var type = $(gift).parent().parent().find(\"img\").attr(\"src\");\n    var act = $(gift).parent().parent().find(\".action\").attr(\"data-action\");\n    var b = [];\n    b.push({\n      title: \"\u041E\u0442\u043A\u0440\u044B\u0442\u044C\",\n      callback: function (obj) {\n        alertsData = [];\n        buyNextItem(\n          $(\"#multbuy\").attr(\"value\"),\n          id,\n          type,\n          act,\n          m.items[id].info.title,\n          \"0\"\n        );\n        closeAlert(obj);\n      },\n    });\n    b.push({ title: \"\u041E\u0442\u043C\u0435\u043D\u0430\", callback: null });\n    showConfirm(\n      '<p align=\"center\">\u041A\u043E\u043B\u0438\u0447\u0435\u0441\u0442\u0432\u043E: <input id=\"multbuy\" value=\"' +\n        $(gift).parent().parent().find(\".count\").text().replace(/#/gi, \"\") +\n        '\"></p>',\n      b,\n      { __title: \"\u041E\u0442\u043A\u0440\u044B\u0442\u044C \u043C\u043D\u043E\u0433\u043E :)\" }\n    );\n  };\n\n  window.initializePlayerPageEnhancements = function () {\n    window.enhancePetItems();\n    window.enhanceEquipmentItems();\n    window.handleInventoryEnhancements();\n  };\n\n  window.enhancePetItems = function () {\n    $('.object-thumb img[data-type=\"pet\"]').each(function () {\n      const petElement = $(this);\n      const actionElement = petElement.parent().find(\".action\");\n      if (actionElement.attr(\"onclick\").match(/train\\/\\d+\\/'/)) {\n        const petId = petElement.attr(\"data-id\");\n        const petTitle = m.items[petId].info.title.replace(/\"/g, \"\");\n        const petActiveMessage = `\u0412\u0430\u0448 \u043F\u0438\u0442\u043E\u043C\u0435\u0446 ${petTitle} \u0441\u0434\u0435\u043B\u0430\u043D \u0430\u043A\u0442\u0438\u0432\u043D\u044B\u043C!`;\n        const onClickAction = `petarenaSetActive(${petId}, 'battle'); moswar.showPopup('\u041F\u0438\u0442\u043E\u043C\u0435\u0446', '${petActiveMessage}', 5000);`;\n        const petActionHtml = `\n          <div style=\"position: absolute\">\n            <span class=\"agree\" onclick=\"${onClickAction}\" style=\"cursor: pointer\">\n              <i></i>\n            </span>\n          </div>`;\n        petElement.parent().prepend(petActionHtml);\n      }\n    });\n  };\n\n  window.enhanceEquipmentItems = function () {\n    $('.equipment-cell .object-thumb .action[data-action=\"use\"]').each(\n      function () {\n        const actionElement = $(this);\n        if (\n          actionElement.prev(\".multi-open\").length === 0 &&\n          actionElement.next(\".multi-open\").length === 0\n        ) {\n          const multiOpenHtml = `\n          <b class=\"multi-open\" style=\"cursor: pointer; background-color: #fdf179; color: green; font-size: 11px; position: absolute; margin: 0 1px;\" onclick=\"multOpenItem(this);\">\n            [#]\n          </b>`;\n          actionElement.parent().prepend(multiOpenHtml);\n        }\n      }\n    );\n\n    $('.equipment-cell .object-thumb img[data-type=\"gift\"]').each(function () {\n      const giftElement = $(this);\n      if (\n        giftElement.prev(\".multi-open\").length === 0 &&\n        giftElement.next(\".count\").length === 1\n      ) {\n        const multiOpenHtml = `\n          <b class=\"multi-open\" style=\"cursor: pointer; background-color: #fdf179; color: green; font-size: 11px; position: absolute; margin: 0 1px;\" onclick=\"multOpenGift(this);\">\n            [#]\n          </b>`;\n        giftElement.before(multiOpenHtml);\n      }\n    });\n  };\n\n  window.handleInventoryEnhancements = function () {\n    setTimeout(() => {\n      moveInventoryItemsToCategories();\n    }, 150);\n  };\n\n  window.moveInventoryItemsToCategories = function () {\n    const inventorySelector = '.object-thumbs[htab=\"inventory\"]';\n    const clothesSelector = '.object-thumbs[htab=\"clothes\"]';\n\n    $(`${inventorySelector} img[src$=\"box_perfume.png\"], \n       ${inventorySelector} img[src$=\"gift-wolf.png\"], \n       ${inventorySelector} img[src$=\"gold_phone_cert.png\"], \n       ${inventorySelector} img[src$=\"eye_phone_cert.png\"]`)\n      .parents(\".object-thumb\")\n      .appendTo(inventorySelector);\n\n    $(`${clothesSelector} img[data-type=\"talisman\"], \n       ${clothesSelector} img[data-type=\"cologne\"]`)\n      .parents(\".object-thumb\")\n      .prependTo(clothesSelector);\n\n    $(`${clothesSelector} img[data-type=\"phone\"]`)\n      .parents(\".object-thumb\")\n      .appendTo(clothesSelector);\n  };\n\n  if (location.pathname.endsWith(\"/player/\")) {\n    eval(\n      \"AngryAjax.goToUrl2 = \" +\n        AngryAjax.goToUrl.toString().replace(\"url = url.replace('#', '');\", \"\")\n    );\n    initializePlayerPageEnhancements();\n  }\n};\n\nvar initEatDops = function () {\n  if (typeof window.GM_deleteValue === \"undefined\") {\n    window.GM_addStyle = (css) => {\n      const style = document.createElement(\"style\");\n      style.textContent = css;\n      document.head.appendChild(style);\n    };\n\n    window.GM_deleteValue = (name) => {\n      localStorage.removeItem(name);\n    };\n\n    window.GM_getValue = (name, defaultValue) => {\n      const value = localStorage.getItem(name);\n      if (value === null) return defaultValue;\n\n      const type = value.charAt(0);\n      const rawValue = value.slice(1);\n\n      switch (type) {\n        case \"b\":\n          return rawValue === \"true\";\n        case \"n\":\n          return Number(rawValue);\n        default:\n          return rawValue;\n      }\n    };\n\n    window.GM_log = (message) => {\n      console.log(message);\n    };\n\n    window.GM_openInTab = (url) => {\n      window.open(url, \"_blank\");\n    };\n\n    window.GM_registerMenuCommand = (name, func) => {\n      // Stub function: Add implementation if needed\n    };\n\n    window.GM_setValue = (name, value) => {\n      let typePrefix;\n\n      if (typeof value === \"boolean\") {\n        typePrefix = \"b\";\n      } else if (typeof value === \"number\") {\n        typePrefix = \"n\";\n      } else if (typeof value === \"string\") {\n        typePrefix = \"s\";\n      } else {\n        throw new Error(\"Unsupported value type\");\n      }\n\n      const prefixedValue = `${typePrefix}${value}`;\n      localStorage.setItem(name, prefixedValue);\n    };\n  }\n\n  function getCurrentLocation() {\n    var spans = $(\".heading:first h2 span\");\n    var cur_loc =\n      spans.length > 0\n        ? spans[0].getAttribute(\"class\")\n        : $(\".heading:first h2\").html();\n    return cur_loc;\n  }\n\n  function getRealDoc() {\n    var myframe = top.document.getElementById(\"game-frame\");\n    if (myframe) {\n      return myframe.contentWindow.document;\n    } else {\n      return top.document;\n    }\n  }\n\n  function renderEatDopsButton() {\n    const dopingAccordion = Adoc.getElementById(\"dopings-accordion\");\n\n    if (\n      !Adoc.getElementById(\"eat-button\") &&\n      getCurrentLocation() === \"pers\" &&\n      dopingAccordion\n    ) {\n      const eatButton = document.createElement(\"div\");\n      eatButton.className = \"button\";\n      eatButton.id = \"eat-button\";\n      eatButton.innerHTML = `\n        <span class=\"f\">\n          <i class=\"rl\"></i>\n          <i class=\"bl\"></i>\n          <i class=\"brc\"></i>\n          <div id=\"aicheck\" class=\"c\">\u041E\u0431\u043E\u0436\u0440\u0430\u0442\u044C\u0441\u044F</div>\n        </span>\n      `;\n\n      $('div[htab=\"dopings\"]').before(eatButton);\n\n      eatButton.addEventListener(\"click\", selectDops, false);\n\n      setTimeout(() => {\n        eatDops();\n      }, 1000);\n    }\n  }\n\n  function selectDops() {\n    if (\n      getCurrentLocation() == \"pers\" &&\n      Adoc.getElementById(\"dopings-accordion\")\n    ) {\n      var eatD = document.createElement(\"DIV\");\n      eatD.setAttribute(\"style\", \"display: block; top: 300px; width: 468px;\");\n      eatD.setAttribute(\"class\", \"alert  alert1\");\n      eatD.id = \"alert-main\";\n      var padding = document.createElement(\"DIV\");\n      padding.setAttribute(\"class\", \"padding\");\n      eatD.appendChild(padding);\n      var h2 = document.createElement(\"H2\");\n      h2.innerHTML =\n        \"\\u0412\\u044b\\u0431\\u0440\\u0430\\u0442\\u044c \\u0434\\u043e\\u043f\\u044b\";\n      padding.appendChild(h2);\n      var dataDiv = document.createElement(\"DIV\");\n      dataDiv.setAttribute(\"class\", \"data\");\n      var div1 = document.createElement(\"DIV\");\n      dataDiv.appendChild(div1);\n      padding.appendChild(dataDiv);\n      var tempNode = Adoc.getElementById(\"dopings-accordion\").cloneNode(true);\n      var dops = tempNode.getElementsByClassName(\"object-thumb\");\n      while (dops.length > 0) {\n        var backGroundDiv = document.createElement(\"DIV\");\n        backGroundDiv.setAttribute(\n          \"style\",\n          \"margin: 4px 1px 2px 2px;height: 72px; width: 72px;float:left;\"\n        );\n        backGroundDiv.setAttribute(\"name\", \"backGroundDiv\");\n        var actionDiv = dops[0].getElementsByClassName(\"action\")[0];\n        var imgDiv = dops[0]\n          .getElementsByClassName(\"padding\")[0]\n          .getElementsByTagName(\"img\")[0];\n        if (actionDiv) {\n          if (actionDiv.className == \"action disabled\") {\n            backGroundDiv.style.backgroundColor = \"red\";\n          } else {\n            var actionJS =\n              \"$.get('/player/json/\" +\n              actionDiv.getAttribute(\"data-action\") +\n              \"/\" +\n              imgDiv.getAttribute(\"data-id\") +\n              \"/', function(){moswar.showPopup('\u0413\u043E\u0442\u043E\u0432\u043E',m.items[\" +\n              imgDiv.getAttribute(\"data-id\") +\n              \"].info.title, 2000);GM_setValue('listDopsN', Number(GM_getValue('listDopsN', ''))-1);if(Number(GM_getValue('listDopsN', ''))<1) {AngryAjax.goToUrl('/player/');}})\";\n            backGroundDiv.setAttribute(\"rel\", actionJS);\n            backGroundDiv.addEventListener(\n              \"click\",\n              function () {\n                onClickBackGroundDiv(this);\n              },\n              false\n            );\n          }\n          dops[0].getElementsByClassName(\"padding\")[0].removeChild(actionDiv);\n        }\n        dops[0].setAttribute(\"style\", \"margin: 2px 2px 2px 2px;height: 68px;\");\n        backGroundDiv.appendChild(dops[0]);\n        div1.appendChild(backGroundDiv);\n      }\n      var actionDiv = document.createElement(\"DIV\");\n      actionDiv.setAttribute(\"class\", \"actions\");\n      actionDiv.setAttribute(\"style\", \"clear: both;\");\n      var OKButton = document.createElement(\"DIV\");\n      OKButton.setAttribute(\"class\", \"button\");\n      OKButton.innerHTML =\n        '<span class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\">\\u041e\\u041a</div></span>';\n      var CancelButton = document.createElement(\"DIV\");\n      CancelButton.setAttribute(\"class\", \"button\");\n      CancelButton.innerHTML =\n        '<span class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\">\\u041e\\u0442\\u043c\\u0435\\u043d\\u0430</div></span>';\n      actionDiv.appendChild(OKButton);\n      actionDiv.appendChild(CancelButton);\n      dataDiv.appendChild(actionDiv);\n      Adoc.body.appendChild(eatD);\n      CancelButton.addEventListener(\n        \"click\",\n        function () {\n          Adoc.body.removeChild(Adoc.getElementById(\"alert-main\"));\n        },\n        false\n      );\n      OKButton.addEventListener(\"click\", createListDops, false);\n    }\n  }\n  function createListDops() {\n    var backGroundDivs = Adoc.getElementsByName(\"backGroundDiv\");\n    var result = \"\";\n    for (var i = 0; i < backGroundDivs.length; i++) {\n      if (backGroundDivs[i].style.backgroundColor == \"green\") {\n        result += backGroundDivs[i].getAttribute(\"rel\") + \"#|#\";\n      }\n    }\n    result = result.substring(0, result.length - 3);\n    GM_setValue(\"listDops\", result);\n    GM_setValue(\"listDopsN\", result.split(\"#|#\").length);\n    Adoc.body.removeChild(Adoc.getElementById(\"alert-main\"));\n    eatDops();\n  }\n  function onClickBackGroundDiv(obj) {\n    obj.style.backgroundColor =\n      obj.style.backgroundColor == \"green\" ? \"transparent\" : \"green\";\n  }\n  function eatDops() {\n    var listDops = GM_getValue(\"listDops\", \"\");\n    if (listDops) {\n      var codeBlocks = listDops.split(\"#|#\");\n      var codeBlock = codeBlocks[0];\n      var cl = codeBlocks.length;\n      eval(codeBlock);\n      codeBlocks.shift();\n      //      log(cl);\n      if (!codeBlocks[0]) {\n        GM_setValue(\"listDops\", \"\");\n        //        setTimeout(\"AngryAjax.goToUrl2('/player/');$('#log').html('');\", 1E3)\n      } else {\n        GM_setValue(\"listDops\", codeBlocks.join(\"#|#\"));\n        setTimeout(function () {\n          eatDops();\n        }, 1e3);\n      }\n    }\n  }\n\n  var Adoc = getRealDoc();\n  renderEatDopsButton();\n};\n\nexport function renderCandyCountdown() {\n  function parseDate(dateString) {\n    const datePattern = /^(\\d\\d).(\\d\\d).(\\d{4}) (\\d\\d):(\\d\\d)$/;\n    const match = datePattern.exec(dateString);\n    if (match) {\n      const [_, day, month, year, hours, minutes] = match;\n      return new Date(\n        Date.UTC(year, month - 1, day, hours - 3, minutes, 59) // Moscow is UTC+3\n      );\n    }\n    return null;\n  }\n\n  function initializeCountdown() {\n    let timerSeconds = 0;\n    let endTime = 0;\n\n    const findCandyExpiration = async (candyName) => {\n      const candyElement = $(\".help\").find(`.brown:contains(\"${candyName}\")`);\n      if (candyElement.length > 0) {\n        const expirationText = candyElement.html().split(\"\u0434\u043E \")[1];\n        if (expirationText) {\n          localStorage[\"candyExpiration\"] = expirationText.split(\" \u2014\")[0];\n        }\n      }\n    };\n\n    findCandyExpiration(\"\u041A\u043E\u043D\u0444\u0435\u0442\u0430 \u00AB\u0423\u043C\u043D\u0430\u044F\u00BB\");\n    findCandyExpiration(\"\u041A\u043E\u043D\u0444\u0435\u0442\u0430 \u00AB\u0413\u043B\u0443\u043F\u0430\u044F\u00BB\");\n\n    if (localStorage[\"candyExpiration\"]) {\n      const serverTime = Number($(\"#servertime\").attr(\"rel\"));\n      const candyEndDate = parseDate(localStorage[\"candyExpiration\"]);\n      if (candyEndDate) {\n        endTime = Math.round(candyEndDate.getTime() / 1000); // Convert to seconds\n        timerSeconds = endTime - serverTime;\n      }\n    }\n\n    if (timerSeconds < 0) timerSeconds = 0;\n\n    if (!$(\"#candyTimer\")[0] && timerSeconds > 0) {\n      $(\"#personal\").prepend(\n        `<span id=\"candyTimer\" style=\"position:absolute;top: -11px;left: 46px;padding: 2px;background-color:rgb(255, 227, 179);border-radius: 8px;border-bottom-right-radius: 0px;border-bottom-left-radius: 0px;border: 2px solid rgb(240 114 53);\">\n          <span style=\"display: flex; gap: 2px;\" class=\"expa\"><i></i><b id=\"countdownTimer\" timer=\"${10}\" endtime=\"${endTime}\"></b></span>\n        </span>`\n      );\n\n      countdown(\"#countdownTimer\", 0, false, async function () {\n        await eatSilly();\n      });\n      countdown(\"#countdownTimer\", 0);\n    }\n  }\n\n  initializeCountdown();\n}\n\nexport function LEGACY_initGroupFightLogs() {\n  if (\n    typeof window.localStorage.OptionsVar == \"undefined\" ||\n    window.localStorage.OptionsVar == null\n  ) {\n    window.localStorage.OptionsVar = JSON.stringify({ f_pickabil: \"u\" });\n  }\n  var OptionsVar = JSON.parse(window.localStorage.OptionsVar);\n\n  if (location.pathname.search(/^\\/fight/) !== -1) {\n    // eslint-disable-next-line\n    function drawUserLogs() {\n      const fightLogs = JSON.parse(window.sessionStorage.fightLog);\n      const currentStep = parseInt(\n        $(\".block-rounded\").find(\".current\").text(),\n        10\n      );\n\n      if (OptionsVar[\"f_hidedead\"]) {\n        $(\".list-users\").find(\".dead\").remove();\n      }\n\n      for (const userName in fightLogs) {\n        if (userName === \"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439[??]\") {\n          $(\".log\")\n            .find(\".log-panel\")\n            .append(\n              `<div class=\"fight-log\">${fightLogs[userName].Turns}</div>`\n            );\n          continue;\n        }\n\n        let activeIconsHtml = \"\";\n        let counterIconsHtml = \"\";\n\n        for (const weaponKey in awpn) {\n          if (weaponKey in fightLogs[userName]) {\n            const weaponLog = fightLogs[userName][weaponKey];\n            let remainingTurns = 0;\n\n            if (weaponKey === \"Hamsters\") {\n              remainingTurns = weaponLog.Turns;\n            } else {\n              remainingTurns = weaponLog.Turns - (currentStep - weaponLog.Step);\n              remainingTurns =\n                remainingTurns > 0 && remainingTurns <= weaponLog.Turns\n                  ? remainingTurns\n                  : 0;\n            }\n\n            if (remainingTurns > 0) {\n              activeIconsHtml += awpn[weaponKey].image;\n              if (remainingTurns > 1) {\n                activeIconsHtml += `<small>${remainingTurns}</small>`;\n              }\n            }\n\n            if (\"cnt\" in weaponLog) {\n              counterIconsHtml += `\n                <div style=\"display: inline-block; margin: 6px 0;\">\n                  ${awpn[weaponKey].image}\n                  <small style=\"margin-top: -3px; display: block; position: absolute;\">\n                    #${weaponLog.cnt}\n                  </small>\n                </div>`;\n            }\n          }\n        }\n\n        if (activeIconsHtml || counterIconsHtml) {\n          const userElement = $(\"#fightGroupForm\")\n            .find(`.user:contains(\"${userName}\")`)\n            .first();\n\n          if (activeIconsHtml) {\n            userElement.addClass(\"fight-log\").prepend(`${activeIconsHtml}<br>`);\n          }\n\n          if (counterIconsHtml) {\n            userElement.parent().append(`\n                <br>\n                <div class=\"fight-log cnt\" style=\"position: absolute; margin-top: -10px;\">\n                  ${counterIconsHtml}\n                </div>\n                <div style=\"height: 20px;\"></div>\n              `);\n          }\n        }\n      }\n    }\n\n    /* eslint-disable */\n    function fightAnalyze() {\n      const fightId = location.href.split(\"/\")[2];\n      const currentStep = parseInt(\n        $(\".block-rounded\").find(\".current\").text(),\n        10\n      );\n      const sessionData = window.sessionStorage;\n\n      // Initialize session storage\n      if (\n        fightId !== sessionData.FightId ||\n        !sessionData.fightLog ||\n        sessionData.fightLog === \"undefined\"\n      ) {\n        sessionData.FightId = fightId;\n        sessionData.fightLog = JSON.stringify({});\n      }\n\n      var fightLog = JSON.parse(window.sessionStorage.fightLog),\n        step = $(\".block-rounded\").find(\".current\").text(),\n        nik = \"\",\n        slog = \"\";\n      if (\n        $(\".group\")\n          .text()\n          .search(/\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439/) !== -1\n      ) {\n        var izNik = \"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439\" + String.fromCharCode(160) + \"[??]\";\n        fightLog[\"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439[??]\"] = { Turns: \"\", Step: step };\n      }\n\n      if ($(\".group\").text().includes(\"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439\")) {\n        const specialNik = `\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439\u00A0[??]`;\n        fightLog[specialNik] = { Turns: \"\", Step: currentStep };\n      }\n\n      function updateFightLog(nik, weapon, step, turns, slog) {\n        nik = nik.match(/(.{1,20})\\s(\\[.+?\\])/);\n        const cleanNik = nik ? `${nik[1]}${nik[2]}` : null;\n        if (!cleanNik) return;\n\n        // Special handling for specific nik\n        if (cleanNik === \"\u0418\u0437\u0431\u0440\u0430\u043D\u043D\u044B\u0439[??]\" && turns !== \"-1\") {\n          fightLog[cleanNik].Turns += slog === \"#\" ? slog : `<br>${slog}`;\n          return;\n        }\n\n        fightLog[cleanNik] = fightLog[cleanNik] || {};\n        fightLog[cleanNik][weapon] = fightLog[cleanNik][weapon] || {};\n\n        const weaponLog = fightLog[cleanNik][weapon];\n\n        if (slog === \"#\") {\n          weaponLog.cnt = \"#\";\n          return;\n        }\n\n        if (weapon === \"Hamshams\") {\n          fightLog[cleanNik].Hamsters = fightLog[cleanNik].Hamsters || {\n            Turns: \"0\",\n          };\n          fightLog[cleanNik].Hamsters.Turns =\n            parseInt(fightLog[cleanNik].Hamsters.Turns, 10) +\n            parseInt(turns, 10);\n          return;\n        }\n\n        weaponLog.Step = step;\n        weaponLog.Turns = turns;\n\n        if (awpn[weapon].cnt) {\n          weaponLog.cnt = weaponLog.cnt ? weaponLog.cnt + 1 : 1;\n          weaponLog.Steps = weaponLog.Steps || [];\n          if (!weaponLog.Steps.includes(step)) weaponLog.Steps.push(step);\n        }\n      }\n\n      function findNik(item, pn, weapon) {\n        const izNikWeapons = [\n          \"Hamsters\",\n          \"Snake\",\n          \"superhit6\",\n          \"MadTrump\",\n          \"totem\",\n          \"Knockout\",\n        ];\n        let sn,\n          relatedItem = null;\n\n        switch (pn) {\n          case \"f\":\n            sn = $(item)\n              .find('[class^=\"name-\"]')\n              .first()\n              .text()\n              .match(/(.+?\\[.+?\\])/);\n            break;\n          case \"l\":\n            sn = $(item)\n              .find('[class^=\"name-\"]')\n              .last()\n              .text()\n              .match(/(.+?\\[.+?\\])/);\n            break;\n          case \"et\":\n            relatedItem = $(item).next();\n            while (!relatedItem.is(\".easytarget\"))\n              relatedItem = relatedItem.next();\n            sn = findNik(relatedItem, \"f\", weapon);\n            break;\n          case \"h\":\n          case \"hh\":\n            relatedItem = findPreviousKickLog(item);\n            if (relatedItem.text().includes(\"\u043E\u0442\u043F\u0440\u0443\u0436\u0438\u043D\u0438\u0432\u0430\u0435\u0442 \u0443\u0434\u0430\u0440\")) {\n              sn = findNik(relatedItem, pn === \"h\" ? \"f\" : \"l\", weapon);\n            } else {\n              sn = findNik(relatedItem, pn === \"h\" ? \"l\" : \"f\", weapon);\n            }\n            break;\n          default:\n            break;\n        }\n\n        if (sn && sn[1] === izNik && izNikWeapons.includes(weapon)) {\n          slog = `<small>${\n            relatedItem\n              .text()\n              .replace(/\\s{2,}/g, \" \")\n              .match(/^\\d?([\\s\\S]+?\\][\\s\\S]+?\\])/)[1]\n          }</small>`;\n        }\n\n        return sn;\n      }\n\n      function findPreviousKickLog(item) {\n        let prevItem = $(item).prev();\n        while (true) {\n          const text = prevItem.text();\n          const containsMultipleBrackets = text.match(/\\[.+?\\]/g)?.length > 1;\n          if (\n            containsMultipleBrackets &&\n            !text.match(/\u0437\u043C\u0435\u044F|\u0422\u0435\u0441\u043B\u0430|\u0434\u0440\u0430\u043A\u043E\u043D|\u041D\u043E\u0447\u043D\u043E\u0439 \u0441\u0442\u0440\u0430\u0436/)\n          )\n            break;\n          prevItem = prevItem.prev();\n        }\n        return prevItem;\n      }\n\n      // Process fight log\n      const fightLogItems = $(\"#fightGroupForm\").find(\".fight-log\");\n      for (const weapon in awpn) {\n        const { fstr, cnt, pn, turns } = awpn[weapon];\n        if (fstr) {\n          fightLogItems.find(fstr).each(function () {\n            let nik = findNik(this, pn, weapon);\n            if (!nik) {\n              nik = findNik(this, pn === \"l\" ? \"f\" : \"l\", weapon);\n            }\n            if (nik) {\n              updateFightLog(\n                nik[1],\n                weapon,\n                currentStep,\n                turns ||\n                  $(this)\n                    .text()\n                    .match(/\\s(\\d)\\s/)[1],\n                slog || \"\"\n              );\n            }\n          });\n        }\n      }\n\n      // Special handling for bikes\n      fightLogItems.find('.text:contains(\"\u0411\u0430\u0439\u043A \")').each(function () {\n        const bikeLogs = $(this)\n          .text()\n          .match(/\u0411\u0430\u0439\u043A\\s.+?\u043E\u0433\u043B\u0443\u0448\u0430\u0435\u0442.+?\\[.+?\\]/g);\n        if (bikeLogs) {\n          bikeLogs.forEach((log) => {\n            const nik = log.match(/\u043E\u0433\u043B\u0443\u0448\u0430\u0435\u0442\\s(.+?\\[.+?\\])/)[1];\n            const bikeSlog = nik === izNik ? `<small>${log}</small>` : \"\";\n            updateFightLog(nik, \"Bike\", currentStep, \"1\", bikeSlog);\n          });\n        }\n      });\n\n      // Save the updated fight log\n      sessionData.fightLog = JSON.stringify(fightLog);\n    }\n\n    //---\u0443\u043A\u0443\u0441 \u043E\u043C\u043E\u043D-------------\n    //\u0430\u0431\u0438\u043B\u043A\u0438: '-1' - \u0434\u043E\u0433, '-65' - \u0434\u043E\u0433\u0444\u0443\u043B\u043B, '59' - \u043E\u043C\u043E\u043D;  /\u043D\u0430 \u0438\u0437\u0435: '148' - \u0414\u0435\u0436\u0430\u0432\u044E, '155' - \u041F\u043E\u0437\u0432\u0430\u0442\u044C \u041D\u0430\u043F\u0430\u0440\u043D\u0438\u043A\u0430, '146' - \u041D\u0443\u0436\u043D\u043E \u0431\u043E\u043B\u044C\u0448\u0435 \u0410\u0433\u0435\u043D\u0442\u043E\u0432\n    var abl = [\"148\", \"-1\", \"-65\", \"59\", \"155\", \"146\"]; //\u043F\u043E\u0440\u044F\u0434\u043E\u043A \u043F\u0440\u043E\u0432\u0435\u0440\u043A\u0438 \u0430\u0431\u0438\u043B\u043E\u043A, \u0435\u0441\u043B\u0438 \u0432\u044B\u0431\u0440\u0430\u043D\u043E \u0442\u043E \u0447\u0435\u0433\u043E \u043D\u0435\u0442\n    // eslint-disable-next-line\n    function autokick(useabl) {\n      if (document.getElementById(\"sign_kick\") == null) {\n        document.getElementById(\"useabl-\" + useabl).click();\n        if (OptionsVar[\"f_autokick\"]) {\n          $(\"#fightAction\").find(\"button\").click();\n          $(\"#useabl-\" + useabl)\n            .parents(\"label\")\n            .find(\"img\")\n            .attr(\"style\", \"filter:contrast(2.0)\");\n          $(\"#f_autokick\").prop(\"checked\", false);\n          OptionsVar[\"f_autokick\"] = 0;\n          window.localStorage.OptionsVar = JSON.stringify(OptionsVar);\n        }\n        $(\".log-panel\").attr(\"id\", \"sign_kick\");\n      }\n    } //end autokick()\n\n    if (\n      !$(\".group2 i\").is(\".npc\") &&\n      ($(\".group1 i\").is(\".arrived\") ||\n        $(\".group1 img\").is('[class^=\"team-\"]')) &&\n      !$(\"h3\").is(\".welcome-groupfight-flag\")\n    )\n      if (\n        $(\"#fightGroupForm\").find(\"ul.fight-log > li > h4\").text() ==\n          \"\u041D\u0430\u0447\u0430\u043B\u043E\" &&\n        $(\"#fightAction\").find(\"button\").is(\":visible\")\n      ) {\n        switch (OptionsVar[\"f_pickabil\"]) {\n          case \"u\":\n            if (document.getElementById(\"useabl--1\") !== null) autokick(\"-1\");\n            if (document.getElementById(\"useabl--65\") !== null) autokick(\"-65\");\n            if (document.getElementById(\"useabl-148\") !== null) autokick(\"148\");\n            break;\n          case \"o\":\n            if (document.getElementById(\"useabl-59\") !== null) autokick(\"59\");\n            if (document.getElementById(\"useabl-146\") !== null) autokick(\"146\");\n            break;\n          case \"a\":\n            if (document.getElementById(\"useabl-155\") !== null) autokick(\"155\");\n            break;\n        }\n        if (document.getElementById(\"sign_kick\") == null)\n          for (var i = 0; i < abl.length; i++)\n            if (document.getElementById(\"useabl-\" + abl[i]) !== null) {\n              autokick(abl[i]);\n              break;\n            }\n      }\n    function renderFightNavbar() {\n      if ($(\"#sign_ufl\").length != 1) {\n        fightAnalyze();\n        drawUserLogs();\n\n        $(\".fight-log\")\n          .find(\n            '[class*=\"icon\"]:not(.icon-bang-poison):not(.icon-antigranata2):not(.question-icon):not(.icon-rocket-1):not(.icon-rocket-2):not(.icon-cheese):not(.icon-helmet):not(.icon-bear):not(.icon-antigranata):not(.icon-forcejoin):not(.icon-heal):not(.antimrr):not(.serial):not(.icon-bang):not(.icon-superhit):not(.icon-reflect):not(.icon-chance):not(.icon-dodge):not(.icon-secondhit):not(.icon-thirdhit):not(.icon-katyusha):not(.icon-weakening-after-madness):not(.icon-foggranade)'\n          )\n          .each(function () {\n            var nik = $(this)\n              .next()\n              .text()\n              .match(/(.*).\\[/);\n            if (nik !== null) {\n              var usr = $(\".group\")\n                .find('li .user:contains(\"' + nik[1] + '\")')\n                .first();\n              if ($(usr).is(\".fight-log\"))\n                $(usr).children(\"br\").first().before($(this).clone());\n              else\n                $(usr)\n                  .addClass(\"fight-log\")\n                  .prepend(\"<br>\")\n                  .prepend($(this).clone());\n            }\n          });\n\n        if (OptionsVar[\"f_topmylog\"]) {\n          var flt = $(\"ul.fight-log\").find(\".text\");\n          $('<div style=\"border:blue 1px solid;\"></div>')\n            .prepend(flt.find(\"p.attack_i, p.attack_me\").clone())\n            .prependTo(flt);\n        }\n\n        if (!$(\".group2 i\").is(\".npc\")) {\n          var lur = $(\".list-users--right\"),\n            luralive = lur.find(\"li.alive\");\n          if (OptionsVar[\"f_topmig\"])\n            lur\n              .prepend(luralive.filter(':contains(\"\u041C\u0438\u0433\u0440\u0430\u043D\u0442 \")'))\n              .prepend(luralive.filter(':contains(\"\u041C\u0435\u0441\u044C\u0435 \")'));\n          if (OptionsVar[\"f_topmadness\"]) lur.prepend(luralive.has(\".deaf\"));\n          if (OptionsVar[\"f_bottomomon\"]) {\n            if (lur.find(\"li.dead\").length == 0)\n              lur.append(luralive.filter(':contains(\"\u041E\u043C\u043E\u043D\u043E\u0432\u0435\u0446 \")'));\n            else\n              lur\n                .find(\"li.dead\")\n                .first()\n                .before(luralive.filter(':contains(\"\u041E\u043C\u043E\u043D\u043E\u0432\u0435\u0446 \")'));\n          }\n        }\n\n        var fightGroupForm = $(\"#fightGroupForm\");\n        var fightAction = $(\"#fightAction\");\n\n        var logTurnsNavbar = fightGroupForm.find(\".pagescroll\").clone();\n\n        // Add the cleanup button inside .block-rounded\n        if (!$(\".block-rounded .cleanup-logs-btn\").length) {\n          var cleanupButton = createButton({\n            text: \"\uD83E\uDDF9 \uD83E\uDDFD\",\n            onClick: () => enhanceLogs(),\n            title: \"\u041F\u043E\u0447\u0438\u0441\u0442\u0438\u0442\u044C \u043B\u043E\u0433\u0438 \u043E\u0442 \u041D\u041F\u0421\",\n          });\n\n          $(cleanupButton)\n            .addClass(\"cleanup-logs-btn\")\n            .css({ margin: \"2px 6px\" });\n\n          var skipNpcFightButton = createButton({\n            text: \"\u23E9\",\n            onClick: async () => await handlePvpFight(),\n            title: \"\u041F\u0440\u043E\u043F\u0443\u0441\u0442\u0438\u0442\u044C \u041D\u041F\u0421 \u0431\u043E\u0439\",\n          });\n\n          $(skipNpcFightButton)\n            .addClass(\"skip-npc-fight-btn\")\n            .css({ margin: \"2px 6px\" });\n\n          logTurnsNavbar.children().first().append(cleanupButton);\n          logTurnsNavbar.children().first().append(skipNpcFightButton);\n        }\n\n        fightGroupForm.prepend(logTurnsNavbar);\n\n        if ($(\".superhit-wrapper\").length !== 0) {\n          $(\".superhit-wrapper\").css(\"zoom\", \"0.8\");\n        }\n\n        fightAction.append(\n          '<i id=\"fight-action-reload\" class=\"icon reload-icon\" title=\"\u0418\u0437\u043C\u0435\u043D\u0438\u0442\u044C \u0445\u043E\u0434\"></i>'\n        );\n\n        $(\"#fight-action-reload\").on(\"click\", function () {\n          fightAction\n            .show()\n            .find(\"button\")\n            .show()\n            .removeClass(\"disabled\")\n            .prop(\"disabled\", false);\n          fightAction.find(\".waiting\").hide();\n        });\n\n        $(\"#main\")\n          .find(\"span.boj\")\n          .on(\"click\", function () {\n            AngryAjax.goToUrl(\n              location.pathname.replace(/(\\/fight\\/\\d+?\\/)\\d+?\\//, \"$1\")\n            );\n          });\n\n        fightGroupForm.find(\"table\").attr(\"id\", \"sign_ufl\");\n      }\n    }\n\n    renderFightNavbar();\n    $(\".log-panel\").prepend($(\".fight-slots-actions\"));\n  }\n}\n\nexport async function aIsGroupFight() {\n  return new Promise((resolve) => {\n    AngryAjax.goToUrl(\"/alley/\");\n\n    $(document).one(\"ajaxStop\", () => {\n      const url = location.pathname;\n      resolve(/\\/fight\\/(?!.*\\/alley\\/)/.test(url));\n    });\n  });\n}\n\nexport function kubovichSpeedUp() {\n  CasinoKubovich.rotate = function () {\n    CasinoKubovich.rotateInterval = null;\n    if (!CasinoKubovich.mayRotate) return false;\n    CasinoKubovich.mayRotate = false;\n    var balance = parseInt($(\"#fishki-balance-num\").html().replace(\",\", \"\"));\n    var cost = parseInt($(\"#push .fishki\").text());\n    if (!isNaN(cost) && cost > balance) {\n      CasinoKubovich.errorChip();\n      return;\n    }\n    CasinoKubovich.endPosition = null;\n    CasinoKubovich.result = null;\n    //\tCasinoKubovich.takeResult();\n    var kaction = \"\";\n    if ($(\"div.reel-yellow\").length) {\n      kaction = \"yellow\";\n    } else {\n      kaction = \"black\";\n    }\n    $.post(\n      \"/casino/kubovich/\",\n      { action: kaction },\n      function (data) {\n        CasinoKubovich.result = data;\n        if (CasinoKubovich.result) {\n          if (CasinoKubovich.result.success) {\n            CasinoKubovich.showMessage(CasinoKubovich.result.text);\n          } else {\n            if (!CasinoKubovich.result.ready) {\n              clearInterval(CasinoKubovich.rotateInterval);\n              CasinoKubovich.rotateInterval = null;\n              CasinoKubovich.mayRotate = true;\n              $(\"#prizes\").empty();\n              $(\"#reel-turning\").attr(\"class\", \"\");\n              $(\"#push .cost\").html(\" - \u0441\u043A\u043E\u0440\u043E\");\n              $(\"#push\").addClass(\"disabled\");\n              $(\"#push-ellow\").addClass(\"disabled\");\n              $(\"#steps tr.my\").removeClass(\"my\");\n              $(\"#kubovich-smile\").show();\n              CasinoKubovich.showError(\n                \"\u041A \u0441\u043E\u0436\u0430\u043B\u0435\u043D\u0438\u044E \u0432 \u0434\u0430\u043D\u043D\u044B\u0439 \u043C\u043E\u043C\u0435\u043D\u0442 \u041A\u0443\u0431\u043E\u0432\u0438\u0447 \u043E\u0442\u0434\u044B\u0445\u0430\u0435\u0442, \u043F\u0440\u0438\u0445\u043E\u0434\u0438\u0442\u0435 \u043F\u043E\u0437\u0436\u0435.\"\n              );\n              // \u043A\u0443\u0431\u043E\u0432\u0438\u0447 \u0443\u0441\u0442\u0430\u043B\n            } else {\n              if (CasinoKubovich.result.reload) {\n                var isYellow = false;\n                if ($(\"div.reel-yellow\").length) {\n                  isYellow = true;\n                }\n                CasinoKubovich.loadData(isYellow);\n              } else {\n                CasinoKubovich.errorChip();\n              }\n            }\n          }\n        }\n        if (CasinoKubovich.result.wallet) {\n          var wallet = {};\n          wallet[\"money\"] = CasinoKubovich.result.wallet.money;\n          wallet[\"ore\"] = CasinoKubovich.result.wallet.ore;\n          wallet[\"honey\"] = CasinoKubovich.result.wallet.honey;\n          updateWallet(wallet);\n        }\n        CasinoKubovich.rotateInterval = null;\n        CasinoKubovich.mayRotate = true;\n        var count = 0;\n        var current = 0;\n        $(\"#kubovich-message button\").unbind(\"click\");\n        $(\"#kubovich-message button\").bind(\"click\", function () {\n          $(\"#kubovich-message\").hide();\n          $(\"#kubovich-message .data .text\").html(\"\");\n        });\n        CasinoKubovich.nextStep();\n      },\n      \"json\"\n    );\n  };\n}\n\nexport function phoneSpeedUp() {\n  myphone.appShowHide = function (app, action) {\n    if (action == \"hide\") {\n      app.attr(\"style\", \"display: none\");\n    } else if (action == \"show\") {\n      var app_id = app.attr(\"id\");\n      app\n        .css({ opacity: 0, display: \"block\" })\n        .css(\"transform\", \"scale(0.5)\")\n        .animate(\n          {\n            opacity: 1,\n          },\n          {\n            duration: 1,\n            easing: \"easeInOutQuint\",\n            step: function (now, fx) {\n              app.css(\"-webkit-transform\", \"scale(\" + now + \")\");\n              app.css(\"-moz-transform\", \"scale(\" + now + \")\");\n              app.css(\"-ms-transform\", \"scale(\" + now + \")\");\n              app.css(\"transform\", \"scale(\" + now + \")\");\n            },\n            complete: function () {\n              $(\"#amulet-reward_buffs\").fadeOut(\"slow\");\n\n              switch (app_id) {\n                case \"app-trade\":\n                  myphone.getTradeContract();\n                  break;\n\n                case \"app-trade2\":\n                  myphone.getTradeItem();\n                  break;\n\n                case \"app-messages\":\n                  myphone.getFightList();\n                  break;\n\n                case \"app-mfphone\":\n                  $(\"button\", app)\n                    .unbind(\"click\")\n                    .bind(\"click\", function () {\n                      AngryAjax.goToUrl(\n                        \"/phone/call/mf-item/\" + myphone.currentPhone + \"/\"\n                      );\n                    });\n                  break;\n              }\n\n              console.log(\"\u041A\u043E\u043B\u0431\u044D\u043A \u043F\u043E\u044F\u0432\u043B\u0435\u043D\u0438\u044F \u043E\u0431\u044A\u0435\u043A\u0442\u0430\");\n              if (\n                app.hasClass(\"scrollable\") &&\n                !app.hasClass(\"jspScrollable\")\n              ) {\n                console.log(\"\u0418\u043D\u0438\u0446\u0438\u0430\u0446\u0438\u044F \u0441\u043A\u0440\u043E\u043B\u043B\u0431\u0430\u0440\u043E\u0432\");\n                app.jScrollPane();\n              }\n            },\n          }\n        );\n    }\n  };\n}\n\nexport function neftLeninSpeedUp() {\n  // skip single fight animation\n  NeftLenin.attack = function () {\n    $.post(\n      \"/neftlenin/\",\n      { ajax: 1, action: \"startAction\" },\n      function (data) {\n        if (data[\"result\"]) {\n          AngryAjax.reload();\n        } else {\n          if (data[\"return_url\"]) {\n            AngryAjax.goToUrl(data[\"return_url\"]);\n          }\n          if (data[\"error\"]) {\n            showAlert(\n              m.lang.LANG_MAIN_105,\n              data[\"error\"],\n              true,\n              \"\",\n              \".welcome\"\n            );\n          }\n        }\n      },\n      \"json\"\n    );\n  };\n\n  // skip prize reroll animation\n  NeftLenin.escape = function () {\n    $.post(\n      \"/neftlenin/\",\n      { ajax: 1, action: \"escape\" },\n      function (data) {\n        if (data[\"result\"]) {\n          var elm = NeftLenin.getAlertForStep();\n\n          //elm.find('.awards').html(data['data']);\n          elm\n            .find(\".progress-wrapper\")\n            .css({ opacity: 1 })\n            .animate(\n              {\n                opacity: 0,\n              },\n              {\n                duration: 1,\n                complete: function () {\n                  elm.find(\".awards\").html(data[\"data\"]);\n                  $(this).animate({ opacity: 1 }, 1);\n                },\n              }\n            );\n\n          NeftLenin.init(data);\n          $(\".enemy-place\").hide();\n        } else {\n          if (data[\"return_url\"]) {\n            AngryAjax.goToUrl(data[\"return_url\"]);\n          }\n          if (data[\"error\"]) {\n            showAlert(\n              m.lang.LANG_MAIN_105,\n              data[\"error\"],\n              true,\n              \"\",\n              \".welcome\"\n            );\n          }\n        }\n      },\n      \"json\"\n    );\n  };\n\n  // skip alert reset animation\n  NeftLenin.reset = function (type) {\n    if ($(\".pipeline-actions .button\").hasClass(\"disabled\")) {\n      return;\n    }\n\n    $.post(\n      \"/neftlenin/\",\n      { ajax: 1, action: \"reset\", type: type },\n      function (data) {\n        $(\".pipeline-actions .button\").removeClass(\"disabled\");\n\n        if (data[\"result\"]) {\n          NeftLenin.init(data);\n\n          var elm = NeftLenin.getAlertForStep();\n          if (elm.css(\"display\") == \"block\") {\n            elm.find(\".awards\").html(data[\"data\"]);\n            elm.fadeIn(\"slow\");\n          }\n\n          if (data[\"honey\"]) {\n            $(\".med-block span\").text(intToKM(data[\"honey\"]));\n            $(\".med-block\").attr(\"title\", \"\u041C\u0435\u0434\u0430: \" + data[\"honey\"]);\n          }\n        } else {\n          if (data[\"return_url\"]) {\n            AngryAjax.goToUrl(data[\"return_url\"]);\n          }\n          if (data[\"error\"]) {\n            showAlert(\n              m.lang.LANG_MAIN_105,\n              data[\"error\"],\n              true,\n              \"\",\n              \".welcome\"\n            );\n          }\n        }\n\n        NeftLenin.fixAlertPosition(elm);\n      },\n      \"json\"\n    );\n  };\n\n  NeftLenin.viewPreMission = NeftLenin.viewPreMission2;\n}\n\nexport function dungeonSpeedUp() {\n  DungeonViewer.tryToGoToRoom = function (id) {\n    if ($(\"#preview-map\").hasClass(\"data-prevent-click\")) {\n      $(\"#preview-map\").removeClass(\"data-prevent-click\");\n      return;\n    }\n\n    if (DungeonViewer.activePlayerMoving) {\n      return;\n    }\n\n    if (Dungeon.isCanGoToRoom(id)) {\n      Dungeon.goToRoom(id, function (data) {\n        DungeonViewer.movePlayerToRoom(0, id, data);\n      });\n    }\n  };\n\n  Dungeon.goToRoom = function (id, cb) {\n    if (Dungeon.activeRequest) {\n      return;\n    }\n    Dungeon.activeRequest = true;\n    if (typeof id != \"number\") {\n      id = id.replace(\"room-\", \"\");\n    }\n    postUrl(\n      \"/dungeon/gotoroom/\",\n      { action: \"gotoroom\", room: id },\n      \"post\",\n      function (data) {\n        Dungeon.activeRequest = false;\n        DungeonViewer.initCooldown(data.cooldown);\n        if (data.result || data.return_url) {\n          AngryAjax.goToUrl(AngryAjax.getCurrentUrl());\n        }\n      }\n    );\n  };\n}\n\nfunction redrawTattoo() {\n  if ($(\"#modify-many-container\").length) return;\n  try {\n    $(\".tattoo\").css(\"height\", \"1000px\");\n    $(\".tattoo-slider\").css(\"height\", \"700px\");\n    $(\".tattoo-slider-slides\").css(\"height\", \"100%\");\n    $(\".tattoo-slider-slide__container\").css(\"height\", \"100%\");\n\n    const modifyManyContainer = strToHtml(\n      '<div id=\"modify-many-container\" style=\"display: flex; gap: 10px;\"></div>'\n    );\n\n    [4, 8, 12].forEach((count) => {\n      const modifyManyButton = createButton({\n        text: `\u262F\uFE0F x${count}`,\n        onClick: async () => await handleModifyManyTattoos(count),\n        title: `\u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0441\u0430\u043C\u043E\u043C\u0443 \u0445${count} \u0440\u0430\u0437`,\n      });\n\n      modifyManyContainer.appendChild(modifyManyButton);\n    });\n\n    createNumberAction({\n      action: async () => await handleModifyManyTattoos(1),\n      min: 1,\n      max: 100,\n    });\n\n    $(\".tattoo-draft-color-actions\").append(modifyManyContainer);\n    $(\".tattoo-draft-color-actions\").append(\n      createNumberAction({\n        action: async () => await handleModifyManyTattoos(1),\n        label: \"\u041F\u043E\u043F\u0440\u043E\u0431\u043E\u0432\u0430\u0442\u044C \u0441\u0430\u043C\u043E\u043C\u0443\",\n        min: 1,\n        max: 100,\n      })\n    );\n  } catch (e) {\n    console.log(\"could not redraw tattoo\");\n  }\n}\n\nfunction redrawTVTower() {\n  const priorityKeywords = [\n    \"\u043F\u0435\u043B\u044C\u043C\u0435\u043D\u044C\",\n    \"\u041A\u0443\u0431\u0438\u043A\u0438 \u041C\u043E\u0441\u043A\u043E\u0432\u043E\u043F\u043E\u043B\u0438\u0438\",\n    \"\u042D\u043B\u0435\u043C\u0435\u043D\u0442 \u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E\u0439 \u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u0438\",\n    \"\u0425\u0440\u0443\u0441\u0442\u044F\u0449\u0438\u0435 \u0432\u0430\u0444\u043B\u0438\",\n    \"\u043F\u043E\u0434\u0437\u0435\u043C\u043A\u0443\",\n    \"\u041D\u0430\u0431\u043E\u0440 \u043A\u043B\u044E\u0447\u0435\u0439\",\n    \"\u0420\u0430\u0441\u043F\u044B\u043B\u0438\u0442\u0435\u043B\u044C \u0434\u043B\u044F \u0434\u0443\u0445\u043E\u0432\",\n    \"\u041E\u0433\u043D\u0435\u043D\u043D\u044B\u0435 \u041A\u043E\u043A\u0442\u0435\u0439\u043B\u0438\",\n    // \"\u041F\u0430\u0441\u043F\u043E\u0440\u0442 \u041A\u0438\u0442\u0430\u0439\u0441\u043A\u043E\u0433\u043E \u041C\u0438\u0433\u0440\u0430\u043D\u0442\u0430\",\n    // \"\u0422\u0435\u0440\u043C\u043E\u043F\u0430\u0441\u0442\u0430\",\n  ];\n\n  $(\".tv-tower-news-tab-content\").each(function () {\n    const $parent = $(this);\n    const $articles = $parent.find(\".tv-tower-news-article\").toArray();\n\n    $articles.sort((a, b) => {\n      const rewardA = $(a).find(\".tv-tower-award\").text().trim();\n      const rewardB = $(b).find(\".tv-tower-award\").text().trim();\n\n      const hasPriorityA = priorityKeywords.some((keyword) =>\n        rewardA.includes(keyword)\n      );\n      const hasPriorityB = priorityKeywords.some((keyword) =>\n        rewardB.includes(keyword)\n      );\n\n      return hasPriorityB - hasPriorityA; // Sorts priority items to the top\n    });\n\n    $parent.append($articles);\n  });\n}\n\nfunction redrawRats() {\n  function replaceRatSearch() {\n    $(\"#welcome-rat button:nth-child(3)\").replaceWith(\n      $(\"#search_other_rat > div > div > div:nth-child(4)\")\n        .clone()\n        .on(\"click\", function () {\n          $(document).one(\"ajaxStop\", function () {\n            replaceRatSearch();\n            setRatRedirect();\n          });\n        })\n    );\n  }\n\n  function setRatRedirect() {\n    async function attackRat() {\n      await fetch(new URL(window.location.href).origin + \"/metro/fight-rat/\", {\n        headers: {\n          accept: \"*/*\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-fetch-dest\": \"empty\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer: new URL(window.location.href).origin + \"/metro/\",\n        referrerPolicy: \"strict-origin-when-cross-origin\",\n        body: \"__referrer=%2Fmetro%2F&return_url=%2Fmetro%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n      });\n    }\n\n    $('button[onclick=\"metroFightRat();\"]')\n      .removeAttr(\"onclick\")\n      .off(\"click\")\n      .on(\"click\", async function () {\n        await attackRat();\n        $(document).one(\"ajaxStop\", async function () {\n          if (isGroupFight()) {\n            await handlePvpFight();\n          }\n        });\n\n        AngryAjax.goToUrl(\"/metro/\");\n      });\n  }\n\n  replaceRatSearch();\n  setRatRedirect();\n}\n\nfunction handleEndOfGroupFight() {\n  const REDIRECT_URLS = [\n    \"/metro/\",\n    \"/travel2/\",\n    \"/neftlenin/from_battle\",\n    \"/dungeon/inside/\",\n  ];\n  const redirectUrl = $(\".result a.f\").attr(\"href\");\n\n  if (!redirectUrl) {\n    return;\n  }\n\n  if (REDIRECT_URLS.includes(redirectUrl)) {\n    console.log(\"redirecting to\", redirectUrl);\n    restoreHP();\n    AngryAjax.goToUrl(redirectUrl);\n  }\n}\n\nfunction handleGroupFightUI() {\n  // chat fixed position\n  const miniChat = $(\"#miniChat\");\n  if (miniChat.length > 0) {\n    miniChat.css({\n      left: \"3px\",\n      top: \"570px\",\n      width: \"208.778px\",\n      height: \"577.778px\",\n      position: \"absolute\",\n    });\n\n    const $content = miniChat.find(\".content\");\n    if ($content) {\n      $content.scrollTop($content[0]?.scrollHeight);\n    }\n  }\n\n  // redraw group fight logs\n  redrawGroupFightLogs();\n}\n\nfunction isGroupFight() {\n  const url = location.pathname;\n  if (url.match(/^(?!.*\\/alley\\/).*\\/fight\\//)) {\n    return true;\n  } else {\n    return false;\n  }\n}\n\nfunction expandContainers() {\n  $(\".object-thumbs\").css({\n    height: \"auto\",\n    maxHeight: \"850px\",\n    overflowY: \"scroll\",\n    scrollbarWidth: \"none\",\n  });\n}\n\nfunction redrawCollectins() {\n  if ($(\".home-collections-redrawn\").length > 0) {\n    return;\n  }\n\n  $(\"#home-collections\")\n    .css({\n      display: \"grid\",\n      gridTemplateColumns: \"1fr 1fr 1fr 1fr\",\n    })\n    .attr(\"class\", \"home-collections-redrawn\");\n\n  $(\".object-thumb\").each(function () {\n    $(this).css({ height: \"auto\" });\n    let imageTitle = $(this).find(\"img\").attr(\"title\");\n\n    // Check if title contains \"\u041A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u044F\" (case-insensitive)\n    if (/\u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u044F/i.test(imageTitle)) {\n      imageTitle = imageTitle.replace(/\u043A\u043E\u043B\u043B\u0435\u043A\u0446\u0438\u044F/i, \"\"); // Replace with \"\u043A\"\n    }\n\n    const titleSpan = $(\"<span>\").text(imageTitle).css({\n      \"word-break\": \"break-all\",\n      \"font-size\": \"smaller\",\n    });\n\n    // Append the <span> to the image parent\n    $(this).find(\"a\").append(titleSpan);\n  });\n}\n\nfunction redrawArbat() {\n  if ($(\".bringup-mode-btn\").length) return;\n  $(\".progress .num\").html(function (_, html) {\n    return html.replace(/\u0411\u0430\u043B\u043B\u043E\u0432 \u043D\u0430\u0431\u0440\u0430\u043D\u043E:\\s*/, \"\");\n  });\n\n  const bringupBtn = createButton({\n    text: \"\uD83D\uDE95\",\n    title: \"\u0411\u043E\u043C\u0431\u0438\u0442\u044C \u0431\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E (\u043F\u043E\u043A\u0430 \u0432\u043A\u043B\u0430\u0434\u043A\u0430 \u043E\u0442\u043A\u0440\u044B\u0442\u0430)\",\n    className: \"bringup-mode\",\n    onClick: async () => {\n      if (window.BRINGUP_MODE) {\n        showAlert(\"\u0411\u043E\u043C\u0431\u0438\u043B\u0430 \uD83D\uDE95\", \"\u0420\u0435\u0436\u0438\u043C \u0443\u0436\u0435 \u0430\u043A\u0442\u0438\u0432\u0435\u043D.\");\n        return;\n      }\n      const carId = $(\n        'form[action=\"/automobile/bringup/\"] input[name=\"car\"]'\n      ).val();\n\n      if (!carId) {\n        sendAlert({\n          title: \"\u0411\u043E\u043C\u0431\u0438\u043B\u0430 \uD83D\uDE95\",\n          img: \"/@/images/link/taxi.jpg\",\n          text: `\n          \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 ID \u0430\u0432\u0442\u043E\u043C\u043E\u0431\u0438\u043B\u044F.\n          `,\n        });\n        return;\n      }\n\n      await carBringupMode(carId);\n      window.BRINGUP_MODE = true;\n      AngryAjax.reload();\n\n      sendAlert({\n        title: \"\u0411\u043E\u043C\u0431\u0438\u043B\u0430 \uD83D\uDE95\",\n        img: \"/@/images/link/taxi.jpg\",\n        text: `\n        \u0420\u0435\u0436\u0438\u043C \u0431\u043E\u043C\u0431\u0438\u0442\u044C \u0431\u0435\u0441\u043F\u043B\u0430\u0442\u043D\u043E.\n        <br>\u0427\u0442\u043E\u0431\u044B \u043E\u0442\u043A\u043B\u044E\u0447\u0438\u0442\u044C, \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043D\u0438\u0446\u0443.<br>\n        <i>(id \u0442\u0430\u0447\u043A\u0438: ${carId})</i>.\n        `,\n      });\n    },\n  });\n\n  const actions = $(\".auto-bombila .actions\");\n\n  actions.find(\"form\").css({ display: \"inline-block\" });\n  actions.append(bringupBtn);\n}\n\nfunction redrawNeftLenin() {\n  if ($(\"#neftlenin-switch\").length) return;\n  const wrapper = $('<div id=\"neftlenin-switch\"></div>').css({\n    position: \"absolute\",\n    top: \"20px\",\n    right: \"5px\",\n    display: \"flex\",\n    gap: \"2px\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    boxShadow: \"rgba(0, 0, 0, 0.25) 0px 0px 8px 4px\",\n  });\n\n  const light = createButton({\n    text: \"\u26AA\uFE0F\",\n    title: \"\u041E\u0431\u044B\u0447\u043D\u044B\u0439 \u043D\u0435\u0444\u0442\u0435\u043F\u0440\u043E\u0432\u043E\u0434\",\n    onClick: () =>\n      $.post(\n        \"/neftlenin/\",\n        { action: \"selectType\", type: \"usual\" },\n        function () {\n          AngryAjax.reload();\n        }\n      ),\n  });\n\n  const dark = createButton({\n    text: \"\u26AB\uFE0F\",\n    title:\n      \"\u0422\u0435\u043C\u043D\u044B\u0439 \u043D\u0435\u0444\u0442\u0435\u043F\u0440\u043E\u0432\u043E\u0434\\n(\u2757\uFE0F\u0432\u043D\u0435 \u0430\u043A\u0446\u0438\u0438 \u0432\u0432\u043E\u0434\u0438\u0442 \u043F\u0435\u0440\u0441\u043E\u043D\u0430\u0436\u0430 \u0432 \u0442\u044E\u0440\u044C\u043C\u0443 \u043D\u0430 20 \u043C\u0438\u043D\u0443\u0442\u2757\uFE0F)\",\n    onClick: () =>\n      $.post(\n        \"/neftlenin/\",\n        { action: \"selectType\", type: \"hard\" },\n        function () {\n          AngryAjax.reload();\n        }\n      ),\n  });\n\n  wrapper.append(light, dark);\n\n  $(\".welcome\").append(wrapper);\n}\n\nfunction redrawTonusRestore() {\n  window.jobShowTonusAlert = function () {\n    $.get(\n      \"/job/tonus-buy-alert/\",\n      function (data) {\n        if (data[\"error\"]) {\n          showAlert(moswar.lang.LANG_MAIN_105, data[\"error\"], true);\n        } else {\n          $.get(\n            \"/player/json/use/\" + data[\"restore_tonus\"] + \"/\",\n            function (data) {\n              console.log(data[\"restore_tonus\"]);\n              if (typeof data[\"fullenergyin\"] != \"undefinded\") {\n                player[\"fullenergyin\"] = 0;\n                $(\"div.tonus-overtip-increase\").html();\n                $(\".plus-icon\").eq(1).css(\"display\", \"\");\n              }\n              if (data[\"stats\"][\"energy\"]) {\n                setEnergy(data[\"stats\"][\"energy\"]);\n                $(\".plus-icon\").eq(1).css(\"display\", \"\");\n              }\n            },\n            \"json\"\n          );\n        }\n      },\n      \"json\"\n    );\n  };\n}\n\nexport function handleUI() {\n  const url = location.pathname;\n\n  renderCandyCountdown();\n  expandContainers();\n  redrawTonusRestore();\n  phoneSpeedUp();\n\n  // alley fight\n  if (url.match(/\\/alley\\/fight\\//)) {\n    console.log(\"Alley fight\");\n    fightForward();\n  } else if (url.match(/^(?!.*\\/alley\\/).*\\/fight\\//)) {\n    // group fight\n\n    console.log(\"Group fight\");\n    LEGACY_initGroupFightLogs();\n    handleEndOfGroupFight();\n    handleGroupFightUI();\n  } else if (url === \"/player/\") {\n    // player page\n    redrawMain();\n    $(\"#stats-accordion .selected.active\")\n      .css(\"cursor\", \"pointer\")\n      .on(\"click\", getStats);\n    // document.querySelector(\"#assistant-container\").scrollIntoView();\n  } else if (url === \"/automobile/ride/\") {\n    // rides\n    sortGarage();\n  } else if (url === \"/tattoo/\") {\n    // tattoo\n    redrawTattoo();\n  } else if (url === \"/neftlenin/\") {\n    redrawNeftLenin();\n  } else if (url === \"/square/tvtower/\") {\n    // TV tower\n    redrawTVTower();\n    $(\"#breaking-news-normal\")[0].scrollIntoView({\n      behavior: \"smooth\",\n      block: \"start\",\n    });\n  } else if (url === \"/metrowar/clan/\") {\n    let $list = $(\".clan-members > ul\");\n\n    $(\".clan-members > ul li\")\n      .sort((a, b) => {\n        let coolA = parseInt($(a).find(\".cool-1\").text().trim(), 10);\n        let coolB = parseInt($(b).find(\".cool-1\").text().trim(), 10);\n        return coolB - coolA; // \u0421\u043E\u0440\u0442\u0438\u0440\u043E\u0432\u043A\u0430 \u043F\u043E \u043A\u0440\u0443\u0442\u043E\u0441\u0442\u0438\n      })\n      .appendTo($list);\n  } else if (url === \"/home/relic/\") {\n    $(\"#relic-reinforced-list\").css({\n      marginBottom: \"0px\",\n      scrollbarWidth: \"none\",\n    });\n    $(\".relic-reinforced-wnd\").css({ height: \"auto\" });\n    $(\".relic-reinforced-wnd-list\").css({ height: \"100%\" });\n  } else if (url === \"/travel2/\") {\n    initPvpUI();\n  } else if (url === \"/metro/\") {\n    // redraw rats (maybe player is already searching)\n    redrawRats();\n    // redraw rats search when clicking on \"\u041D\u0430\u043F\u0430\u0441\u0442\u044C \u043D\u0430 \u043C\u043E\u043D\u0441\u0442\u0440\u0430\" or \"\u041F\u0440\u043E\u043A\u0430\u0442\u0438\u0442\u044C\u0441\u044F\"\n    $(\n      \"#action-rat-fight > div.button-big.button, #timer-rat-fight > div:contains('\u041F\u0440\u043E\u043A\u0430\u0442\u0438\u0442\u044C\u0441\u044F')\"\n    ).on(\"click\", function () {\n      $(document).one(\"ajaxStop\", redrawRats);\n    });\n  } else if (url === \"/petarena/\") {\n    redrawPetarena();\n  } else if (url === \"/home/\") {\n    redrawCollectins();\n  } else if (url === \"/camp/gypsy/\") {\n    let normalGameContainer = $(\".game-types td:first\");\n\n    if (!$(\".multi-play-gypsy\").length) {\n      normalGameContainer.append(\n        createNumberAction({\n          label: \"\u041C\u043D\u0435 \u043F\u043E\u0432\u0435\u0437\u0435\u0442\",\n          action: async () => await playGypsy(),\n          className: \"multi-play-gypsy\",\n        })\n      );\n    }\n\n    if ($(\".multi-play-gypsy-flowers\").length) {\n      return;\n    }\n\n    const flowersGameContainer = $(\".game-types-col\").first();\n\n    console.log(flowersGameContainer);\n\n    flowersGameContainer.append(\n      createNumberAction({\n        label: \"\u041C\u043D\u0435 \u043F\u043E\u0432\u0435\u0437\u0435\u0442\",\n        action: async () => await playGypsy(),\n        className: \"multi-play-gypsy-flowers\",\n      })\n    );\n  } else if (url === \"/casino/blackjack/\") {\n    if ($(\".blackjack-multi\").length) return;\n    const btnInputField = createNumberAction({\n      label: \"\u0418\u0433\u0440\u0430\u0442\u044C \u0437\u0430 10\",\n      action: async () => await playBlackjack(),\n      className: \"blackjack-multi\",\n    });\n    $(\".actions.bets\").append(btnInputField);\n  } else if (url === \"/arbat/\") {\n    redrawArbat();\n  } else if (url === \"/pyramid/\") {\n    $(\"#pyramid-buy-form input\").css({ width: \"70px\" });\n  } else if (url.includes(\"clan\")) {\n    if ($(\"#reorder-clan\").length) return;\n    const coolnessSpan = $(\n      '<span id=\"reorder-clan\" class=\"cool-1\"><i></i></span>'\n    ).css({\n      cursor: \"pointer\",\n    });\n    coolnessSpan.on(\"click\", sortClanPlayersByCoolness);\n\n    const addToEnemiesBtn = createButton({\n      text: \"+\u0412\u0440\u0430\u0433\u0438\",\n      title: \"\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u0441\u043F\u0438\u0441\u043E\u043A \u0432\u0440\u0430\u0433\u043E\u0432 (\u0434\u043B\u044F \u043A\u043B\u0430\u043D\u0432\u0430\u0440\u0430)\",\n      onClick: () => addClanToEnemies(),\n      className: \"add-to-enemies\",\n      disableAfterClick: true,\n    });\n\n    $(addToEnemiesBtn).css({\n      display: \"block\",\n      marginLeft: \"auto\",\n    });\n\n    $('td.label:contains(\"\u041A\u043B\u0430\u043D\u0435\u0440\u044B\")').append(addToEnemiesBtn);\n    coolnessSpan.insertAfter(\"a[onclick=\\\"$('#players').toggle();\\\"]\");\n  } else if ([\"/squid/\", \"/meetings/\", \"/sovet/career/\"].includes(url)) {\n    $(\"#content\")[0].scrollIntoView({ behavior: \"smooth\", block: \"start\" });\n  }\n}\n\n//\n///\n//\nvar awpn = {\n  Madness: {\n    turns: \"2\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0431\u0435\u0448\u0435\u043D\u0441\u0442\u0432\u043E \u043D\u0430 2 \u0445\u043E\u0434\u0430\")',\n    image:\n      '<i class=\"icon-madness deaf\" style=\"margin:1px; filter:contrast(2.0);\"></i>',\n  },\n  MadTrump: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u043E\u0442\u043F\u0440\u0430\u0432\u043B\u044F\u0435\u0442 \u0432 \u0431\u0435\u0437\u0443\u043C\u0438\u0435\")',\n    image:\n      '<i class=\"icon-madness deaf\" style=\"margin:1px; filter:contrast(2.0);\"></i>',\n  },\n  superhit6: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"mf\",\n    fstr: 'p:contains(\"\u0432\u043F\u0430\u0434\u0430\u0435\u0442 \u0432 \u0431\u0435\u0437\u0443\u043C\u0438\u0435 \u043D\u0430 1 \u0445\u043E\u0434!\"):not(:contains(\"\u0437\u043C\u0435\u044F\"))',\n    image: '<i class=\"icon-madness deaf\"></i>',\n  }, //\u0431\u0435\u0437\u0443\u043C\u0438\u0435 \u043E\u0442 \u0441\u0443\u043F\u0435\u0440\u0443\u0434\u0430\u0440\u0430\n  Snake: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"mf\",\n    fstr: 'p:contains(\"\u0432\u043F\u0430\u0434\u0430\u0435\u0442 \u0432 \u0431\u0435\u0437\u0443\u043C\u0438\u0435 \u043D\u0430 1 \u0445\u043E\u0434!\"):contains(\"\u0437\u043C\u0435\u044F\")',\n    image:\n      '<img class=\"icon deaf\" src=\"/@/images/obj/pets/28-8.png\" style=\"margin:1px;\">',\n  },\n  Stun: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\" \u0443\u043C\u0438\u043B\u044C\u043D\u043E \u0441\u043C\u043E\u0442\u0440\u0438\u0442 \u043D\u0430\")',\n    image: '<span class=\"stun deaf\"><i style=\"margin:1px;\"></i></span>',\n  },\n  totem: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0442\u043E\u0442\u0435\u043C\u0430 \u043E\u0433\u043B\u0443\u0448\u0430\u0435\u0442\")',\n    image: '<span class=\"stun deaf\"><i style=\"margin:1px;\"></i></span>',\n  },\n  Bear: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E \u043E\u0433\u043B\u0443\u0448\u0430\u0435\u0442\"):not(:contains(\"\u041F\u0443\u0433\u0430\u043B\u043E\"))',\n    image:\n      '<i class=\"icon icon-bear deaf\" style=\"filter: contrast(10.0); margin:1px; zoom:0.8;\"></i>',\n  },\n  Snowman: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0441\u043B\u0443\u0447\u0430\u0439\u043D\u043E \u043E\u0433\u043B\u0443\u0448\u0430\u0435\u0442\"):contains(\"\u041F\u0443\u0433\u0430\u043B\u043E\")',\n    image:\n      '<img  class=\"icon deaf\" src=\"/@/images/obj/beast_ability/ability11.png\" style=\"filter:contrast(2.0);\">',\n  },\n  Knockout: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0432\u044B\u0437\u044B\u0432\u0430\u0435\u0442 \u043B\u0430\u0432\u0438\u043D\u0443\")',\n    image:\n      '<i class=\"icon icon-set-perk-knockout deaf\" style=\"margin:1px;\"></i>',\n  },\n  Bike: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"\",\n    fstr: \"\",\n    image: '<i class=\"icon icon-bike deaf\" style=\"margin:1px;\"></i>',\n  },\n  Hamsters: {\n    turns: \"\",\n    cnt: \"\",\n    pn: \"h\",\n    fstr: 'p:contains(\"\u0436\u0435\u0432\u0430\u0442\u044C \u043F\u0440\u043E\u0432\u043E\u0434\u0430\")',\n    image:\n      '<img  class=\"icon\" src=\"/@/images/obj/pets/25-1.png\" style=\"margin:1px; filter:contrast(2.0);\">',\n  },\n  Hamshams: {\n    turns: \"-1\",\n    cnt: \"\",\n    pn: \"hh\",\n    fstr: 'p.hamster:contains(\"\u043F\u0440\u0438\u0446\u0435\u043B\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0438 \u043D\u0430\u043F\u0430\u0434\u0430\u0435\u0442\")',\n    image: \"\",\n  },\n  Robots_b: {\n    turns: \"4\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0441\u0438\u043B\u043E\u0432\u043E\u0439 \u0431\u0440\u043E\u043D\u0435\u0439\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/pets/29-4.png\" style=\"margin:1px; filter:contrast(10.0);\">',\n  },\n  Robots_o: {\n    turns: \"4\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0430\u043A\u0442\u0438\u0432\u0438\u0440\u0443\u0435\u0442 \u043E\u0442\u0440\u0430\u0436\u0435\u043D\u0438\u0435\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/pets/29-4.png\" style=\"margin:1px; position:inherit; filter:hue-rotate(-90deg) opacity(60%);\">',\n  },\n  Zimtime: {\n    turns: \"\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0437\u0438\u043C\u043D\u0435\u0435 \u0432\u0440\u0435\u043C\u044F\")',\n    image:\n      '<span class=\"sovetabil3\"><i class=\"icon\" style=\"margin:1px;\"></i></span>',\n  },\n  Tornados: {\n    turns: \"4\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0437\u0430\u0449\u0438\u0442\u0443 \u043E\u0442 \u0443\u0440\u043E\u043D\u0430 \u0438 \u0433\u0440\u0430\u043D\u0430\u0442 \u043D\u0430 70%\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/superhits/superhit-10-3.png\" style=\"margin:1px;\">',\n  },\n  antigrnt: {\n    turns: \"4\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0429\u0438\u0442\"):not(:contains(\"\u0421\u0442\u0430\u043B\u044C\u043D\u043E\u0439\"))',\n    image:\n      '<span class=\"icon icon-antigranata\" style=\"margin:1px; zoom:0.9;\"></span>',\n  },\n  antigrnt2: {\n    turns: \"2\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0421\u0442\u0430\u043B\u044C\u043D\u043E\u0439 \u0449\u0438\u0442\")',\n    image:\n      '<span class=\"icon icon-antigranata2\" style=\"margin: 1px; zoom:0.9;\"></span>',\n  },\n  helmet: {\n    turns: \"2\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041F\u0440\u043E\u0431\u043A\u043E\u0432\u0430\u044F \u043A\u0430\u0441\u043A\u0430\")',\n    image: '<span class=\"icon icon-helmet\" style=\"margin: 1px;\"></span>',\n  },\n  helmet3: {\n    turns: \"3\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041D\u043E\u0432\u043E\u0433\u043E\u0434\u043D\u0438\u0439 \u043D\u0430\u043F\u0438\u0442\u043E\u043A\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon73.png\" style=\"margin:1px;\">',\n  },\n  reflect: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043E\u0432\u0430\u0440\u043D\u0430\u044F \u043F\u0440\u0443\u0436\u0438\u043D\u0430\")',\n    image: '<span class=\"icon icon-reflect\" style=\"margin: 1px;\"></span>',\n  },\n  durian: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0414\u0443\u0440\u0438\u0430\u043D \u00AB\u0417\u0430\u043C\u043E\u0440\u0441\u043A\u0438\u0439\u00BB\"):not(:contains(\"\u043A\u0443\u0448\u0430\u0435\u0442\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon76.png\" style=\"margin:1px;\">',\n  },\n  kokos: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041E\u0440\u0435\u0445 \u00AB\u041A\u043E\u043A\u043E\u0441\u043E\u0432\u044B\u0439\u00BB\"):not(:contains(\"\u043A\u0443\u0448\u0430\u0435\u0442\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon74.png\" style=\"margin:1px;\">',\n  },\n  tikva: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0422\u044B\u043A\u0432\u0430 \u00AB\u041A\u043E\u043B\u0445\u043E\u0437\u043D\u0430\u044F\u00BB\"):not(:contains(\"\u043A\u0443\u0448\u0430\u0435\u0442\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon75.png\" style=\"margin:1px;\">',\n  },\n  granat: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442 \u00AB\u041E\u0441\u043A\u043E\u043B\u043E\u0447\u043D\u044B\u0439\u00BB\"):not(:contains(\"\u043A\u0443\u0448\u0430\u0435\u0442\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon77.png\" style=\"margin:1px;\">',\n  },\n  rolls: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0420\u043E\u043B\u043B\u044B\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/drugs148.png\" style=\"margin:1px;\">',\n  },\n  vokker: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0412\u043A\u0443\u0441\u043D\u044B\u0439 \u0432\u043E\u043A\u043A\u0435\u0440\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/drugs179.png\" style=\"margin:1px;\">',\n  },\n  food87: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0410\u043F\u0442\u0435\u0447\u043D\u044B\u0439 \u043D\u0430\u0431\u043E\u0440 \u00AB\u041A\u0440\u0430\u0441\u043D\u044B\u0439\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon87.png\" style=\"margin:1px;\">',\n  },\n  food86: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0410\u043F\u0442\u0435\u0447\u043D\u044B\u0439 \u043D\u0430\u0431\u043E\u0440 \u00AB\u041E\u0440\u0430\u043D\u0436\u0435\u0432\u044B\u0439\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon86.png\" style=\"margin:1px;\">',\n  },\n  food79: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041B\u0435\u0434\u0435\u043D\u0446\u044B \u0441 \u0438\u0433\u043E\u043B\u043A\u0430\u043C\u0438\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon79.png\" style=\"margin:1px;\">',\n  },\n  food80: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041D\u043E\u0432\u043E\u0433\u043E\u0434\u043D\u044F\u044F \u043A\u0430\u0440\u0430\u043C\u0435\u043B\u044C\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon80.png\" style=\"margin:1px;\">',\n  },\n  cheese: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0410\u0440\u043E\u043C\u0430\u0442\u043D\u044B\u043C \u0441\u044B\u0440\u043E\u043C\")',\n    image:\n      '<span class=\"icon icon-cheese\" style=\"margin: 1px; zoom:0.9;\"></span>',\n  },\n  migrant: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0422\u0440\u0443\u0434\u043E\u0432\u043E\u0439 \u043A\u043D\u0438\u0436\u043A\u043E\u0439\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/migrant.png\" style=\"margin:1px;\">',\n  },\n  lenin: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u043F\u0440\u0438\u0437\u044B\u0432\u0430\u0435\u0442 \u0412\u043E\u0436\u0434\u044F\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/neftlenin_head.png\" style=\"margin:1px;\">',\n  },\n  grena82: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442\u0430 \u00AB\u041F\u043E\u0440\u0430\u0437\u0438\u0442\u0435\u043B\u044C\u043D\u0430\u044F\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon82.png\" style=\"margin:1px;\">',\n  },\n  grena83: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442\u0430 \u00AB\u0414\u0443\u0445\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon83.png\" style=\"margin:1px;\">',\n  },\n  grena84: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442\u0430 \u00AB\u041A\u0438\u0441\u043B\u043E\u0442\u043D\u0430\u044F\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon84.png\" style=\"margin:1px;\">',\n  },\n  grena85: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442\u0430 \u00AB\u0421\u0432\u0435\u0442\u043B\u044F\u0447\u043E\u043A\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon85.png\" style=\"margin:1px;\">',\n  },\n  grena66m1: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043E\u043A\u0442\u0435\u0439\u043B\u044C \u041C\u043E\u043B\u043E\u0442\u043E\u0432\u0430 [\u0423\u043B\u044C\u0442\u0440\u0430]\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon66_mf1.png\" style=\"margin:1px;\">',\n  },\n  grena66: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043E\u043A\u0442\u0435\u0439\u043B\u044C \u041C\u043E\u043B\u043E\u0442\u043E\u0432\u0430\"):not(:contains(\"[\u0423\u043B\u044C\u0442\u0440\u0430]\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon66.png\" style=\"margin:1px;\">',\n  },\n  grena63m2: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043B\u0430\u0441\u0442\u0435\u0440\u043D\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430 [\u041C\u0435\u0433\u0430]\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon63_mf2.png\" style=\"margin:1px;\">',\n  },\n  grena63m1: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043B\u0430\u0441\u0442\u0435\u0440\u043D\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430 [\u0423\u043B\u044C\u0442\u0440\u0430]\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon63_mf1.png\" style=\"margin:1px;\">',\n  },\n  grena63: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u043B\u0430\u0441\u0442\u0435\u0440\u043D\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430\"):not(:contains(\"[\u0423\u043B\u044C\u0442\u0440\u0430]\")):not(:contains(\"[\u041C\u0435\u0433\u0430]\"))',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon63.png\" style=\"margin:1px;\">',\n  },\n  c4: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0412\u0437\u0440\u044B\u0432\u0447\u0430\u0442\u043A\u0430 \u04214\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon88.png\" style=\"margin:1px;\">',\n  },\n  grena37: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0431\u043E\u043C\u0431\u0430-\u0432\u043E\u043D\u044E\u0447\u043A\u0430\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon37.png\" style=\"margin:1px;\">',\n  },\n  grena38: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0425\u043B\u043E\u043F\u0443\u0448\u043A\u0430\u2014\u0440\u0430\u0437\u043B\u0443\u0447\u043D\u0438\u0446\u0430\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon38.png\" style=\"margin:1px;\">',\n  },\n  grena46: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041C\u043E\u0449\u043D\u044B\u0439 \u0441\u043D\u0435\u0436\u043E\u043A\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon46.png\" style=\"margin:1px;\">',\n  },\n  grena79: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0412\u0437\u0440\u044B\u0432\u043D\u043E\u0439 \u043C\u0430\u043D\u0434\u0430\u0440\u0438\u043D\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/fight_item/weapon79.png\" style=\"margin:1px;\">',\n  },\n  grduck: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0413\u0440\u0430\u043D\u0430\u0442\u0430 \u00AB\u0423\u0442\u043E\u0447\u043A\u0430\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/dung_prize/duck.png\" style=\"margin:1px;\">',\n  },\n  easydo: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0421\u0432\u0435\u0442\u043E\u0448\u0443\u043C\u043E\u0432\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/weapon62.png\" style=\"margin:1px;\">',\n  },\n  svistok: {\n    turns: \"1\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432 \u0431\u043E\u0439 \u043E\u0442\u0440\u044F\u0434 \u041E\u041C\u041E\u041D\u0430\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/item28.png\" style=\"margin:1px;\">',\n  },\n  easytarg: {\n    turns: \"5\",\n    cnt: \"\",\n    pn: \"et\",\n    fstr: 'p:contains(\"\u0421\u0432\u0435\u0442\u043E\u0448\u0443\u043C\u043E\u0432\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430\")',\n    image: '<i class=\"icon icon-easytarget\" style=\"margin:1px;\"></i>',\n  },\n  // 'easytarg2' :{turns: '', cnt: '',  pn: 'nf',fstr: 'p:contains(\"\u0421\u0432\u0435\u0442\u043E\u0448\u0443\u043C\u043E\u0432\u0430\u044F \u0433\u0440\u0430\u043D\u0430\u0442\u0430\")', image: '<i class=\"icon icon-easytarget\"></i>'},\n  dim: {\n    turns: \"2\",\n    cnt: \"1\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0414\u044B\u043C\u043E\u0432\u0430\u044F \u0448\u0430\u0448\u043A\u0430\")',\n    image: '<i class=\"icon icon-foggranade\" style=\"margin:1px;\"></i>',\n  },\n  sovetabil7: {\n    turns: \"1\",\n    cnt: \"5\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u043A\u043E\u043C\u0430\u043D\u0434\u0443\u0435\u0442 \u041E\u041C\u041E\u041D\u0443\")',\n    image:\n      '<span class=\"sovetabil7\"><i class=\"icon\" style=\"margin:1px;\"></i></span>',\n  },\n  sovetabil1: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432\u043E\u043E\u0434\u0443\u0448\u0435\u0432\u043B\u044F\u0435\u0442 \u0438\u0437\u0431\u0438\u0440\u0430\u0442\u0435\u043B\u0435\u0439\")',\n    image:\n      '<span class=\"sovetabil1\"><i class=\"icon\" style=\"margin:1px;\"></i></span>',\n  },\n  periscope: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432\u044B\u0437\u044B\u0432\u0430\u0435\u0442 \u043F\u043E\u0434\u043B\u043E\u0434\u043A\u0443\")',\n    image: '<span class=\"sub-periscope\"><i></i></span>',\n  },\n  \"rage-1\": {\n    turns: \"\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432\u0441\u043F\u043B\u044B\u0432\u0430\u0435\u0442 \u0441\u043E \u0434\u043D\u0430\")',\n    image: '<span class=\"rage-1\"><i style=\"zoom:0.9; margin:1px;\"></i></span>',\n  },\n  car_sw2: {\n    turns: \"3\",\n    cnt: \"5\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0410\u0431\u0441\u043E\u043B\u044E\u0442\u043D\u0443\u044E \u0437\u0430\u0449\u0438\u0442\u0443\")',\n    image:\n      '<img class=\"icon\" src=\"/css/images/obj/beast_ability/ability_sw_hide.png\" style=\"margin:1px;\">',\n  },\n  ruslan: {\n    turns: \"1\",\n    cnt: \"9\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u043F\u043E\u043F\u043E\u043B\u043D\u044F\u0435\u0442 \u0437\u0430\u043F\u0430\u0441\u044B \u0431\u043E\u0435\u043F\u0440\u0438\u043F\u0430\u0441\u043E\u0432\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/cars/70.png\" style=\"margin:1px; filter: contrast(2.0);\">',\n  },\n  tramp: {\n    turns: \"1\",\n    cnt: \"5\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432\u0435\u043B\u0438\u043A\u0438\u043C, \u043A\u0430\u043A\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/loc/trump/talant_3.png\" style=\"margin:1px; filter: contrast(2.0);\">',\n  },\n  mgs: {\n    turns: \"1\",\n    cnt: \"5\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u041C\u043E\u0441\u0413\u043E\u0441\u0421\u0442\u0440\u0430\u0445\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/8march2/items/128/6.png\" style=\"margin:1px; filter: contrast(2.0);\">',\n  },\n  rabbit: {\n    turns: \"1\",\n    cnt: \"5\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u041F\u0430\u0441\u0445\u0430\u043B\u044C\u043D\u044B\u0439 \u043A\u0440\u043E\u043B\u0438\u043A\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/rabbit.png\" style=\"margin:1px;\">',\n  },\n  rocketab1: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0420\u0430\u043A\u0435\u0442\u0430 \u0438\u0433\u0440\u043E\u043A\u0430\")',\n    image: '<i class=\"icon icon-rocket-1\" style=\"margin:1px;\"></i>',\n  },\n  sany: {\n    turns: \"1\",\n    cnt: \"2\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u043A\u0430\u0442\u0430\u0435\u0442\u0441\u044F \u043D\u0430 \u0441\u0430\u043D\u044F\u0445\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/cars/56.png\" style=\"margin:1px;\">',\n  },\n  roketxsany: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0441\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044C \u041D\u043E\u0432\u043E\u0433\u043E\u0434\u043D\u0435\u0435 \u0432\u044B\u0437\u0434\u043E\u0440\u043E\u0432\u043B\u0435\u043D\u0438\u0435\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/cars/56.png\" style=\"margin:1px;\"><span style=\"color:#001dff; margin-left:-10px; font-size:14px;\">&otimes;</span>',\n  },\n  gazi: {\n    turns: \"1\",\n    cnt: \"2\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0416\u0435\u0440\u0442\u0432\u0430 \u043E\u0442\u0440\u0430\u0432\u043B\u044F\u0435\u0442\u0441\u044F\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/cars/51.png\" style=\"margin:1px;\">',\n  },\n  roketxgazi: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u0441\u043F\u043E\u0441\u043E\u0431\u043D\u043E\u0441\u0442\u044C \u0412\u044B\u0445\u043B\u043E\u043F\u043D\u044B\u0435 \u0433\u0430\u0437\u044B\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/cars/51.png\" style=\"margin:1px;\"><span style=\"color:#ff0000; margin-left:-10px; font-size:14px;\">&otimes;</span>',\n  },\n  rocketab2: {\n    turns: \"1\",\n    cnt: \"9\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u043E\u0431\u043B\u0435\u0442\u0435\u0432 \u0432\u043E\u043A\u0440\u0443\u0433 \u0417\u0435\u043C\u043B\u0438\")',\n    image: '<i class=\"icon icon-rocket-2\" style=\"margin:1px;\"></i>',\n  },\n  noheal: {\n    turns: \"\",\n    cnt: \"\",\n    pn: \"l\",\n    fstr: 'p:contains(\"\u043D\u0435 \u043C\u043E\u0436\u0435\u0442 \u0432\u043E\u0441\u0441\u0442\u0430\u043D\u043E\u0432\u0438\u0442\u044C \u0437\u0434\u043E\u0440\u043E\u0432\u044C\u0435 \u043D\u0438\u0447\u0435\u043C\")',\n    image:\n      '<span class=\"icon icon-heal\" style=\"margin:1px;position:relative;\"><span style=\"color:#ff0000; position:absolute; font-size:14px; left:4px; top:-4px;\">&otimes; </span></span>',\n  },\n  car_sw: {\n    turns: \"1\",\n    cnt: \"5\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0417\u0432\u0435\u0437\u0434\u0430 \u0441\u043C\u0435\u0440\u0442\u0438\")',\n    image:\n      '<img class=\"icon\" src=\"/css/images/obj/beast_ability/ability_sw_deathray_2.png\" style=\"margin:1px;\">',\n  },\n  forcejoin: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0432\u043C\u0435\u0448\u0438\u0432\u0430\u0435\u0442\u0441\u044F \u0432 \u0431\u043E\u0439\")',\n    image: '<span class=\"icon icon-forcejoin\" style=\"margin:1px;\"></span>',\n  },\n  kgranat: {\n    turns: \"4\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u0430\u043B\u044C\u044F\u043D \u00AB\u0413\u0440\u0430\u043D\u0430\u0442\u043E\u0432\u044B\u0439\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/shisha/red1.png\" style=\"margin:1px;\">',\n  },\n  kled: {\n    turns: \"6\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041A\u0430\u043B\u044C\u044F\u043D \u00AB\u041B\u0435\u0434\u044F\u043D\u043E\u0439\u00BB\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/shisha/frost1.png\" style=\"margin:1px;\">',\n  },\n  nokick: {\n    turns: \"2\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u041D\u0435 \u0431\u0435\u0439\u0442\u0435 \u0435\u0433\u043E!\")',\n    image: '<span class=\"red\">\u041D\u0435 \u0431\u0438\u0442\u044C! </span>',\n  },\n  malina: {\n    turns: \"1\",\n    cnt: \"\",\n    pn: \"f\",\n    fstr: 'p:contains(\"\u0440\u0430\u0437\u0433\u0430\u0434\u044B\u0432\u0430\u0435\u0442 \u041A\u043E\u043C\u0431\u0438\u043D\u0430\u0446\u0438\u044E \u041F\u0430\u0445\u0430\u043D\u0430\")',\n    image:\n      '<img class=\"icon\" src=\"/@/images/obj/vovan_note.png\" style=\"margin:1px;\">',\n  },\n};\n\nexport { createButton, createPopover };\n", "/* global player  */\n\nimport { sendAlert } from \"./ui/index.js\";\nimport { getElementsOnThePage } from \"./utils.js\";\n\nexport const DOPINGS_DATA_ST = {\n  heal: 51, // \u041C\u0438\u043A\u0441\u0442\u0443\u0440\u0430\n  pyani: 52, // \u041F\u044F\u043D\u0438\n  tvorog: 53, // \u0422\u0432\u043E\u0440\u043E\u0433\n  vitaminsHealth: 3397, // \u0412\u0438\u0442\u0430\u043C\u0438\u043D\u043A\u0438 \u00AB9.5 \u0436\u0438\u0437\u043D\u0435\u0439\u00BB\n  pillsHealth: 3840, // \u0422\u0430\u0431\u043B\u0435\u0442\u043A\u0438 \u00AB\u041D\u043E\u0432\u0430\u044F \u0436\u0438\u0437\u043D\u044C\u00BB\n  deMinerale: 3841, // \u0410\u043A\u0432\u0430 \u0414\u0435\u041C\u0438\u043D\u0435\u0440\u0430\u043B\u0435\n  bomjori: 3381, // \u0411\u0443\u0442\u044B\u043B\u043A\u0430 \u00AB\u0411\u043E\u043C\u0436\u043E\u0440\u0438\u00BB\n  kukuruza: [9904, 9905, 9906, 9907, 9908, 9909], // \u041A\u0443\u043A\u0443\u0440\u0443\u0437\u0430\n  pryaniki: [7375, 7376, 7377, 7378, 7379, 7380], // \u0422\u0443\u043B\u044C\u0441\u043A\u0438\u0435 \u041F\u0440\u044F\u043D\u0438\u043A\u0438\n  pasta: [3551, 3552, 3553, 3554, 3555, 3556], // \u0422\u0435\u0440\u043C\u043E\u043F\u0430\u0441\u0442\u0430\n  caramels: [1209, 1210, 1211, 1212, 1213, 1214], // \u041A\u0430\u0440\u0430\u043C\u0435\u043B\u044C\u043A\u0438\n  cocktails: [2656, 2657, 2658, 2659, 2660, 2661], // \u041A\u043E\u043A\u0442\u0435\u0439\u043B\u0438 \u00AB\u041D\u0435\u043F\u043E\u0432\u0442\u043E\u0440\u0438\u043C\u044B\u0435\u00BB\n  glupaya: 2872, // \u041A\u043E\u043D\u0444\u0435\u0442\u0430 \u00AB\u0413\u043B\u0443\u043F\u0430\u044F\u00BB\n};\n\n// !!! IMPORTANT !!!\nexport async function mapDataStToDataId(dataSt) {\n  const values = Array.isArray(dataSt) ? dataSt : [dataSt]; // Ensure it's an array\n\n  // why so many promises? get the document once and query it for all the elements\n  let stuff = await Promise.all(\n    values.map(async (st) => {\n      let img = await getElementsOnThePage(`img[data-st=\"${st}\"]`, \"/player/\");\n\n      let id = img?.getAttribute(\"data-id\");\n\n      return id;\n    })\n  );\n\n  return stuff;\n}\n\nexport async function useDopings(dopingsStArr) {\n  const idsToEat = await mapDataStToDataId(dopingsStArr);\n  await Promise.all(idsToEat.map((id) => useItem(id)));\n}\n\nexport async function heal() {\n  await useDopings(DOPINGS_DATA_ST.heal);\n}\n\nexport async function useItem(itemId = \"2474213164\") {\n  // default item is health potion\n  const res = await fetch(\n    `${new URL(window.location.href).origin}/player/json/use/${itemId}/`\n  );\n  const data = await res.text();\n  const { inventory } = JSON.parse(data);\n  return inventory;\n}\n\nexport async function takeDailyDose(eatGlupaya = true) {\n  const {\n    bomjori,\n    kukuruza,\n    pryaniki,\n    pasta,\n    caramels,\n    pillsHealth,\n    vitaminsHealth,\n    glupaya,\n  } = DOPINGS_DATA_ST;\n\n  const toEat = [\n    ...kukuruza,\n    ...caramels,\n    ...pryaniki,\n    ...pasta,\n    pillsHealth,\n    vitaminsHealth,\n    bomjori,\n    eatGlupaya ? glupaya : null,\n  ];\n\n  await Promise.all(toEat.map((itemId) => useDopings(itemId)));\n}\n\nexport async function restoreHP() {\n  await fetch(new URL(window.location.href).origin + \"/player/checkhp/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=restorehp\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function eatSilly() {\n  let sillyId = await mapDataStToDataId(DOPINGS_DATA_ST.glupaya);\n  await useItem(sillyId);\n}\n\nexport async function getStats() {\n  const statNodes = await getElementsOnThePage(\n    \".stats\",\n    `/player/${player.id}/`\n  );\n  const statsStrArr = [...statNodes[0].querySelectorAll(\".num\")].map((el) =>\n    el.getAttribute(\"title\")\n  );\n\n  const stats = Object.fromEntries(\n    statsStrArr.map((line) => {\n      const [key, rest] = line.split(\"||\");\n      const match = rest.match(/\u041F\u0435\u0440\u0441\u043E\u043D\u0430\u0436:\\s*(\\d+)/);\n      return [key, match ? Number(match[1]) : null];\n    })\n  );\n\n  sendAlert({\n    title: \"\uD83D\uDCCA \u0412\u0430\u0448\u0438 \u0441\u0442\u0430\u0442\u044B\",\n    text: `<p>${Object.entries(stats)\n      .map(([k, v]) => `${k}: ${v}`)\n      .join(\"</br>\")}</p>`,\n    img: \"/css/images/loc/trainer.jpg\",\n  });\n\n  return stats;\n}\n", "/* global $ Gypsy player cooldownReset jobShowTonusAlert groupFightMakeStep AngryAjax showAlert */\n\nimport { heal, restoreHP, useItem } from \"./dopings.js\";\nimport { aIsGroupFight, sendAlert, waitForCooldown } from \"./index.js\";\nimport { addToContacts, removeFromContacts } from \"./phone.js\";\nimport { getMoscowTime } from \"./utils.js\";\nimport {\n  delay,\n  formatTime,\n  getElementsOnThePage,\n  getPlayerId,\n  parseHtml,\n} from \"./utils.js\";\n\n// work & patrol\nexport async function workMode(timeHours = 1) {\n  async function workBurgers() {\n    const workFinished = await getElementsOnThePage(\n      \"#workForm > div.time > span.error\",\n      \"/shaurburgers/\"\n    );\n\n    if (workFinished) return;\n\n    // AngryAjax.goToUrl(\"/shaurburgers/\");\n\n    await fetch(new URL(window.location.href).origin + \"/shaurburgers/\", {\n      headers: {\n        accept: \"*/*\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/shaurburgers/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: `action=work&time=${timeHours}&__ajax=1&return_url=%2Fshaurburgers%2F`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    });\n  }\n  const workCooldown = await getElementsOnThePage(\n    \"form.shaurburgers-work td#shaurma.value\",\n    \"/shaurburgers/\"\n  );\n\n  const workCooldownSeconds = workCooldown?.getAttribute(\"timer\");\n  if (workCooldownSeconds) {\n    console.log(\n      `\u23F1\uFE0F Shaurburgers work cooldown. Retry in ${formatTime(workCooldownSeconds)}.`\n    );\n    setTimeout(\n      async () => await workMode(timeHours),\n      (workCooldownSeconds + 5) * 1000\n    );\n    return;\n  }\n  // start working now\n  await workBurgers(timeHours);\n  // AngryAjax.reload();\n  // and work every hour\n  setTimeout(async () => workMode(timeHours), 60.05 * 60 * 1000);\n}\n\nexport async function patrolMode(minutes = 10) {\n  try {\n    const patrolForm = $(\n      await getElementsOnThePage(\"form#patrolForm\", \"/alley/\")\n    );\n\n    const patrolIsOver = patrolForm.find(\".timeleft\").text();\n\n    if (\n      patrolIsOver === \"\u041D\u0430 \u0441\u0435\u0433\u043E\u0434\u043D\u044F \u0412\u044B \u0443\u0436\u0435 \u0438\u0441\u0442\u0440\u0430\u0442\u0438\u043B\u0438 \u0432\u0441\u0435 \u0432\u0440\u0435\u043C\u044F \u043F\u0430\u0442\u0440\u0443\u043B\u0438\u0440\u043E\u0432\u0430\u043D\u0438\u044F.\"\n    ) {\n      const secondsUntilNextPatrol = Math.floor(\n        (new Date(\n          new Date().toLocaleString(\"en-US\", { timeZone: \"Europe/Moscow\" })\n        ).setHours(24, 1, 0, 0) -\n          new Date()) /\n          1000\n      );\n\n      console.log(\n        `\u23F0 Patrol is over. Retrying in ${formatTime(secondsUntilNextPatrol)}`\n      );\n\n      return setTimeout(\n        async () => await patrolMode(minutes),\n        secondsUntilNextPatrol * 1000\n      );\n    }\n\n    const patrolTimerSeconds = patrolForm?.find(\"td.value\")?.attr(\"timer\");\n    if (patrolTimerSeconds) {\n      console.log(\n        `\u23F1\uFE0F\u2744\uFE0F Patrol cooldown. Retry in ${formatTime(patrolTimerSeconds)}.`\n      );\n      setTimeout(\n        async () => await patrolMode(minutes),\n        (+patrolTimerSeconds + 3) * 1000\n      );\n      return;\n    }\n\n    console.log(`[\uD83D\uDE94] Patrol Mode (${minutes} minutes).`);\n    await startPatrol(minutes);\n    setTimeout(() => patrolMode(minutes), minutes * 60 * 1000 + 3000);\n  } catch (e) {\n    console.log(\"Could not start patrol mode\\n\", e);\n  }\n}\n\nexport async function joinBankRobbery() {\n  const fightId = await getElementsOnThePage(\n    '.bank-robbery input[name=\"fight\"]',\n    \"/bank/\"\n  );\n}\n\n// region 3 === \u0432\u043E\u043A\u0437\u0430\u043B\u044C\u043D\u044B\u0439\nexport async function startPatrol(timeMin = 10, region = 1) {\n  // AngryAjax.goToUrl(\"/alley/\");\n  await fetch(new URL(window.location.href).origin + \"/alley/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/alley/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=patrol&region=${region}&time=${timeMin}&__ajax=1&return_url=%2Falley%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  await fetch(new URL(window.location.href).origin + \"/desert/\");\n  await fetch(new URL(window.location.href).origin + \"/desert/rob/\");\n}\n\nexport async function watchTv() {\n  await fetch(new URL(window.location.href).origin + \"/alley/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/alley/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=patriottv&time=1&__ajax=1&return_url=%2Falley%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nfunction isInGroupFight() {\n  const currentUrl = AngryAjax.getCurrentUrl();\n  const normalFightRegex = /^\\/fight\\/\\d+\\/?$/;\n  return normalFightRegex.test(currentUrl);\n}\n\nexport async function handleSmurfFight() {\n  try {\n    let cooldownSeconds = await getAlleyCooldown();\n\n    if (cooldownSeconds && cooldownSeconds > 0) {\n      console.log(`[SMURF] Alley Cooldown ${formatTime(cooldownSeconds + 5)}`);\n      setTimeout(\n        async () => await handleSmurfFight(),\n        (cooldownSeconds + 5) * 1000\n      );\n      return;\n    }\n\n    await restoreHP();\n    await smackMyBitchUp();\n    await attackByCriteria({\n      criteria: \"type\",\n      minLvl: +player.level + 4,\n      maxLvl: +player.level + 6,\n    });\n\n    cooldownSeconds = await getAlleyCooldown();\n\n    console.log(`[SMURF] Attack again in ${formatTime(cooldownSeconds + 5)}`);\n    setTimeout(\n      async () => await handleSmurfFight(),\n      1000 * (cooldownSeconds + 5)\n    );\n  } catch (e) {\n    console.log(\"Could not handle smurf fight\\n\", e);\n  }\n}\n\nexport async function checkBubble(cb, extraDelaySeconds = 0, ...args) {\n  try {\n    let bubble = document.querySelector(\n      \"#personal > a.bubble > span > span.string\"\n    );\n    let bubbleText = bubble.querySelector(\"span.text\").innerText;\n\n    if (bubbleText === \"\u0417\u0430\u0434\u0435\u0440\u0436\u0430\u043D \u0437\u0430 \u0431\u043E\u0438\") {\n      console.log(\"\u0417\u0430\u0434\u0435\u0440\u0436\u0430\u043D \u0437\u0430 \u0431\u043E\u0438. \u041D\u0430\u043B\u0430\u0436\u0438\u0432\u0430\u044E \u0441\u0432\u044F\u0437\u0438...\");\n      await fetch(new URL(window.location.href).origin + \"/police/relations/\");\n      AngryAjax.goToUrl(\"/alley/\");\n    } else if (bubbleText === \"\u041E\u0436\u0438\u0434\u0430\u043D\u0438\u0435 \u0431\u043E\u044F\") {\n      try {\n        let bubbleTimeLeft = +bubble\n          .querySelector(\"span.timeleft\")\n          .getAttribute(\"timer\");\n\n        console.log(bubbleText, \"\\n\u041F\u0440\u043E\u0431\u0443\u044E \u0437\u0430\u043D\u043E\u0432\u043E \u0447\u0435\u0440\u0435\u0437: \", bubbleTimeLeft);\n        setTimeout(\n          () => cb(...args),\n          (bubbleTimeLeft + extraDelaySeconds) * 1000\n        );\n        return true;\n      } catch (e) {\n        console.log(\"Waiting for fight. Time unknown... skipping...\\n\", e);\n        return false;\n      }\n    }\n  } catch (error) {\n    console.log(\"[\u2705] All checks passed.\\n\");\n    return false;\n  }\n}\n\nexport async function attackOrReschedule(cb, extraDelaySeconds = 0, args = {}) {\n  const isInFight = await aIsGroupFight();\n  if (isInFight) {\n    console.log(\"\uD83D\uDEA8 \u0418\u0434\u0435\u0442 \u0433\u0440\u0443\u043F\u043F\u043E\u0432\u043E\u0439 \u0431\u043E\u0439, \u043F\u0440\u043E\u0431\u0443\u044E \u0437\u0430\u043D\u043E\u0432\u043E \u0447\u0435\u0440\u0435\u0437 \u043C\u0438\u043D\u0443\u0442\u0443...\");\n    setTimeout(\n      () => {\n        AngryAjax.goToUrl(\"/alley/\");\n        cb(args);\n      },\n      (60 + extraDelaySeconds) * 1000\n    );\n    return true;\n  }\n\n  const alleyCooldown = await getAlleyCooldown();\n  if (alleyCooldown) {\n    console.log(\n      `\u23F1\uFE0F \u041A\u0443\u043B\u0434\u0430\u0443\u043D \u0432 \u0437\u0430\u043A\u043E\u0443\u043B\u043A\u0430\u0445. \u041F\u0440\u043E\u0431\u0443\u044E \u0447\u0435\u0440\u0435\u0437 ${formatTime(alleyCooldown)}.`\n    );\n    setTimeout(() => cb(args), (alleyCooldown + extraDelaySeconds) * 1000);\n    return true;\n  }\n\n  return false;\n}\n\n// fights\nexport async function farmVictims() {\n  if (await waitForCooldown(farmVictims)) {\n    return;\n  }\n  console.log(\"\uD83C\uDF7C Searching for victims...\");\n\n  let res = await fetch(\n    new URL(window.location.href).origin + \"/alley/search/type/\",\n    {\n      headers: {\n        accept: \"*/*\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/alley/search/type/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: \"type=victim&werewolf=0&nowerewolf=1&__ajax=1&return_url=%2Falley%2F\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n  let data = await res.text();\n\n  const { content: htmlString } = JSON.parse(data);\n\n  const doc = parseHtml(htmlString);\n\n  const playerId = getPlayerId(doc);\n  if (!playerId) {\n    return console.log(\"\uD83D\uDD0E Could not find victim.\");\n  }\n\n  console.log(\"\uD83D\uDD0E Found victim:\", playerId);\n\n  const fightId = await attackPlayer(playerId);\n  if (fightId) {\n    console.log(\"\u2705 Fight completed. \", fightId);\n    await checkVictimWorthy(fightId);\n  }\n\n  return setTimeout(() => farmVictims(), 5.1 * 60 * 1000);\n}\n\nexport async function farmEnemies(intervalMin = 5) {\n  if (await waitForCooldown(farmEnemies)) {\n    return;\n  }\n\n  const response = await fetch(\n    new URL(window.location.href).origin + \"/alley/search/type/\",\n    {\n      headers: {\n        accept: \"*/*\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/alley/search/type/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      // body in this format:\n      // `werewolf=0&nowerewolf=1&minlevel=${minLevel}&maxlevel=${maxLevel}&__ajax=1&return_url=%2Falley%2F`\n      body: \"type=enemy&werewolf=0&__ajax=1&return_url=%2Falley%2F\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  const data = await response.text();\n  const { content: htmlString } = JSON.parse(data);\n\n  const doc = parseHtml(htmlString);\n\n  // attack any emeny regardless of stats\n  const playerId = getPlayerId(doc);\n\n  if (!playerId) {\n    console.log(\"\uD83D\uDD0E Could not find enemy, searching again in 1 minute...\");\n    return setTimeout(() => farmEnemies(), 60 * 1000);\n  }\n\n  console.log(\"\uD83E\uDD4A Found enemy, attacking:\", playerId);\n  const fightId = await attackPlayer(playerId);\n  if (fightId) {\n    console.log(\"\u2705 Fight completed. Searching again in 5 minutes.\");\n    setTimeout(() => farmEnemies(), intervalMin * 60 * 1000);\n  }\n}\n\nexport function shouldAttack(doc, statsDiff = 10) {\n  // checks if should attack based on stats\n  // returns the ID of the opponent if should attack, otherwise returns false\n  let oppStats = [\n    ...doc.querySelectorAll(\".fighter2-cell .stats > .stat span.num\"),\n  ]\n    .slice(0, -1)\n    .map((el) => +el.innerText)\n    .reduce((a, b) => a + b, 0);\n\n  let myStats = [\n    ...doc.querySelectorAll(\".fighter1-cell .stats > .stat span.num\"),\n  ]\n    .slice(0, -1)\n    .map((el) => +el.innerText)\n    .reduce((a, b) => a + b, 0);\n\n  if (myStats - oppStats < statsDiff) {\n    console.log(\"Opponent too strong, looking for another opponent.\");\n    return false;\n  }\n  return true;\n}\n\nexport async function checkVictimWorthy(fightId) {\n  const res = await fetch(\n    new URL(window.location.href).origin + \"/fight/\" + fightId\n  );\n  const htmlString = await res.text();\n  const parser = new DOMParser();\n  const fightDocument = parser.parseFromString(htmlString, \"text/html\");\n\n  try {\n    const fightLoot = +fightDocument\n      .querySelector(\".result .tugriki\")\n      .innerText.split(\",\")\n      .join(\"\");\n\n    const opponentName = fightDocument\n      .querySelector(\".fighter2 .user a\")\n      .innerHTML.slice(1);\n\n    // const opponentId = getPlayerId(fightDocument);\n\n    console.log(`\uD83D\uDD0E Loot: ${fightLoot} \uD83D\uDCB5 from opponent: ${opponentName} `);\n    if (fightLoot < 200_000) {\n      const opponentName = fightDocument\n        .querySelector(\".fighter2 .user a\")\n        .innerHTML.slice(1);\n      const opponentId = getPlayerId(fightDocument);\n      await removeFromContacts(opponentName, opponentId);\n    } else if (fightLoot > 300_000) {\n      await addToContacts(opponentName, \"victim\");\n    }\n    return fightId;\n  } catch (e) {\n    console.log(\"Fight not found\", e);\n  }\n  return false;\n}\n\nexport async function checkBronikPieces() {\n  try {\n    let bronikPieceOffer = await getElementsOnThePage(\n      \"#content > div > table > tbody > tr > td:nth-child(1) > div > div > div.change-area > div.exchange > div.get > div > div > img\",\n      \"/factory/build/bronevik/\"\n    );\n\n    let pieceName = bronikPieceOffer.getAttribute(\"alt\");\n\n    let cooldown = await getElementsOnThePage(\n      \"#content > div > table > tbody > tr > td:nth-child(1) > div > div > div.change-area > div.cooldown-wrapper > span.cooldown\",\n      \"/factory/build/bronevik/\"\n    );\n\n    let unixEndTime = +cooldown.getAttribute(\"endtime\");\n\n    const targetPieces = [\n      \"\u043A\u0440\u0430\u0441\u043D\u044B\u0439 \u0441\u0442\u044F\u0433\",\n      \"\u0434\u0443\u0445 \u0440\u0435\u0432\u043E\u043B\u044E\u0446\u0438\u0438\",\n      \"\u0433\u0443\u0441\u0435\u043D\u0438\u0446\u044B\",\n      \"\u043D\u0430\u043A\u043B\u0435\u0439\u043A\u0438 \u0441 \u043B\u043E\u0437\u0443\u043D\u0433\u0430\u043C\u0438\",\n      \"\u0441\u0442\u0430\u043D\u043A\u043E\u0432\u044B\u0439 \u043F\u0443\u043B\u0435\u043C\u0435\u0442\",\n    ];\n\n    // Check piece for a match\n    if (targetPieces.includes(pieceName.toLowerCase())) {\n      showAlert(\n        `\uD83D\uDEA9 \u0411\u0440\u043E\u043D\u0435\u043F\u043E\u0435\u0437\u0434 \u0420\u0435\u0432\u043E\u043B\u044E\u0446\u0438\u0438`,\n        ` \u041F\u043E\u043A\u0443\u043F\u0430\u044E \u0434\u0435\u0442\u0430\u043B\u044C! (${pieceName} \u2705)\\n\u041F\u0440\u043E\u0431\u0443\u044E \u0437\u0430\u043D\u043E\u0432\u043E \u0447\u0435\u0440\u0435\u0437 10 \u043C\u0438\u043D\u0443\u0442.`\n      );\n\n      await fetch(new URL(window.location.href).origin + \"/factory/exchange/\", {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer:\n          new URL(window.location.href).origin + \"/factory/build/bronevik/\",\n        referrerPolicy: \"strict-origin-when-cross-origin\",\n        body: \"action=exchange&code=bronevik&__referrer=%2Ffactory%2Fbuild%2Fbronevik%2F&return_url=%2Ffactory%2Fbuild%2Fbronevik%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n        credentials: \"include\",\n      });\n\n      return setTimeout(checkBronikPieces, 2000);\n    }\n\n    // Schedule the next check\n    let delay = unixEndTime * 1000 - Date.now() + 3000;\n    if (delay && delay > 0) {\n      showAlert(\n        `\uD83D\uDEA9 \u0411\u0440\u043E\u043D\u0435\u043F\u043E\u0435\u0437\u0434 \u0420\u0435\u0432\u043E\u043B\u044E\u0446\u0438\u0438`,\n        ` \u041D\u0435 \u043D\u0430\u0448\u0435\u043B \u043D\u0443\u0436\u043D\u0443\u044E \u0434\u0435\u0442\u0430\u043B\u044C. (\u043F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u044E ${pieceName})\\n\u041F\u0440\u043E\u0431\u0443\u044E \u0437\u0430\u043D\u043E\u0432\u043E \u0447\u0435\u0440\u0435\u0437 ${formatTime(Math.floor(delay / 1000))}.`\n      );\n      setTimeout(checkBronikPieces, delay);\n    } else {\n      await checkBronikPieces(); // If delay has already passed, call immediately\n    }\n  } catch (e) {\n    showAlert(\"\u041E\u0448\u0438\u0431\u043A\u0430!\", \"[\uD83D\uDEA9] \u041D\u0435 \u0443\u0434\u0430\u043B\u043E\u0441\u044C \u043D\u0430\u0439\u0442\u0438 \u0434\u0435\u0442\u0430\u043B\u044C.\\n \u0421\u043C\u043E\u0442\u0440\u0438 \u043A\u043E\u043D\u0441\u043E\u043B\u044C.\");\n    console.log(\"[\uD83D\uDEA9] Could not find Bronik piece.\\n\", e);\n    setTimeout(checkBronikPieces(), 1000);\n  }\n}\n\nexport async function checkInjury() {\n  let injuryIcon = await getElementsOnThePage(\n    \"#content > table.layout > tbody > tr > td.slots-cell > ul > li.avatar.avatar-back-12 > div.icons-place > a > i\",\n    \"player/\"\n  );\n\n  return injuryIcon ? true : false;\n}\n\nexport async function fightMode({ intervalMinutes, minLvl, maxLvl, criteria }) {\n  const hasInjury = await checkInjury();\n  if (hasInjury) {\n    console.log(\"\uD83D\uDEA8 You have an injury. Skipping fight mode.\");\n    return;\n  }\n  await restoreHP();\n\n  console.log(\n    `[\uD83E\uDD4A] Fight mode started.\\nSearching by level (${minLvl}-${maxLvl})`\n  );\n  try {\n    await attackByCriteria({ minLvl, maxLvl });\n  } catch (e) {\n    console.log(\"\uD83D\uDEA7 Could not find opponent. Retrying in 1 minute...\");\n    setTimeout(\n      () => fightMode({ intervalMinutes, minLvl, maxLvl, criteria }),\n      60 * 1000\n    );\n  }\n\n  setTimeout(\n    () =>\n      fightMode({\n        intervalMinutes,\n        minLvl,\n        maxLvl,\n        criteria,\n      }),\n    intervalMinutes * 60 * 1000\n  );\n}\n\nexport async function trackRatMode(frequencyMin = 5) {\n  try {\n    const hasInjury = await checkInjury();\n    if (hasInjury) {\n      console.log(\"\uD83D\uDEA8 You have an injury. Skipping rat mode.\");\n      return;\n    }\n\n    const isBusy = await checkBubble(trackRatMode, frequencyMin);\n\n    if (isBusy) {\n      console.log(\"\uD83D\uDEA8 You are busy. Skipping rat mode.\");\n      return;\n    }\n\n    const ratOver = await getElementsOnThePage(\n      \"#content-no-rat > tbody > tr > td:nth-child(1) > div:nth-child(1) > div > div > p.holders > small\",\n      \"/metro/\"\n    );\n    if (ratOver) {\n      const secondsLeft = +ratOver.getAttribute(\"timer\");\n      console.log(`\uD83D\uDC00 Rat over. Retrying in ${formatTime(secondsLeft)}.`);\n      return setTimeout(\n        () => trackRatMode(frequencyMin),\n        (secondsLeft + 2) * 1000\n      );\n    }\n\n    // check for group fight (TODO: IMPROVE TO ACCOUNT FOR OTHER GROUP FIGHTS)\n    if (AngryAjax.getCurrentUrl().includes(\"fight\")) {\n      // eslint-disable-next-line no-undef\n      let fightId = setInterval(groupFightMakeStep, 500);\n      setTimeout(() => clearInterval(fightId), 4000);\n    }\n\n    const alleyCooldown = await getAlleyCooldown();\n    if (alleyCooldown) {\n      console.log(\n        `[\uD83D\uDC00 Track Rat] \u2744\uFE0F Alley Cooldown.\\n Retrying in ${formatTime(alleyCooldown)}`\n      );\n      setTimeout(() => trackRatMode(), alleyCooldown * 1000);\n      return;\n    }\n\n    // check for cooldown\n    const ratCooldownSeconds = (\n      await getElementsOnThePage(\"#timer-rat-fight .value\", \"/metro/\")\n    )?.getAttribute(\"timer\");\n\n    if (ratCooldownSeconds && +ratCooldownSeconds > 0) {\n      const secondsLeft = +ratCooldownSeconds;\n      console.log(\n        `[\uD83D\uDC00 Track Rat] Rat Cooldown.\\nRetrying in ${formatTime(secondsLeft)}.`\n      );\n      return setTimeout(() => trackRatMode(), secondsLeft * 1000);\n    }\n\n    console.log(\"[\uD83D\uDC00 Track Rat] ATTACK!!1\");\n    await restoreHP();\n    await trackAndAttackRat();\n    setTimeout(() => trackRatMode(), frequencyMin * 60 * 1000);\n  } catch (e) {\n    console.log(\"[\uD83D\uDC00 Track Rat] Could not find rat.\\n\", e);\n  }\n}\n\nexport async function trackAndAttackRat() {\n  await restoreHP();\n  await fetch(new URL(window.location.href).origin + \"/metro/track-rat/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/metro/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"__referrer=%2Fmetro%2F&return_url=%2Fmetro%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  await delay(0.5);\n\n  await fetch(new URL(window.location.href).origin + \"/metro/fight-rat/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/metro/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"__referrer=%2Fmetro%2F&return_url=%2Fmetro%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  await AngryAjax.goToUrl(\"/metro\");\n}\n\nasync function workMetro(action = \"work\") {\n  await fetch(new URL(window.location.href).origin + \"/metro/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    body: `action=${action}&__referrer=%2Fmetro%2F&return_url=%2Fmetro%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nasync function attackRatMetro() {\n  await fetch(new URL(window.location.href).origin + \"/alley/attack-npc/1/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    body: `player=${player.id}&__referrer=%2Fmetro%2F&return_url=%2Fmetro%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function metroWorkMode() {\n  const metroWorkCooldown = await getElementsOnThePage(\n    \"#kopaem .process td#metrodig\",\n    \"/metro/\"\n  );\n\n  const timer = metroWorkCooldown?.getAttribute(\"timer\");\n\n  if (timer) {\n    console.log(\n      `[\u26CF\uFE0F Metro] Metro work cooldown. Retry in ${formatTime(+timer)}.`\n    );\n\n    sendAlert({\n      title: \"\u0423\u0436\u0435 \u0432 \u043C\u0435\u0442\u0440\u043E \u26CF\uFE0F\",\n      img: \"/@/images/pers/npc1_thumb.png\",\n      text: `\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0441\u043F\u0443\u0441\u043A \u0447\u0435\u0440\u0435\u0437 ${formatTime(+timer)}.`,\n    });\n\n    setTimeout(async () => await metroWorkMode(), (+timer + 3) * 1000);\n    return;\n  }\n\n  sendAlert({\n    title: \"\u041A\u043E\u043F\u0430\u0435\u043C \u0432\u0435\u0442\u043A\u0443 \u043C\u0435\u0442\u0440\u043E \u26CF\uFE0F\",\n    img: \"/@/images/pers/npc1_thumb.png\",\n    text: `\u0421\u043B\u0435\u0434\u0443\u044E\u0449\u0438\u0439 \u0441\u043F\u0443\u0441\u043A \u0447\u0435\u0440\u0435\u0437 10:00.`,\n  });\n\n  await attackRatMetro();\n  await workMetro(\"dig\");\n  await workMetro(\"work\");\n\n  // Ensures a delay before calling itself again\n  setTimeout(\n    async () => {\n      await metroWorkMode();\n    },\n    10.1 * 60 * 1000\n  );\n}\n\nexport async function attackByCriteria({\n  minLvl = +player.level - 1,\n  maxLvl = +player.level - 1,\n  criteria = \"level\",\n  performChecks = true,\n  werewolf = 0,\n} = {}) {\n  // const hasInjury = await checkInjury();\n\n  // if (hasInjury) {\n  //   console.log(\"\uD83D\uDEA8 You have an injury. Skipping...\");\n  //   return;\n  // }\n\n  if (performChecks) {\n    const shouldReschedule = await attackOrReschedule(attackByCriteria, 0, {\n      minLvl,\n      maxLvl,\n      criteria,\n      performChecks,\n      werewolf,\n    });\n    if (shouldReschedule) return;\n  }\n\n  let attackPayload = {\n    level: `werewolf=${Number(werewolf)}&nowerewolf=${Number(!werewolf)}&minlevel=${minLvl}&maxlevel=${maxLvl}&__ajax=1&return_url=%2Falley%2F`,\n    type: `type=weak&=${Number(werewolf)}=${Number(werewolf)}&nowerewolf=${Number(!werewolf)}&__ajax=1&return_url=%2Falley%2F`,\n  };\n\n  let res = await fetch(\n    `${new URL(window.location.href).origin}/alley/search/${criteria}/`,\n    {\n      headers: {\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-ch-ua\": '\"Chromium\";v=\"131\", \"Not_A Brand\";v=\"24\"',\n        \"sec-fetch-mode\": \"cors\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/alley/search/level/\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: attackPayload[criteria],\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  let data = await res.text();\n  let htmlStr = await JSON.parse(data).content;\n  let doc = parseHtml(htmlStr);\n\n  console.log(criteria, attackPayload[criteria]);\n\n  let opponentName = doc.querySelector(\".fighter2\")?.innerText;\n  if (!opponentName) return false;\n  let opponentLevel = +doc\n    .querySelector(\".fighter2 .level\")\n    ?.innerText.slice(1, -1);\n  let onclick = doc\n    .querySelector(\"#content > div > div.button.button-fight > a\")\n    ?.getAttribute(\"onclick\");\n\n  if (criteria === \"type\") {\n    if (opponentLevel < minLvl || opponentLevel > maxLvl) {\n      console.log(\n        \"Opponent:\",\n        opponentName,\n        opponentLevel,\n        `\\nLevel is too high or too low (${minLvl}-${maxLvl}). Retrying...`\n      );\n      await attackByCriteria({\n        minLvl,\n        maxLvl,\n        criteria,\n        performChecks,\n        werewolf,\n      });\n      return;\n    }\n  }\n\n  console.log(\"\uD83E\uDD4A Found enemy, attacking:\", opponentName);\n  eval(onclick.split(\";\")[0]);\n}\n\nexport async function farm(count = 25) {\n  for (let i = 0; i < count; i++) {\n    // resetAlleyCooldown();\n    await eatSnickers();\n    const level = +player.level === 24 ? +player.level : +player.level - 2;\n\n    await attackByCriteria({\n      minLvl: level,\n      maxLvl: level,\n      criteria: \"level\",\n      performChecks: false,\n      werewolf: true,\n    });\n\n    await delay(0.2);\n    sendAlert({\n      title: \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n      text: \"\u0411\u043E\u0439 \u2116\" + (i + 1) + \" \u0437\u0430\u0432\u0435\u0440\u0448\u0435\u043D.\",\n      img: \"/@/images/pers/npc2.png\",\n    });\n  }\n}\n\nexport async function eatSnickers() {\n  if (player.energy >= 32) {\n    console.log(\"Using tonus instead of snickers\");\n    cooldownReset(\"tonus\");\n    return;\n  }\n  await fetch(new URL(window.location.href).origin + \"/alley/\", {\n    headers: {\n      accept: \"application/json, text/javascript, */*; q=0.01\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/alley/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=rest_cooldown&code=snikers&ajax=true\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nexport async function resetAlleyCooldown() {\n  if (player.energy >= 32) {\n    console.log(\"Using tonus instead of snickers\");\n    cooldownReset(\"tonus\");\n    return;\n  } else {\n    jobShowTonusAlert();\n  }\n}\n\nexport async function attackPlayer(playerId, werewolf = false) {\n  const res = await fetch(new URL(window.location.href).origin + \"/alley/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/alley/search/type/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=attack&player=${playerId}&werewolf=${werewolf ? 1 : 0}&useitems=0&__referrer=%2Falley%2Fsearch%2Ftype%2F&return_url=%2Falley%2Fsearch%2Ftype%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  const data = await res.json();\n\n  if (data.return_url && data.return_url.includes(\"alley/fight/\")) {\n    return new URL(window.location.href).origin + \"\" + data.return_url;\n  }\n\n  return null;\n}\n\nexport async function getAlleyCooldown() {\n  try {\n    let cooldown = await getElementsOnThePage(\n      \"#alley-search-myself span.timer\",\n      \"/alley/\"\n    );\n\n    let cooldownSeconds = cooldown.getAttribute(\"timer\");\n\n    if (+cooldownSeconds < 0) {\n      return false;\n    }\n\n    return +cooldownSeconds;\n  } catch (e) {\n    console.log(\"\uD83D\uDEA7 Could not find cooldown\");\n    return false;\n  }\n}\n\nexport async function joinChaoticFight() {\n  await restoreHP();\n  AngryAjax.reload();\n\n  // try for money\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/fight/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=join+fight&fight=0&price=money&type=chaotic&__ajax=1&return_url=%2Falley%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  // try for \u0436\u0435\u0442\u043E\u043D\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/fight/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=join+fight&fight=0&price=huntbadge&type=chaotic&__ajax=1&return_url=%2Falley%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  // try for \u0437\u0443\u0431\n  await fetch(new URL(window.location.href).origin + \"/fight/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en;q=0.9\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-dest\": \"empty\",\n      \"sec-fetch-mode\": \"cors\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/fight/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: \"action=join+fight&fight=0&price=zub&type=chaotic&__ajax=1&return_url=%2Falley%2F\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  AngryAjax.reload();\n}\n\nexport async function chaoticFightMode() {\n  function isWithinMoscowTimeRange() {\n    const now = new Date();\n    const options = { timeZone: \"Europe/Moscow\", hour12: false };\n    const moscowTime = new Intl.DateTimeFormat(\"en-US\", {\n      ...options,\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    }).format(now);\n\n    const [hour, minute] = moscowTime.split(\":\").map(Number);\n    const currentMinutes = hour * 60 + minute;\n\n    return currentMinutes >= 690 && currentMinutes <= 1411; // 11:30 (690 min) to 23:31 (1411 min)\n  }\n\n  if (!isWithinMoscowTimeRange()) return;\n\n  console.log(\n    \"[\uD83E\uDD3A] Chaotic fight mode. Waiting for the next scheduled fight...\"\n  );\n  async function scheduleFight() {\n    const now = new Date();\n    const currentMinutes = now.getMinutes();\n\n    // Calculate the next target time\n    const nextMinute = [14, 29, 44, 59].find(\n      (minute) => currentMinutes < minute\n    );\n    const nextHour =\n      nextMinute === undefined ? now.getHours() + 1 : now.getHours();\n    const targetMinute = nextMinute !== undefined ? nextMinute : 14;\n    const targetTime = new Date(\n      now.getFullYear(),\n      now.getMonth(),\n      now.getDate(),\n      nextHour,\n      targetMinute,\n      30\n    );\n\n    const delayMs = targetTime.getTime() - now.getTime();\n\n    showAlert(\n      \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n      `\u0417\u0430\u043F\u0438\u0441\u044C \u043D\u0430 \u0445\u0430\u043E\u0442 \u0432 ${targetTime.toUTCString()} (\u0447\u0435\u0440\u0435\u0437 ${formatTime(Math.floor(delayMs / 1000))})`\n    );\n\n    if (delayMs > 0) {\n      setTimeout(async () => {\n        await joinChaoticFight();\n        setTimeout(async () => await scheduleFight(), 60 * 1000); // Schedule the next fight after one minute\n      }, delayMs);\n    } else {\n      await joinChaoticFight();\n      setTimeout(async () => await scheduleFight(), 60 * 1000); // Schedule the next fight after one minute\n    }\n  }\n\n  scheduleFight();\n}\n\nexport async function makeTurn(turns = 10) {\n  if (!AngryAjax.getCurrentUrl().includes(\"fight\")) return;\n\n  for (let i = 0; i < turns; i++) {\n    const isFightOver = document.querySelector(\"#fight-actions > div.waiting\");\n    if (isFightOver) {\n      console.log(isFightOver);\n      return;\n    }\n    console.log(\"\u041F\u0440\u043E\u043F\u0443\u0441\u043A\u0430\u044E \u0445\u043E\u0434...\");\n    groupFightMakeStep();\n    AngryAjax.reload();\n    await delay(0.5);\n  }\n}\n\nexport async function signUpForSiri() {\n  const battleHours = [11, 15, 19, 23]; // Moscow time\n\n  // Get Moscow time\n  const moscowTime = getMoscowTime();\n  const currentHour = moscowTime.getHours();\n\n  let nextBattleHour =\n    battleHours.find((hour) => hour > currentHour) || battleHours[0];\n  if (\n    nextBattleHour === battleHours[0] &&\n    currentHour > battleHours[battleHours.length - 1]\n  ) {\n    nextBattleHour = battleHours[0]; // Next battle hour is the first one of the next day\n  }\n\n  const nextBattleDate = getMoscowTime();\n  if (nextBattleHour <= currentHour) {\n    nextBattleDate.setDate(nextBattleDate.getDate() + 1);\n  }\n\n  const nextBattleSeconds = player.nickname === \"Toni Kroos\" ? 58 : 57;\n  nextBattleDate.setHours(nextBattleHour - 1, 59, nextBattleSeconds, 0);\n\n  let msTillNextBattle = nextBattleDate.getTime() - moscowTime.getTime();\n\n  sendAlert({\n    title: \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    text: `\u0417\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u044E\u0441\u044C \u043D\u0430 \u0418\u0418 \u0447\u0435\u0440\u0435\u0437 ${formatTime(msTillNextBattle / 1000)}.<br><i>(\u0432 ${nextBattleDate.toLocaleTimeString(\"ru-RU\")})</i>`,\n    img: \"/@/images/pers/man131_thumb.png\",\n  });\n\n  setTimeout(async () => await joinSiri(), msTillNextBattle);\n\n  setTimeout(\n    async () => {\n      await signUpForSiri();\n    },\n    msTillNextBattle + 20 * 1000\n  );\n}\n\nexport async function joinSiri() {\n  await restoreHP();\n\n  await fetch(\n    new URL(window.location.href).origin + \"/phone/call/joinPhoneBoss/\",\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-ch-ua\": '\"Not A(Brand\";v=\"8\", \"Chromium\";v=\"132\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"macOS\"',\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: \"ajax=1&slot=phone3&type=phoneboss3\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n}\n\nexport async function signUpForDeps() {\n  const battleHours = [12, 16, 20, 24]; // Moscow time\n\n  // Get Moscow time\n  const moscowTime = getMoscowTime();\n  const currentHour = moscowTime.getHours();\n\n  let nextBattleHour =\n    battleHours.find((hour) => hour > currentHour) || battleHours[0];\n  if (\n    nextBattleHour === battleHours[0] &&\n    currentHour > battleHours[battleHours.length - 1]\n  ) {\n    nextBattleHour = battleHours[0]; // Next battle hour is the first one of the next day\n  }\n\n  const nextBattleDate = getMoscowTime();\n  if (nextBattleHour <= currentHour) {\n    nextBattleDate.setDate(nextBattleDate.getDate() + 1);\n  }\n\n  nextBattleDate.setHours(nextBattleHour - 1, 50, 0, 0);\n\n  let msTillNextBattle = nextBattleDate.getTime() - moscowTime.getTime();\n\n  sendAlert({\n    title: \"\u0412\u0441\u0451 \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E \u0441\u0434\u0435\u043B\u0430\u043B!\",\n    img: \"/@/images/pers/npc_dps_thumb.png\",\n    text: `\u0417\u0430\u043F\u0438\u0441\u044B\u0432\u0430\u044E\u0441\u044C \u043D\u0430 \u0414\u044D\u043F\u0441\u0430 \u0447\u0435\u0440\u0435\u0437 ${formatTime(msTillNextBattle / 1000)}.<br> <i>(\u0432 ${nextBattleDate.toLocaleTimeString(\"ru-RU\")})</i>`,\n  });\n\n  setTimeout(async () => await joinDeps(), msTillNextBattle);\n}\n\nexport async function joinDeps() {\n  await restoreHP();\n  await fetch(\n    new URL(window.location.href).origin + \"/phone/call/joinPhoneBoss/\",\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: \"ajax=1&slot=phone2&type=phoneboss2\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n}\n\nexport async function joinPahan() {\n  await fetch(\n    new URL(window.location.href).origin + \"/phone/call/joinPhoneBoss/\",\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-ch-ua\": '\"Not A(Brand\";v=\"8\", \"Chromium\";v=\"132\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"macOS\"',\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: \"ajax=1&slot=phone1&type=phoneboss1\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  AngryAjax.goToUrl(\"/alley/\");\n}\n\nexport async function joinGypsy() {\n  const gypsyCooldown = await getElementsOnThePage(\n    \"#divSignInCampBattle \",\n    \"camp/gypsy/\"\n  );\n  if (!gypsyCooldown) {\n    showAlert(\n      \"\u0411\u043E\u0439 \u0441 \u0412\u043E\u0436\u0434\u0435\u043C. \u2604\uFE0F\",\n      \"\u041D\u0435\u0442\u0443 \u0431\u043E\u044F \u0432 \u0434\u0430\u043D\u043D\u044B\u0439 \u043C\u043E\u043C\u0435\u043D\u0442. \u041F\u043E\u043F\u0440\u043E\u0431\u0443\u0439\u0442\u0435 \u043F\u043E\u0437\u0436\u0435.\"\n    );\n    return false;\n  }\n  console.log(gypsyCooldown);\n\n  $.post(\n    \"/camp/gypsy/\",\n    { action: \"gypsyJoinFight\" },\n    function (data) {\n      if (data.return_url) {\n        document.location.href = data.return_url;\n      }\n      if (!Gypsy.showError(data)) {\n        Gypsy.renderBattleState(data.battle);\n      }\n    },\n    \"json\"\n  );\n}\n\nexport async function playGypsy() {\n  await fetch(new URL(window.location.href).origin + \"/camp/gypsy/\", {\n    headers: {\n      accept: \"application/json, text/javascript, */*; q=0.01\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/camp/gypsy/\",\n    body: \"action=gypsyStart&gametype=0\",\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n\n  await fetch(new URL(window.location.href).origin + \"/camp/gypsy/\", {\n    headers: {\n      accept: \"application/json, text/javascript, */*; q=0.01\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/camp/gypsy/\",\n    body: \"action=gypsyAuto\",\n    method: \"POST\",\n    mode: \"cors\",\n  });\n\n  AngryAjax.goToUrl(\"/camp/gypsy/\");\n}\n\nfunction searchInventory(query, inventory) {\n  query = query.toLowerCase();\n  return Object.values(inventory).filter((item) =>\n    item.name.toLowerCase().includes(query)\n  );\n}\n\nfunction formatStackList(stackList) {\n  return Object.values(stackList).map((entry) => ({\n    expiryDate: entry[0],\n    count: Number(entry[1]),\n    itemId: entry[3],\n  }));\n}\n\nasync function tradeSiri(itemId) {\n  await fetch(\n    new URL(window.location.href).origin + \"/phone/call/tradeItemView/\",\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-ch-ua\": '\"Not:A-Brand\";v=\"24\", \"Chromium\";v=\"134\"',\n        \"sec-ch-ua-mobile\": \"?0\",\n        \"sec-ch-ua-platform\": '\"macOS\"',\n        \"sec-fetch-dest\": \"empty\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      body: `ajax=1&item=${itemId}&slot=phone3`,\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  const res = await fetch(\n    new URL(window.location.href).origin + \"/phone/call/giveItem/\",\n    {\n      headers: {\n        accept: \"application/json, text/javascript, */*; q=0.01\",\n        \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n        \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n        \"sec-fetch-mode\": \"cors\",\n        \"sec-fetch-site\": \"same-origin\",\n        \"x-requested-with\": \"XMLHttpRequest\",\n      },\n      referrer: new URL(window.location.href).origin + \"/phone/call\",\n      referrerPolicy: \"strict-origin-when-cross-origin\",\n      body: \"ajax=1&slot=phone3\",\n      method: \"POST\",\n      mode: \"cors\",\n      credentials: \"include\",\n    }\n  );\n\n  const data = await res.text();\n  const { prize } = JSON.parse(data);\n  console.log(prize);\n  return $(`<div class=\"prize-container\">${prize}</div>`);\n}\n\nexport async function tradeAllSiri() {\n  const inventory = await useItem(0);\n\n  const siris = searchInventory(\"\u0441\u0438\u0440\u0438\", inventory)[0];\n  const siriStack = formatStackList(siris.stackList);\n  console.log(siriStack);\n\n  for (const item of siriStack) {\n    for (let i = 0; i < item.count; i++) {\n      // console.log(item);\n      await tradeSiri(item.itemId);\n    }\n  }\n}\n", "/* global $ postUrl mt_rand Power1 */\nimport { HEADERS, showAlert } from \"./index.js\";\nimport { createButton, createNumberAction } from \"./ui/button.js\";\nimport { delay } from \"./utils.js\";\n\nlet Moscowpoly = window.Moscowpoly;\nlet SteppedEase = window.SteppedEase;\nlet TweenLite = window.TweenLite;\n\nexport function moscowpolySpeedUp() {\n  Moscowpoly.animateDices = function (result) {\n    var self = this;\n\n    var $dice1 = this.$dice1;\n    var $dice2 = this.$dice2;\n\n    $dice1.unbind(\"click\");\n    $dice2.unbind(\"click\");\n\n    // \u043F\u0435\u0440\u0432\u044B\u0439 \u043A\u0443\u0431\u0438\u043A \u0441\u043F\u0440\u0430\u0439\u0442\u043E\u0432\u0430\u044F \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044F\n    $dice1.removeAttr(\"style\");\n    $dice1.css({ \"background-position\": \"0 0\" }).show(0);\n    var dice1Steps = mt_rand(10, 20);\n    var dice1AnimationTime = (mt_rand(1, 2) * dice1Steps) / 1000;\n    var dice1TweenFrames = TweenLite.to($dice1, dice1AnimationTime, {\n      backgroundPosition: -1 * 65 * dice1Steps + \"px 0\",\n      ease: SteppedEase.config(dice1Steps),\n      paused: true,\n      onComplete: function () {\n        $dice1\n          .css(\"background-position\", \"\")\n          .removeClass(\"i-1 i-2 i-3 i-4 i-5 i-6\")\n          .addClass(\"i-\" + result[0]);\n\n        if (dice1AnimationTime >= dice2AnimationTime) {\n          self.onAnimateDicesComplete();\n        }\n      },\n    });\n\n    // \u0432\u0442\u043E\u0440\u043E\u0439 \u043A\u0443\u0431\u0438\u043A \u0441\u043F\u0440\u0430\u0439\u0442\u043E\u0432\u0430\u044F \u0430\u043D\u0438\u043C\u0430\u0446\u0438\u044F\n    $dice2.removeAttr(\"style\");\n    $dice2.css(\"background-position\", \"0 -65px\").show(0);\n    var dice2Steps = mt_rand(10, 20);\n    var dice2AnimationTime = (mt_rand(1, 2) * dice2Steps) / 1000;\n    var dice2TweenFrames = TweenLite.to($dice2, dice2AnimationTime, {\n      backgroundPosition: -1 * 65 * dice2Steps + \"px -65px\",\n      ease: SteppedEase.config(dice2Steps),\n      paused: true,\n      onComplete: function () {\n        $dice2\n          .css(\"background-position\", \"\")\n          .removeClass(\"i-1 i-2 i-3 i-4 i-5 i-6\")\n          .addClass(\"i-\" + result[1]);\n\n        if (dice1AnimationTime < dice2AnimationTime) {\n          self.onAnimateDicesComplete();\n        }\n      },\n    });\n\n    // \u0443\u0433\u043E\u043B \u043E\u0442\u043A\u0443\u0434\u0430 \u043A\u0438\u043D\u0435\u043C \u043A\u0443\u0431\u0438\u043A\n    var dicePosition =\n      Moscowpoly.dicePositions[mt_rand(0, Moscowpoly.dicePositions.length - 1)];\n\n    // \u043F\u0435\u0440\u0432\u044B\u0439 \u043A\u0443\u0431\u0438\u043A \u0431\u0440\u043E\u0441\u043E\u043A\n    $dice1.css(dicePosition);\n    var dice1Params = { ease: Power1.easeOut, paused: true };\n    for (var i in dicePosition) {\n      dice1Params[i] = mt_rand(90, 350);\n    }\n    var dice1TweenPosition = TweenLite.to(\n      $dice1,\n      dice1AnimationTime,\n      dice1Params\n    );\n\n    // \u043F\u0435\u0440\u0432\u044B\u0439 \u043A\u0443\u0431\u0438\u043A \u0431\u0440\u043E\u0441\u043E\u043A\n    $dice2.css(dicePosition);\n    var dice2Params = { ease: Power1.easeOut, paused: true };\n    for (var i in dicePosition) {\n      dice2Params[i] = mt_rand(90, 350);\n      if (Math.abs(dice1Params[i] - dice2Params[i]) < 35) {\n        dice1Params[i] += dice1Params[i] > dice2Params[i] ? 50 : -50;\n      }\n    }\n    var dice2TweenPosition = TweenLite.to(\n      $dice2,\n      dice2AnimationTime,\n      dice2Params\n    );\n\n    // \u043F\u043E\u0433\u043D\u0430\u043B\u0438\n    dice1TweenFrames.play();\n    dice2TweenFrames.play();\n\n    dice1TweenPosition.play();\n    dice2TweenPosition.play();\n  };\n  Moscowpoly.animateFigureRoute = function (steps) {\n    if (steps.length == 0) {\n      this.setInAction(false);\n\n      this.setCellActive(this.data.current);\n      this.updateInfoHTML();\n      this.initState();\n      return;\n    }\n\n    var self = this;\n    var position = Moscowpoly.getFigurePositionByCell(steps[0]);\n\n    TweenLite.to(this.$figure, 0.1, {\n      top: position.top,\n      left: position.left,\n      // ease: Power2.easeOut, // \u041F\u0440\u0438\u0442\u043E\u0440\u043C\u0430\u0436\u0438\u0432\u0430\u0442\u044C \u043D\u0430 \u043A\u0430\u0436\u0434\u043E\u0439 \u043A\u043B\u0435\u0442\u043A\u0435\n      ease: Linear.easeNone, // \u041F\u043B\u0430\u0432\u043D\u043E \u043F\u0440\u043E\u0439\u0442\u0438 \u043F\u043E \u0432\u0441\u0435\u043C \u043A\u043B\u0435\u0442\u043A\u0430\u043C\n      paused: false,\n      onComplete: function () {\n        steps = steps.splice(1, steps.length - 1);\n\n        self.animateFigureRoute(steps);\n      },\n    });\n  };\n\n  Moscowpoly.dropDices = function () {\n    this.setInAction(true);\n\n    var self = this;\n\n    // posturl\n    postUrl(\n      \"/home/moscowpoly_roll/\",\n      { action: \"moscowpoly_roll\", ajax: 1 },\n      \"post\",\n      function (data) {\n        self.lastMove = data;\n        self.state = data.state;\n        self.animateDices(data.rollResult);\n\n        if (data.text_m) {\n          if (\n            data.text_m?.text?.includes(\n              \"\u0417\u0430 \u043F\u0440\u043E\u0445\u043E\u0436\u0434\u0435\u043D\u0438\u0435 \u043A\u043B\u0435\u0442\u043A\u0438 \u0441\u0442\u0430\u0440\u0442 \u0432\u044B \u043F\u043E\u043B\u0443\u0447\u0430\u0435\u0442\u0435:\"\n            )\n          )\n            return;\n\n          self.addAlert(data.text_m);\n        }\n      }\n    );\n\n    setTimeout(() => {\n      Moscowpoly.setInAction(false);\n      Moscowpoly.doActivate();\n    }, 500);\n  };\n\n  Moscowpoly.doActivate = function () {\n    if (this.inAction) {\n      return;\n    }\n    this.setInAction(true);\n    var self = this;\n\n    postUrl(\n      \"/home/moscowpoly_activate/\",\n      { action: \"moscowpoly_activate\", ajax: 1 },\n      \"post\",\n      function (data) {\n        self.state = data.state;\n        self.setInAction(false);\n\n        if (\n          data.text_m &&\n          !data.text_m?.text?.includes(\"\u0411\u043E\u043D\u0443\u0441 \u0443\u0436\u0435 \u0430\u043A\u0442\u0438\u0432\u0438\u0440\u043E\u0432\u0430\u043D\")\n        ) {\n          self.addAlert(data.text_m);\n        }\n\n        self.updateInfoHTML();\n        self.initState();\n      }\n    );\n  };\n\n  Moscowpoly.show = function () {\n    var self = this;\n\n    postUrl(\n      \"/home/moscowpoly_state/\",\n      { action: \"moscowpoly_state\", ajax: 1 },\n      \"post\",\n      function (data) {\n        self.open(data);\n\n        if (data.text_m) {\n          self.addAlert(data.text_m);\n        }\n\n        if ($(\".moscowpoly-multi-btn\").length) return;\n\n        const btnInputField = createNumberAction({\n          label: \"\u0411\u0440\u043E\u0441\u0438\u0442\u044C \u043A\u0443\u0431\u0438\u043A\u0438\",\n          action: () => {\n            Moscowpoly.dropDices();\n            return new Promise((resolve) => setTimeout(resolve, 1000));\n          },\n          className: \"moscowpoly-multi\",\n          disableAfterClick: false,\n        });\n\n        $(\".moscowpoly-panel__td-center\").append(btnInputField);\n      }\n    );\n  };\n}\n\nexport async function throwDices(count = 10, delaySeconds = 0.5) {\n  for (let i = 0; i < count; i++) {\n    await fetch(\n      new URL(window.location.href).origin + \"/home/moscowpoly_roll/\",\n      {\n        headers: {\n          accept: \"*/*\",\n          \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n          \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n          \"sec-fetch-dest\": \"empty\",\n          \"sec-fetch-mode\": \"cors\",\n          \"sec-fetch-site\": \"same-origin\",\n          \"x-requested-with\": \"XMLHttpRequest\",\n        },\n        referrer: new URL(window.location.href).origin + \"/home/\",\n        referrerPolicy: \"strict-origin-when-cross-origin\",\n        body: \"action=moscowpoly_roll&ajax=1&__referrer=%2Fhome%2F&return_url=%2Fhome%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n        credentials: \"include\",\n      }\n    );\n\n    const activateResponse = await fetch(\n      new URL(window.location.href).origin + \"/home/moscowpoly_activate/\",\n      {\n        headers: HEADERS,\n        referrer: new URL(window.location.href).origin + \"/home/\",\n        referrerPolicy: \"strict-origin-when-cross-origin\",\n        body: \"action=moscowpoly_activate&ajax=1&__referrer=%2Fhome%2F&return_url=%2Fhome%2F\",\n        method: \"POST\",\n        mode: \"cors\",\n        credentials: \"include\",\n      }\n    );\n\n    const data = await activateResponse.json();\n\n    if (data.result) {\n      showAlert(data.title, data.data.text_m.text);\n    }\n\n    await delay(delaySeconds);\n  }\n}\n", "/* global HomeNyTree countdown AngryAjax */\n\nimport { getElementsOnThePage, strToHtml } from \"./utils.js\";\n\nconst timersData = [\n  // shaman\n  {\n    selector:\n      \"#content > div > div.boss-common-block > div.boss-common-bottom-panel > div > div > span.boss-common-active-from-value\",\n    url: new URL(window.location.href).origin + \"/shaman/\",\n    imgSrc: \"/@/images/loc/shaman/abil_6.png\",\n    targetHref: \"/shaman/\",\n  },\n\n  // grumpy cat\n  {\n    selector:\n      \"#content > div > div > div.grumpy2019-bottom-panel > div.grumpy2019-available-block > span.grumpy2019-available-value\",\n    url: new URL(window.location.href).origin + \"/grumpy/\",\n    imgSrc: \"/@/images/loc/grumpy/abils/abil_1.png\",\n    targetHref: \"/grumpy/\",\n  },\n\n  // matrix\n  {\n    selector: \"#spanMatrixTimer\",\n    url: new URL(window.location.href).origin + \"/matrix/\",\n    imgSrc: \"/@/images/obj/beast_ability/ability54.png\",\n    targetHref: \"/matrix/\",\n  },\n\n  // tarrifs\n  {\n    selector: \".worldwar2025-available-value\",\n    url: new URL(window.location.href).origin + \"/tariffs/\",\n    imgSrc: \"/@/images/obj/gifts2025/may/box_worldwar.png\",\n    targetHref: \"/tariffs/\",\n  },\n\n  // karlsson\n  {\n    selector: \".carlson2025-available-value\",\n    url: new URL(window.location.href).origin + \"/karlsson/\",\n    imgSrc: \"/@/images/obj/gifts2025/may/box_carlson.png\",\n    targetHref: \"/karlsson/\",\n  },\n\n  // SMOKE SCREEN\n  {\n    selector:\n      \"#content > div > div.rocket2023-block > div.rocket2023-available-block > span.rocket2023-available-value\",\n    url: new URL(window.location.href).origin + \"/kosmodromx/\",\n    imgSrc: \"/@/images/obj/gifts2023/may/abil_kosm_smoke.png\",\n    targetHref: \"/kosmodromx/\",\n  },\n  // DYI\n  {\n    selector: \"TODO dyi selector\",\n    url: new URL(window.location.href).origin + \"/kosmodromx/\",\n    imgSrc: \"/@/images/loc/rocket/rocket.png\",\n    targetHref: \"/kosmodromx/\",\n  },\n\n  // hawthorn\n  {\n    selector:\n      \"#hawthorn-popup > div > div.hawthorn-popup__actions > div > span\",\n    url: new URL(window.location.href).origin + \"/trainer/vip/\",\n    imgSrc: \"/@/images/loc/vip/hawthorn_icon.png\",\n    targetHref: \"/trainer/vip/hawthorn/\",\n  },\n\n  // tattoo press\n  {\n    selector:\n      \"#content > table > tbody > tr > td:nth-child(2) > div.block-bordered-tattoo > p:nth-child(3) > span\",\n    url: new URL(window.location.href).origin + \"/nightclub/\",\n    imgSrc: \"/@/images/obj/8march6/tattoo_mach.png\",\n    targetHref: \"/nightclub/\",\n  },\n\n  // dino\n  {\n    selector:\n      \"#dino-tab-content-2 > div.dinopark-dino-stats > div:last-child > div.dinopark-dino-stat__value > span\",\n    url: new URL(window.location.href).origin + \"/dinopark/\",\n    imgSrc: \"/@/images/loc/dinopark/dinoegg.png\",\n    targetHref: \"/dinopark/\",\n  },\n\n  // chaikhana69\n  {\n    selector:\n      \"#content > div > div.pilaf-actions .pilaf-activate-button-inner2\",\n    url: new URL(window.location.href).origin + \"/teahouse/\",\n    imgSrc: \"/@/images/loc/pilaf/objs/obj_3.png\",\n    targetHref: \"/teahouse/\",\n  },\n\n  // bender\n  {\n    selector:\n      \"#content > div > div.bender-content > div.bender-use > div > div > button\",\n    url: new URL(window.location.href).origin + \"/badasrobot/\",\n    imgSrc: \"/@/images/obj/gifts2017/futurama/bender/head.png\",\n    targetHref: \"/badasrobot/\",\n  },\n\n  // gifts\n  // {\n  //   selector: \"#nytreetimer\",\n  //   url: new URL(window.location.href).origin + \"/home/\",\n  //   imgSrc: \"/@/images/obj/gifts/mj_ny24/3-3_64.png\",\n  //   onclick: window.HomeNyTree.showGiftsBlock,\n  // },\n\n  // tonic\n  // {\n  //   selector:\n  //     \"#content > div > div.icecream-fabric > div:nth-child(2) > div.icecream-fabric-item__content > div.icecream-fabric-item-actions > div > span.time\",\n  //   url: new URL(window.location.href).origin + \"/toniks/\",\n  //   imgSrc: \"/@/images/loc/cocktails/pink_3.png\",\n  //   targetHref: \"/toniks/\",\n  // },\n\n  // hacker\n  // {\n  //   selector:\n  //     \"#content > div > div > div.boss-common-available-block > span.boss-common-available-value\",\n  //   url: new URL(window.location.href).origin + \"/hacker/\",\n  //   imgSrc: \"/@/images/obj/gifts2024/may/hacker.png\",\n  //   targetHref: \"/hacker/\",\n  // },\n  // mars\n  // {\n  //   selector:\n  //     \"#content > div > div.musk2020-bottom-panel > div > div.musk2020-mars-actions.disabled > div > span\",\n  //   url: new URL(window.location.href).origin + \"/mars2024/\",\n  //   imgSrc: \"/@/images/loc/musk/musk2020-mars2024.png\",\n  //   targetHref: \"/mars2024/\",\n  // },\n];\n\nasync function getTimer({ selector, url, imgSrc, targetHref, onclick }) {\n  if (!selector || !url || !imgSrc) {\n    console.log(\"Could not fetch timer. Data missing.\");\n    return;\n  }\n\n  let timerSpan = await getElementsOnThePage(selector, new URL(url).pathname);\n\n  if (targetHref === \"/dinopark/\") {\n    const dinoImg = await getElementsOnThePage(\n      \".dinopark-dino-pic__img\",\n      \"/dinopark/\"\n    );\n    imgSrc = dinoImg.getAttribute(\"src\");\n  }\n\n  let imgTag = strToHtml(\n    `<img style=\"width: 56px; height: 56px; cursor: pointer; ${targetHref === \"/shaman/\" && \"transform: scale(1.4);transform-origin: center;\"}\" src=${imgSrc} />`\n  );\n\n  if (!timerSpan || timerSpan === null) {\n    timerSpan = strToHtml(\"<span>\u0413\u043E\u0442\u043E\u0432\u043E</span>\");\n  } else {\n    if (timerSpan?.innerText === \"\u0417\u0430\u0431\u0440\u0430\u0442\u044C \u043F\u043E\u0439\u043B\u043E!\") {\n      timerSpan.innerText = \"\u0413\u043E\u0442\u043E\u0432\u043E\";\n    } else {\n      countdown(timerSpan);\n    }\n  }\n\n  timerSpan.style.cssText = STYLES.hawthorn;\n\n  if (timerSpan?.getAttribute(\"class\")?.includes(\"button\")) {\n    $(timerSpan).css({\n      lineHeight: \"24px\",\n      padding: \"3px 12px\",\n    });\n  }\n\n  if (targetHref === \"/badasrobot/\") {\n    // fix bender button styles\n    timerSpan.styles;\n  }\n\n  let container = strToHtml(`<div></div>`);\n\n  container.style.cssText = `display: flex; align-items: center; flex-direction: column;`;\n\n  container.appendChild(imgTag);\n  container.appendChild(timerSpan);\n\n  if (targetHref) {\n    imgTag.addEventListener(\"click\", () => AngryAjax.goToUrl(targetHref));\n  }\n  if (onclick) {\n    imgTag.addEventListener(\"click\", onclick);\n  }\n\n  return container;\n}\n\nasync function drawTimers() {\n  const renderTimers = async () => {\n    const timers = await Promise.all(\n      timersData.map(async (timerData) => {\n        try {\n          return await getTimer(timerData);\n        } catch (error) {\n          console.log(\"Error processing timer:\", timerData, error);\n          return null; // Skip the timer that failed (does not exist?)\n        }\n      })\n    );\n\n    const validTimers = timers.filter(Boolean);\n    const container = strToHtml(\n      `<div class=\"timers-container\" style=\"${STYLES.timersContainer}\"></div>`\n    );\n\n    function handleResize() {\n      if (window.innerWidth < 1330) {\n        container.style.display = \"none\";\n      } else {\n        container.style.display = \"grid\";\n      }\n    }\n\n    window.addEventListener(\"resize\", handleResize);\n    handleResize();\n\n    container.replaceChildren(...validTimers);\n    document.querySelector(\".main-block\").appendChild(container);\n  };\n\n  const button = strToHtml(`\n      <div class=\"button\" style=\"position: fixed; top: 32px; right: 8px;\" id=\"timers-trigger\"><span class=\"f\"><i class=\"rl\"></i><i class=\"bl\"></i><i class=\"brc\"></i><div class=\"c\" style=\"padding: 1px 3px;\">\n      \u041F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0422\u0430\u0439\u043C\u0435\u0440\u044B\n      </div></span></div>\n      `);\n\n  button.addEventListener(\"click\", () => {\n    renderTimers();\n    button.remove(); // Remove the button after clicking\n  });\n\n  document.querySelector(\".main-block\").appendChild(button);\n}\n\nasync function getPetsTimers() {\n  // TODO ??\n}\n\nasync function getPetsIds(imgIdsArr = [\"45-7\", \"84-4\", \"42-6\", \"85-5\"]) {\n  try {\n    const petsList = await getElementsOnThePage(\".object-thumbs\", \"/petarena/\");\n\n    const ids = Array.from(petsList[0].querySelectorAll(\".object-thumb\"))\n      .filter((thumb) => {\n        const imgId = thumb\n          .querySelector(\"img\")\n          .src.match(/\\/obj\\/pets\\/(.*?)\\.png/)[1];\n        return [\"45-7\", \"84-4\", \"42-6\", \"85-5\"].includes(imgId);\n      })\n      .map(\n        (thumb) =>\n          thumb\n            .querySelector(\"#train-parrot\")\n            .getAttribute(\"onclick\")\n            .match(/\\/petarena\\/train\\/(\\d+)\\//)[1]\n      );\n\n    return ids;\n  } catch (error) {\n    console.log(\"Could not fetch pets ids\\n\", error);\n  }\n}\n\nlet STYLES = {\n  hawthorn: `\n    text-align: center;\n    margin: auto 4px;\n    font-family: 'bloccregular'; \n    font-size: 16px; \n    color: #ffffff; \n    text-shadow: rgb(73, 73, 73) 2px 0px 0px, rgb(73, 73, 73) 1.75517px 0.958851px 0px, rgb(73, 73, 73) 1.0806px 1.68294px 0px, rgb(73, 73, 73) 0.141474px 1.99499px 0px, rgb(73, 73, 73) -0.832294px 1.81859px 0px, rgb(73, 73, 73) -1.60229px 1.19694px 0px, rgb(73, 73, 73) -1.97998px 0.28224px 0px, rgb(73, 73, 73) -1.87291px -0.701566px 0px, rgb(73, 73, 73) -1.30729px -1.5136px 0px, rgb(73, 73, 73) -0.421592px -1.95506px 0px, rgb(73, 73, 73) 0.567324px -1.91785px 0px, rgb(73, 73, 73) 1.41734px -1.41108px 0px, rgb(73, 73, 73) 1.92034px -0.558831px 0px;\n  `,\n  timersContainer: `\n    display: grid;\n    grid-template-columns: repeat(2, 1fr);\n    gap: 8px;\n    min-width: 190px;\n    position: fixed;\n    top: 32px;\n    right: 8px;\n    font-size: 79%;\n    font-family: Tahoma, Arial, sans-serif;\n    line-height: 1.3;\n    padding: 12px 6px;\n    border-radius: 8px;\n    background: rgba(0, 0, 0, 0.8);\n    box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.3);\n    border: none;\n    min-width: 190px;\n    `,\n};\n\nfunction getGiftsTimer() {\n  const timerSpan = strToHtml(\n    // eslint-disable-next-line no-undef\n    `<span timer=\"${HomeNyTree.nextGameTimeleft}\" process=\"1\">02:43:38</span>`\n  );\n\n  const imgTag = strToHtml(\n    `<img style=\"width: 48px; height: 48px;\" src=\"/@/images/obj/gifts/mj_ny24/3-3_64.png\" />`\n  );\n\n  let container = strToHtml(\n    `<div style=\"display: flex; cursor: pointer;\"></div>`\n  );\n\n  timerSpan.style.cssText = STYLES.hawthorn;\n  countdown(timerSpan);\n\n  container.appendChild(timerSpan);\n  container.appendChild(imgTag);\n\n  return container;\n}\n\nexport { drawTimers };\n", "async function parseHtml(htmlString) {\n  const parser = new DOMParser();\n\n  const cleanedHtmlString = htmlString\n    .replace(/\\\\&quot;/g, '\"') // Handle escaped quotes if they exist\n    .replace(/\\\\\"/g, '\"'); // Normalize double-escaped quotes\n\n  const doc = parser.parseFromString(cleanedHtmlString, \"text/html\");\n\n  return doc;\n}\n\nasync function getElementsOnThePage(selector, url) {\n  const response = await fetch(url);\n  const data = await response.text();\n\n  const doc = await parseHtml(data);\n  const elements = doc.querySelectorAll(selector);\n\n  if (elements.length === 0) return undefined;\n\n  return elements.length === 1 ? elements[0] : Array.from(elements);\n}\n\nasync function getMyZodiacTicketsAmount() {\n  try {\n    // get the html tag that holds the tickets amount\n    let [myTicketsTag, _] = await getElementsOnThePage(\n      \".zodiak-snake-participiants\",\n      \"/zodiac/\"\n    );\n\n    // get tickets amount, convert to number, return\n    return +myTicketsTag.innerText.trim().slice(-1);\n  } catch (e) {\n    console.log(\"\u2649\uFE0F \u041D\u0435 \u043D\u0430\u0448\u0435\u043B \u0431\u0438\u043B\u0435\u0442\u043E\u0432 \u0437\u043E\u0434\u0438\u0430\u043A\u0430.\");\n    return;\n  }\n}\n\nasync function buyZodiacTickets(count = 1) {\n  await fetch(new URL(window.location.href).origin + \"/zodiac/\", {\n    headers: {\n      accept: \"*/*\",\n      \"accept-language\": \"en-GB,en-US;q=0.9,en;q=0.8\",\n      \"content-type\": \"application/x-www-form-urlencoded; charset=UTF-8\",\n      \"sec-fetch-site\": \"same-origin\",\n      \"x-requested-with\": \"XMLHttpRequest\",\n    },\n    referrer: new URL(window.location.href).origin + \"/zodiac/\",\n    referrerPolicy: \"strict-origin-when-cross-origin\",\n    body: `action=buy_ticket&value=${count}&__referrer=%2Fzodiac%2F&return_url=%2Fzodiac%2F`,\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"include\",\n  });\n}\n\nasync function zodiacMode(\n  { count, intervalMin } = { count: 1, intervalMin: 60 }\n) {\n  const myZodiacTicketsAmount = await getMyZodiacTicketsAmount();\n\n  if (myZodiacTicketsAmount === undefined)\n    return showAlert(\"\u041E\u0448\u0438\u0431\u043A\u0430\", \"\u041D\u0435\u0442\u0443 \u0437\u043E\u0434\u0438\u0430\u043A\u0430.\");\n\n  if (myZodiacTicketsAmount < 1) {\n    showAlert(\"\u0417\u043E\u0434\u0438\u0430\u043A \u2649\uFE0F\", `\u041D\u0435 \u043D\u0430\u0448\u0435\u043B \u0431\u0438\u043B\u0435\u0442\u043E\u0432. \u041F\u043E\u043A\u0443\u043F\u0430\u044E ${count} \u0448\u0442.`);\n    await buyZodiacTickets(1);\n  } else {\n    showAlert(\n      \"\u0417\u043E\u0434\u0438\u0430\u043A \u2649\uFE0F\",\n      `\u041D\u0430\u0448\u0435\u043B ${myZodiacTicketsAmount} \u0431\u0438\u043B\u0435\u0442 \u0437\u043E\u0434\u0438\u0430\u043A\u0430. \u0421\u043A\u0438\u043F...`\n    );\n  }\n\n  showAlert(\"\u0417\u043E\u0434\u0438\u0430\u043A \u2649\uFE0F\", `\u041F\u0440\u043E\u0431\u0443\u044E \u0437\u0430\u043D\u043E\u0432\u043E \u0447\u0435\u0440\u0435\u0437 ${intervalMin} \u043C\u0438\u043D\u0443\u0442(\u044B).`);\n  setTimeout(\n    async () => await zodiacMode({ count, intervalMin }),\n    intervalMin * 60 * 1000\n  );\n}\n\nexport { zodiacMode };\n"],
  "mappings": "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",
  "names": ["index_exports", "__export", "BANNED_CARS_RIDES_IDS", "DOPINGS_DATA_ST", "EXCEPTION_CARS", "EXCEPTION_PLANES_AND_BOATS_RIDES_IDS", "HEADERS", "LEGACY_initGroupFightLogs", "PLANES_AND_BOATS_RIDES_IDS", "aIsGroupFight", "attackByCriteria", "attackOrReschedule", "attackPlayer", "attackRandom", "autoPilot", "boostClan", "buyCasinoTokens", "carBringup", "carBringupMode", "chaoticFightMode", "checkBronikPieces", "checkBubble", "checkCarTank", "checkInjury", "checkVictimWorthy", "convertPlayerUrlToId", "createButton", "createPopover", "delay", "drawTimers", "dungeonSpeedUp", "eatSilly", "eatSnickers", "farm", "farmEnemies", "farmVictims", "fightMode", "fillCarTank", "filterLogs", "formatNumber", "formatTime", "fuelAllCars", "gatherStats", "getAlleyCooldown", "getElementsOnThePage", "getGarageRides", "getMoscowTime", "getPlayerId", "getStats", "getTodayScore", "handlePvpFight", "handleSmurfFight", "handleUI", "heal", "init", "joinBankRobbery", "joinChaoticFight", "joinDeps", "joinGypsy", "joinPahan", "joinProt", "joinSiri", "kubovichSpeedUp", "makeTurn", "mapDataStToDataId", "metroWorkMode", "neftLeninSpeedUp", "parseHtml", "patrolMode", "phoneSpeedUp", "playGypsy", "player", "protMode", "redrawMain", "renderCandyCountdown", "renderNavbar", "renderPanel", "resetAlleyCooldown", "restoreHP", "scrapeStat", "sendAlert", "sendCars", "sendMessage", "sendPlanesAndBoats", "sendRide", "shouldAttack", "showAlert", "signUpForDeps", "signUpForSiri", "smurfInit", "sortGarage", "startPatrol", "strToHtml", "takeDailyDose", "timeToMs", "trackAndAttackRat", "trackRatMode", "tradeAllSiri", "undressItem", "useDopings", "useItem", "waitForCooldown", "watchTv", "workMode", "zodiacMode", "playBlackjack", "total", "sum", "card", "res", "hit", "$", "timeToMs", "timeStr", "parts", "hours", "minutes", "seconds", "getMoscowTime", "formatTime", "hrs", "mins", "secs", "formatNumber", "num", "delay", "s", "res", "getElementsOnThePage", "selector", "pathname", "currentOrigin", "pathName", "data", "elements", "parseHtml", "htmlString", "parser", "cleanedHtmlString", "convertPlayerUrlToId", "url", "match", "getPlayerId", "doc", "playerUrl", "filterLogs", "tr", "el", "tugriki", "user", "getTodayScore", "strToHtml", "tempDiv", "scrapeStat", "i", "tooltipTriggerSelector", "resolve", "tooltipContainer", "keySelector", "key", "basicSelector", "basicText", "basicValue", "superSelector", "superText", "superValue", "gatherStats", "stats", "stat", "createButton", "text", "onClick", "title", "className", "disableAfterClick", "btn", "strToHtml", "newText", "event", "e", "createDropdown", "toggleText", "items", "isOpen", "$container", "item", "toggleBtn", "$dropdown", "createNumberAction", "label", "action", "min", "max", "$input", "val", "button", "count", "startTime", "i", "diffMs", "EXCEPTION_CARS", "EXCEPTION_PLANES_AND_BOATS_RIDES_IDS", "PLANES_AND_BOATS_RIDES_IDS", "BANNED_CARS_RIDES_IDS", "PRESETS", "carBringup", "carId", "checkCarTank", "carBringupMode", "cooldownTimer", "getElementsOnThePage", "secondsLeft", "formatTime", "delay", "newSecondsLeft", "fillCarTank", "fuelAllCars", "carsIds", "el", "id", "getGarageRides", "li", "rideId", "sendRide", "data", "resAlert", "parseHtml", "alertsContainer", "createPopover", "sendPlanesAndBoats", "planesAndBoatsRides", "ride", "sendAlert", "sendCars", "rideIds", "cars", "car", "carTankSpan", "sortGarage", "sendPlanesAndBoatsBtn", "createButton", "sendCarsPresetsBtns", "preset", "$items", "span", "e", "sortAndReattach", "exceptionCars", "planesAndBoats", "rest", "bannedCars", "categorizeCars", "allCars", "sortedItems", "sortCarsByCooldown", "cooldownBoatsCount", "getCarCooldown", "cooldownCarsCount", "chinuk", "buksir", "carsCountDiv", "buttonsGrid", "carsControlDiv", "$parent", "redrawCards", "_", "garageContainer", "$el", "timer", "a", "b", "directionId", "getSortIndex", "list", "index", "idA", "idB", "addToContacts", "playerName", "contactType", "removeFromContacts", "playerId", "sendMessage", "recipientName", "message", "postkey", "getElementsOnThePage", "clearEnemies", "renderCoolnessByPlayer", "players", "player", "$player", "playerId", "coolness", "getElementsOnThePage", "originalCoolness", "numberSpan", "number", "formatted", "formatNumber", "sortClanPlayersByCoolness", "users", "coolnessValue", "a", "b", "$players", "user", "addClanToEnemies", "clearEnemies", "playerNames", "_", "el", "name", "addToContacts", "sendAlert", "payEmerald", "count", "OPTIONS", "ABILITIES", "speedRun", "currentCountryIndex", "getCurrentCountryIndex", "maxCountryIndex", "getMaxCountryIndex", "restoreHP", "pvpStartFight", "handlePvpFight", "farmStrongHelpers", "rollTargetOpponent", "handleFarmStrongHelpers", "delay", "handlePvpFight", "infinite", "useAbility", "ABILITIES", "makeTurn", "turns", "i", "isFightOver", "checkLastFightLost", "delay", "fightLost", "rollTargetOpponent", "OPTIONS", "name", "maxPoints", "victoryPoints", "getOpponent", "handleFarmStrongHelpers", "obj", "opponent", "rollPvp", "e", "rollByMaxPoints", "lossThreshold", "rewards", "getPointsReward", "top", "resHtmlStr", "resHtml", "parseHtml", "pointsReward", "abilityId", "delay", "seconds", "resolve", "getPointsReward", "doc", "maxPoints", "victoryPoints", "getCurrentCountryIndex", "getMaxCountryIndex", "error", "pvpStartFight", "parseHtml", "htmlString", "parser", "cleanedHtmlString", "strToHtml", "tempDiv", "farmStars", "prevCountry", "getCurrentCountryIndex", "restoreHP", "pvpStartFight", "handlePvpFight", "restoreHP", "data", "customRoll", "top", "resHtmlStr", "resHtml", "parseHtml", "newStats", "newOpponentStats", "footerReward", "replaceRollBtnHandlers", "renderPvpTotals", "totals", "match", "$totalsElement", "handleSkipFight", "handlePvpFight", "pvpStartFight", "handleInfiniteFight", "index", "btn", "helpersUI", "$parent", "highlightFullCountries", "text", "current", "total", "initPvpUI", "strToHtml", "farmStrongHelpers", "farmStars", "speedRun", "rollByMaxPoints", "skipFightBtn", "infiniteFightBtn", "_dung", "m", "nextxod", "data", "handlePvpFight", "klet", "zona", "boss", "apt", "startDungeon", "dungeon_solo_default", "joinProt", "restoreHP", "getMetroFightKey", "onclickValue", "match", "key", "boostClan", "protMode", "attackRandom", "fightId", "createContainer", "title", "children", "container", "content", "child", "getPetAbilities", "petId", "petInfo", "getElementsOnThePage", "abilities", "_", "el", "$el", "hasAction", "timerDiv", "hasTimer", "img", "getPetsIds", "$thumb", "id", "renderAbilitiesContainer", "container", "showAbilitiesBtn", "createButton", "petsIds", "ability", "wrapper", "createContainer", "redrawPetarena", "redrawLayout", "cage", "relict", "text", "relictPetsTable", "cageTable", "table", "tds", "firstChild1", "firstChild2", "$action", "getTattooDetails", "imgSrc", "parts", "type", "category", "getActiveTattoo", "error", "handleModifyManyTattoos", "count", "activeTattoo", "i", "modifyTattoo", "gatherAlerts", "modifyManyButton", "createButton", "alertsContainer", "createPopover", "_", "alert", "primaryKeywords", "secondaryKeywords", "redrawGroupFightLogs", "$allLogs", "$container", "allKeywords", "k", "$matching", "_", "p", "text", "entries", "$p", "entry", "$logWrapper", "$img", "b", "$wrapper", "el", "enhanceLogs", "currentPlayerName", "getCurrentPlayerName", "$logsContainer", "$myLogsContainer", "sortPlayersLists", "logActions", "looselyIncludes", "html", "word", "dropdownContainer", "dropdownMap", "logText", "icon", "action", "condition", "createDropdown", "addIcon", "dropdown", "$myLogsDropdown", "$rageContainer", "$me", "$dead", "$players", "$brothersMikhalycha", "$li", "$playerRage", "rageWidth", "a", "player", "addIcon", "$p", "src", "$img", "$span", "getCurrentPlayerName", "createPopover", "id", "customCss", "$container", "closeButton", "createButton", "$closeButton", "assistantButtonsProps", "workMode", "patrolMode", "trackRatMode", "event", "btn", "$currencyContainer", "getCurrencyContainer", "signUpForSiri", "signUpForDeps", "joinPahan", "farm", "eatSnickers", "chaoticFightMode", "joinProt", "boostClan", "metroWorkMode", "checkBronikPieces", "dungeon_solo_default", "navLinks", "sendAlert", "title", "img", "text", "container", "message", "image", "renderPanel", "$assistantContainer", "e", "$autopilotBtnContainer", "onClick", "condition", "disableAfterClick", "$btn", "createButton", "renderNavbar", "$navLinks", "href", "$a", "borderdata", "getElementsOnThePage", "currency", "span", "originalText", "number", "formatNumber", "redrawMain", "initMultiItemUi", "expandInventory", "expandDopings", "div", "tradeAllSiri", "expandPetTab", "modifyPayEmerald", "$target", "count", "payEmerald", "sortInventory", "topItems", "fragments", "id", "item", "inventoryContainer", "initEatDops", "data", "st", "a", "al", "j", "i", "obj", "num", "action", "sp", "gift", "type", "act", "b", "petElement", "petId", "petActiveMessage", "petActionHtml", "actionElement", "giftElement", "inventorySelector", "clothesSelector", "css", "style", "name", "defaultValue", "value", "rawValue", "url", "func", "typePrefix", "prefixedValue", "spans", "cur_loc", "myframe", "dopingAccordion", "eatButton", "eatD", "padding", "h2", "dataDiv", "div1", "tempNode", "dops", "backGroundDiv", "actionDiv", "imgDiv", "actionJS", "OKButton", "CancelButton", "backGroundDivs", "result", "renderCandyCountdown", "parseDate", "dateString", "match", "_", "day", "month", "year", "hours", "minutes", "initializeCountdown", "timerSeconds", "endTime", "findCandyExpiration", "candyName", "candyElement", "expirationText", "serverTime", "candyEndDate", "eatSilly", "LEGACY_initGroupFightLogs", "OptionsVar", "drawUserLogs", "fightLogs", "currentStep", "userName", "activeIconsHtml", "counterIconsHtml", "weaponKey", "awpn", "weaponLog", "remainingTurns", "userElement", "fightAnalyze", "fightId", "sessionData", "fightLog", "step", "nik", "slog", "izNik", "specialNik", "updateFightLog", "weapon", "turns", "cleanNik", "findNik", "pn", "izNikWeapons", "sn", "relatedItem", "findPreviousKickLog", "prevItem", "fightLogItems", "fstr", "cnt", "bikeLogs", "log", "bikeSlog", "autokick", "useabl", "renderFightNavbar", "usr", "flt", "lur", "luralive", "fightGroupForm", "fightAction", "logTurnsNavbar", "cleanupButton", "enhanceLogs", "skipNpcFightButton", "handlePvpFight", "abl", "aIsGroupFight", "resolve", "kubovichSpeedUp", "balance", "cost", "kaction", "isYellow", "wallet", "current", "phoneSpeedUp", "app", "app_id", "now", "fx", "neftLeninSpeedUp", "elm", "dungeonSpeedUp", "cb", "redrawTattoo", "modifyManyContainer", "strToHtml", "modifyManyButton", "handleModifyManyTattoos", "createNumberAction", "redrawTVTower", "priorityKeywords", "$parent", "$articles", "rewardA", "rewardB", "hasPriorityA", "keyword", "redrawRats", "replaceRatSearch", "setRatRedirect", "attackRat", "isGroupFight", "handleEndOfGroupFight", "REDIRECT_URLS", "redirectUrl", "restoreHP", "handleGroupFightUI", "miniChat", "$content", "redrawGroupFightLogs", "expandContainers", "redrawCollectins", "imageTitle", "titleSpan", "redrawArbat", "html", "bringupBtn", "carId", "carBringupMode", "actions", "redrawNeftLenin", "wrapper", "light", "dark", "redrawTonusRestore", "handleUI", "getStats", "sortGarage", "$list", "coolA", "initPvpUI", "redrawPetarena", "normalGameContainer", "playGypsy", "flowersGameContainer", "btnInputField", "playBlackjack", "coolnessSpan", "sortClanPlayersByCoolness", "addToEnemiesBtn", "addClanToEnemies", "DOPINGS_DATA_ST", "mapDataStToDataId", "dataSt", "values", "st", "getElementsOnThePage", "useDopings", "dopingsStArr", "idsToEat", "id", "useItem", "heal", "itemId", "data", "inventory", "takeDailyDose", "eatGlupaya", "bomjori", "kukuruza", "pryaniki", "pasta", "caramels", "pillsHealth", "vitaminsHealth", "glupaya", "toEat", "restoreHP", "eatSilly", "sillyId", "getStats", "statsStrArr", "el", "stats", "line", "key", "rest", "match", "sendAlert", "k", "v", "workMode", "timeHours", "workBurgers", "getElementsOnThePage", "workCooldownSeconds", "formatTime", "patrolMode", "minutes", "patrolForm", "secondsUntilNextPatrol", "patrolTimerSeconds", "startPatrol", "e", "joinBankRobbery", "fightId", "timeMin", "region", "watchTv", "isInGroupFight", "currentUrl", "handleSmurfFight", "cooldownSeconds", "getAlleyCooldown", "restoreHP", "attackByCriteria", "checkBubble", "cb", "extraDelaySeconds", "args", "bubble", "bubbleText", "bubbleTimeLeft", "attackOrReschedule", "aIsGroupFight", "alleyCooldown", "farmVictims", "waitForCooldown", "data", "htmlString", "doc", "parseHtml", "playerId", "getPlayerId", "attackPlayer", "checkVictimWorthy", "farmEnemies", "intervalMin", "shouldAttack", "statsDiff", "oppStats", "el", "a", "b", "fightDocument", "fightLoot", "opponentName", "opponentId", "removeFromContacts", "addToContacts", "checkBronikPieces", "pieceName", "unixEndTime", "delay", "checkInjury", "fightMode", "intervalMinutes", "minLvl", "maxLvl", "criteria", "trackRatMode", "frequencyMin", "ratOver", "secondsLeft", "ratCooldownSeconds", "trackAndAttackRat", "workMetro", "action", "attackRatMetro", "metroWorkMode", "timer", "sendAlert", "farm", "count", "i", "eatSnickers", "level", "resetAlleyCooldown", "werewolf", "joinChaoticFight", "chaoticFightMode", "isWithinMoscowTimeRange", "now", "options", "moscowTime", "hour", "minute", "currentMinutes", "scheduleFight", "nextMinute", "nextHour", "targetMinute", "targetTime", "delayMs", "makeTurn", "turns", "isFightOver", "signUpForSiri", "battleHours", "getMoscowTime", "currentHour", "nextBattleHour", "nextBattleDate", "nextBattleSeconds", "msTillNextBattle", "joinSiri", "signUpForDeps", "joinDeps", "joinPahan", "joinGypsy", "gypsyCooldown", "playGypsy", "searchInventory", "query", "inventory", "item", "formatStackList", "stackList", "entry", "tradeSiri", "itemId", "prize", "tradeAllSiri", "useItem", "siris", "siriStack", "Moscowpoly", "SteppedEase", "TweenLite", "moscowpolySpeedUp", "result", "self", "$dice1", "$dice2", "dice1Steps", "dice1AnimationTime", "dice1TweenFrames", "dice2AnimationTime", "dice2Steps", "dice2TweenFrames", "dicePosition", "dice1Params", "i", "dice1TweenPosition", "dice2Params", "dice2TweenPosition", "steps", "position", "data", "btnInputField", "createNumberAction", "resolve", "timersData", "getTimer", "selector", "url", "imgSrc", "targetHref", "onclick", "timerSpan", "getElementsOnThePage", "imgTag", "strToHtml", "STYLES", "container", "drawTimers", "renderTimers", "validTimers", "timerData", "error", "handleResize", "button", "STYLES", "parseHtml", "htmlString", "parser", "cleanedHtmlString", "getElementsOnThePage", "selector", "url", "data", "elements", "getMyZodiacTicketsAmount", "myTicketsTag", "_", "buyZodiacTickets", "count", "zodiacMode", "intervalMin", "myZodiacTicketsAmount", "player", "showAlert", "BASE_URL", "HEADERS", "buyCasinoTokens", "res", "success", "waitForCooldown", "callback", "cooldownSeconds", "getAlleyCooldown", "showAlert", "undressItem", "itemId", "player", "autoPilot", "carBringupMode", "workMode", "patrolMode", "trackRatMode", "zodiacMode", "smurfInit", "init", "renderPanel", "renderNavbar", "redrawMain", "drawTimers", "renderCandyCountdown", "moscowpolySpeedUp", "kubovichSpeedUp", "neftLeninSpeedUp", "dungeonSpeedUp", "handleUI"]
}
